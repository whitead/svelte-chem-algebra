var app=function(){"use strict";function t(){}function e(t){return t()}function c(){return Object.create(null)}function r(t){t.forEach(e)}function n(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function C(t,e){t.appendChild(e)}function s(t,e,c){t.insertBefore(e,c||null)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function o(t,e){for(let c=0;c<t.length;c+=1)t[c]&&t[c].d(e)}function l(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function u(){return h(" ")}function g(t,e,c,r){return t.addEventListener(e,c,r),()=>t.removeEventListener(e,c,r)}function d(t,e,c){null==c?t.removeAttribute(e):t.getAttribute(e)!==c&&t.setAttribute(e,c)}function f(t,e){e=""+e,t.data!==e&&(t.data=e)}function p(t,e,c){for(let c=0;c<t.options.length;c+=1){const r=t.options[c];if(r.__value===e)return void(r.selected=!0)}c&&void 0===e||(t.selectedIndex=-1)}function m(t,e,c){t.classList[c?"add":"remove"](e)}let O;function v(t){O=t}function b(t){(function(){if(!O)throw new Error("Function called outside component initialization");return O})().$$.after_update.push(t)}const N=[],w=[];let y=[];const S=[],x=Promise.resolve();let A=!1;function F(t){y.push(t)}const R=new Set;let k=0;function M(){if(0!==k)return;const t=O;do{try{for(;k<N.length;){const t=N[k];k++,v(t),E(t.$$)}}catch(t){throw N.length=0,k=0,t}for(v(null),N.length=0,k=0;w.length;)w.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];R.has(e)||(R.add(e),e())}y.length=0}while(N.length);for(;S.length;)S.pop()();A=!1,R.clear(),v(t)}function E(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}const T=new Set;let I;function B(){I={r:0,c:[],p:I}}function L(){I.r||r(I.c),I=I.p}function P(t,e){t&&t.i&&(T.delete(t),t.i(e))}function D(t,e,c,r){if(t&&t.o){if(T.has(t))return;T.add(t),I.c.push((()=>{T.delete(t),r&&(c&&t.d(1),r())})),t.o(e)}else r&&r()}function H(t){t&&t.c()}function z(t,c,i,C){const{fragment:s,after_update:a}=t.$$;s&&s.m(c,i),C||F((()=>{const c=t.$$.on_mount.map(e).filter(n);t.$$.on_destroy?t.$$.on_destroy.push(...c):r(c),t.$$.on_mount=[]})),a.forEach(F)}function $(t,e){const c=t.$$;null!==c.fragment&&(!function(t){const e=[],c=[];y.forEach((r=>-1===t.indexOf(r)?e.push(r):c.push(r))),c.forEach((t=>t())),y=e}(c.after_update),r(c.on_destroy),c.fragment&&c.fragment.d(e),c.on_destroy=c.fragment=null,c.ctx=[])}function _(t,e){-1===t.$$.dirty[0]&&(N.push(t),A||(A=!0,x.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(e,n,i,C,s,o,l,h=[-1]){const u=O;v(e);const g=e.$$={fragment:null,ctx:[],props:o,update:t,not_equal:s,bound:c(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:c(),dirty:h,skip_bound:!1,root:n.target||u.$$.root};l&&l(g.root);let d=!1;if(g.ctx=i?i(e,n.props||{},((t,c,...r)=>{const n=r.length?r[0]:c;return g.ctx&&s(g.ctx[t],g.ctx[t]=n)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](n),d&&_(e,t)),c})):[],g.update(),d=!0,r(g.before_update),g.fragment=!!C&&C(g.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);g.fragment&&g.fragment.l(t),t.forEach(a)}else g.fragment&&g.fragment.c();n.intro&&P(e.$$.fragment),z(e,n.target,n.anchor,n.customElement),M()}v(u)}class W{$destroy(){$(this,1),this.$destroy=t}$on(e,c){if(!n(c))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(c),()=>{const t=r.indexOf(c);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var X=class t{static clone(e){let c=Array.isArray(e)?Array():{};for(let r in e){let n=e[r];"function"==typeof n.clone?c[r]=n.clone():c[r]="object"==typeof n?t.clone(n):n}return c}static equals(t,e){if(t.length!==e.length)return!1;let c=t.slice().sort(),r=e.slice().sort();for(var n=0;n<c.length;n++)if(c[n]!==r[n])return!1;return!0}static print(t){if(0==t.length)return"";let e="(";for(let c=0;c<t.length;c++)e+=t[c].id?t[c].id+", ":t[c]+", ";return e=e.substring(0,e.length-2),e+")"}static each(t,e){for(let c=0;c<t.length;c++)e(t[c])}static get(t,e,c){for(let r=0;r<t.length;r++)if(t[r][e]==c)return t[r]}static contains(t,e){if(e.property||e.func){if(e.func){for(let c=0;c<t.length;c++)if(e.func(t[c]))return!0}else for(let c=0;c<t.length;c++)if(t[c][e.property]==e.value)return!0}else for(let c=0;c<t.length;c++)if(t[c]==e.value)return!0;return!1}static intersection(t,e){let c=new Array;for(let r=0;r<t.length;r++)for(let n=0;n<e.length;n++)t[r]===e[n]&&c.push(t[r]);return c}static unique(t){let e={};return t.filter((function(t){return void 0===e[t]&&(e[t]=!0)}))}static count(t,e){let c=0;for(let r=0;r<t.length;r++)t[r]===e&&c++;return c}static toggle(t,e){let c=Array(),r=!1;for(let n=0;n<t.length;n++)t[n]!==e?c.push(t[n]):r=!0;return r||c.push(e),c}static remove(t,e){let c=Array();for(let r=0;r<t.length;r++)t[r]!==e&&c.push(t[r]);return c}static removeUnique(t,e){let c=t.indexOf(e);return c>-1&&t.splice(c,1),t}static removeAll(t,e){return t.filter((function(t){return-1===e.indexOf(t)}))}static merge(t,e){let c=new Array(t.length+e.length);for(let e=0;e<t.length;e++)c[e]=t[e];for(let r=0;r<e.length;r++)c[t.length+r]=e[r];return c}static containsAll(t,e){let c=0;for(let r=0;r<t.length;r++)for(let n=0;n<e.length;n++)t[r]===e[n]&&c++;return c===e.length}static sortByAtomicNumberDesc(t){let e=t.map((function(t,e){return{index:e,value:t.atomicNumber.split(".").map(Number)}}));return e.sort((function(t,e){let c=Math.min(e.value.length,t.value.length),r=0;for(;r<c&&e.value[r]===t.value[r];)r++;return r===c?e.value.length-t.value.length:e.value[r]-t.value[r]})),e.map((function(e){return t[e.index]}))}static deepCopy(e){let c=Array();for(let r=0;r<e.length;r++){let n=e[r];c[r]=n instanceof Array?t.deepCopy(n):n}return c}};var U=class t{static round(t,e){return e=e||1,Number(Math.round(t+"e"+e)+"e-"+e)}static meanAngle(t){let e=0,c=0;for(var r=0;r<t.length;r++)e+=Math.sin(t[r]),c+=Math.cos(t[r]);return Math.atan2(e/t.length,c/t.length)}static innerAngle(e){return t.toRad(180*(e-2)/e)}static polyCircumradius(t,e){return t/(2*Math.sin(Math.PI/e))}static apothem(t,e){return t*Math.cos(Math.PI/e)}static apothemFromSideLength(e,c){let r=t.polyCircumradius(e,c);return t.apothem(r,c)}static centralAngle(e){return t.toRad(360/e)}static toDeg(e){return e*t.degFactor}static toRad(e){return e*t.radFactor}static parityOfPermutation(t){let e=new Uint8Array(t.length),c=0,r=function(c,n=0){return 1===e[c]?n:(n++,e[c]=1,r(t[c],n))};for(var n=0;n<t.length;n++){if(1===e[n])continue;c+=1-r(n)%2}return c%2?-1:1}static get radFactor(){return Math.PI/180}static get degFactor(){return 180/Math.PI}static get twoPI(){return 2*Math.PI}};var Y,q,G,j,K,Z,J,Q,tt=class t{constructor(t,e){0==arguments.length?(this.x=0,this.y=0):1==arguments.length?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}clone(){return new t(this.x,this.y)}toString(){return"("+this.x+","+this.y+")"}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}divide(t){return this.x/=t,this.y/=t,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}invert(){return this.x=-this.x,this.y=-this.y,this}angle(){return Math.atan2(this.y,this.x)}distance(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))}distanceSq(t){return(t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y)}clockwise(t){let e=this.y*t.x,c=this.x*t.y;return e>c?-1:e===c?0:1}relativeClockwise(t,e){let c=(this.y-t.y)*(e.x-t.x),r=(this.x-t.x)*(e.y-t.y);return c>r?-1:c===r?0:1}rotate(e){let c=new t(0,0),r=Math.cos(e),n=Math.sin(e);return c.x=this.x*r-this.y*n,c.y=this.x*n+this.y*r,this.x=c.x,this.y=c.y,this}rotateAround(t,e){let c=Math.sin(t),r=Math.cos(t);this.x-=e.x,this.y-=e.y;let n=this.x*r-this.y*c,i=this.x*c+this.y*r;return this.x=n+e.x,this.y=i+e.y,this}rotateTo(e,c,r=0){this.x+=.001,this.y-=.001;let n=t.subtract(this,c),i=t.subtract(e,c),C=t.angle(i,n);return this.rotateAround(C+r,c),this}rotateAwayFrom(t,e,c){this.rotateAround(c,e);let r=this.distanceSq(t);this.rotateAround(-2*c,e),this.distanceSq(t)<r&&this.rotateAround(2*c,e)}getRotateAwayFromAngle(t,e,c){let r=this.clone();r.rotateAround(c,e);let n=r.distanceSq(t);return r.rotateAround(-2*c,e),r.distanceSq(t)<n?c:-c}getRotateTowardsAngle(t,e,c){let r=this.clone();r.rotateAround(c,e);let n=r.distanceSq(t);return r.rotateAround(-2*c,e),r.distanceSq(t)>n?c:-c}getRotateToAngle(e,c){let r=t.subtract(this,c),n=t.subtract(e,c),i=t.angle(n,r);return Number.isNaN(i)?0:i}isInPolygon(t){let e=!1;for(let c=0,r=t.length-1;c<t.length;r=c++)t[c].y>this.y!=t[r].y>this.y&&this.x<(t[r].x-t[c].x)*(this.y-t[c].y)/(t[r].y-t[c].y)+t[c].x&&(e=!e);return e}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSq(){return this.x*this.x+this.y*this.y}normalize(){return this.divide(this.length()),this}normalized(){return t.divideScalar(this,this.length())}whichSide(t,e){return(this.x-t.x)*(e.y-t.y)-(this.y-t.y)*(e.x-t.x)}sameSideAs(t,e,c){let r=this.whichSide(t,e),n=c.whichSide(t,e);return r<0&&n<0||0==r&&0==n||r>0&&n>0}static add(e,c){return new t(e.x+c.x,e.y+c.y)}static subtract(e,c){return new t(e.x-c.x,e.y-c.y)}static multiply(e,c){return new t(e.x*c.x,e.y*c.y)}static multiplyScalar(e,c){return new t(e.x,e.y).multiplyScalar(c)}static midpoint(e,c){return new t((e.x+c.x)/2,(e.y+c.y)/2)}static normals(e,c){let r=t.subtract(c,e);return[new t(-r.y,r.x),new t(r.y,-r.x)]}static units(e,c){let r=t.subtract(c,e);return[new t(-r.y,r.x).normalize(),new t(r.y,-r.x).normalize()]}static divide(e,c){return new t(e.x/c.x,e.y/c.y)}static divideScalar(e,c){return new t(e.x/c,e.y/c)}static dot(t,e){return t.x*e.x+t.y*e.y}static angle(e,c){let r=t.dot(e,c);return Math.acos(r/(e.length()*c.length()))}static threePointangle(e,c,r){let n=t.subtract(c,e),i=t.subtract(r,c),C=e.distance(c),s=c.distance(r);return Math.acos(t.dot(n,i)/(C*s))}static scalarProjection(e,c){let r=c.normalized();return t.dot(e,r)}static averageDirection(e){let c=new t(0,0);for(var r=0;r<e.length;r++){let t=e[r];c.add(t)}return c.normalize()}};function et(){if(q)return Y;q=1;const t=U,e=X,c=tt;nt();class r{constructor(t,e=0,r=0){this.id=null,this.value=t,this.position=new c(e||0,r||0),this.previousPosition=new c(0,0),this.parentVertexId=null,this.children=Array(),this.spanningTreeChildren=Array(),this.edges=Array(),this.positioned=!1,this.angle=null,this.dir=1,this.neighbourCount=0,this.neighbours=Array(),this.neighbouringElements=Array(),this.forcePositioned=!1}setPosition(t,e){this.position.x=t,this.position.y=e}setPositionFromVector(t){this.position.x=t.x,this.position.y=t.y}addChild(t){this.children.push(t),this.neighbours.push(t),this.neighbourCount++}addRingbondChild(t,e){if(this.children.push(t),this.value.bracket){let c=1;0===this.id&&0===this.value.bracket.hcount&&(c=0),1===this.value.bracket.hcount&&0===e&&(c=2),1===this.value.bracket.hcount&&1===e&&(c=this.neighbours.length<3?2:3),null===this.value.bracket.hcount&&0===e&&(c=1),null===this.value.bracket.hcount&&1===e&&(c=this.neighbours.length<3?1:2),this.neighbours.splice(c,0,t)}else this.neighbours.push(t);this.neighbourCount++}setParentVertexId(t){this.neighbourCount++,this.parentVertexId=t,this.neighbours.push(t)}isTerminal(){return!!this.value.hasAttachedPseudoElements||(null===this.parentVertexId&&this.children.length<2||0===this.children.length)}clone(){let t=new r(this.value,this.position.x,this.position.y);return t.id=this.id,t.previousPosition=new c(this.previousPosition.x,this.previousPosition.y),t.parentVertexId=this.parentVertexId,t.children=e.clone(this.children),t.spanningTreeChildren=e.clone(this.spanningTreeChildren),t.edges=e.clone(this.edges),t.positioned=this.positioned,t.angle=this.angle,t.forcePositioned=this.forcePositioned,t}equals(t){return this.id===t.id}getAngle(e=null,r=!1){let n=null;return n=e?c.subtract(this.position,e):c.subtract(this.position,this.previousPosition),r?t.toDeg(n.angle()):n.angle()}getTextDirection(e,c=!1){let r=this.getDrawnNeighbours(e),n=Array();if(1===e.length)return"right";for(let t=0;t<r.length;t++)n.push(this.getAngle(e[r[t]].position));let i=t.meanAngle(n);if(this.isTerminal()||c)Math.round(100*i)/100==1.57&&(i-=.2),i=Math.round(Math.round(i/Math.PI)*Math.PI);else{let t=Math.PI/2;i=Math.round(Math.round(i/t)*t)}return 2===i?"down":-2===i?"up":0===i||-0===i?"right":3===i||-3===i?"left":"down"}getNeighbours(t=null){if(null===t)return this.neighbours.slice();let e=Array();for(let c=0;c<this.neighbours.length;c++)this.neighbours[c]!==t&&e.push(this.neighbours[c]);return e}getDrawnNeighbours(t){let e=Array();for(let c=0;c<this.neighbours.length;c++)t[this.neighbours[c]].value.isDrawn&&e.push(this.neighbours[c]);return e}getNeighbourCount(){return this.neighbourCount}getSpanningTreeNeighbours(t=null){let e=Array();for(let c=0;c<this.spanningTreeChildren.length;c++)void 0!==t&&t==this.spanningTreeChildren[c]||e.push(this.spanningTreeChildren[c]);return null!=this.parentVertexId&&(void 0!==t&&t==this.parentVertexId||e.push(this.parentVertexId)),e}getNextInRing(t,c,r){let n=this.getNeighbours();for(let i=0;i<n.length;i++)if(e.contains(t[n[i]].value.rings,{value:c})&&n[i]!=r)return n[i];return null}}return Y=r}function ct(){if(j)return G;j=1,et(),rt();return G=class{constructor(t,e){this.id=null,this.firstRingId=t.id,this.secondRingId=e.id,this.vertices=new Set;for(var c=0;c<t.members.length;c++){let r=t.members[c];for(let t=0;t<e.members.length;t++){r===e.members[t]&&this.addVertex(r)}}}addVertex(t){this.vertices.add(t)}updateOther(t,e){this.firstRingId===e?this.secondRingId=t:this.firstRingId=t}containsRing(t){return this.firstRingId===t||this.secondRingId===t}isBridge(t){if(this.vertices.size>2)return!0;for(let e of this.vertices)if(t[e].value.rings.length>2)return!0;return!1}static isBridge(t,e,c,r){let n=null;for(let i=0;i<t.length;i++)if(n=t[i],n.firstRingId===c&&n.secondRingId===r||n.firstRingId===r&&n.secondRingId===c)return n.isBridge(e);return!1}static getNeighbours(t,e){let c=[];for(let r=0;r<t.length;r++){let n=t[r];n.firstRingId===e?c.push(n.secondRingId):n.secondRingId===e&&c.push(n.firstRingId)}return c}static getVertices(t,e,c){for(let r=0;r<t.length;r++){let n=t[r];if(n.firstRingId===e&&n.secondRingId===c||n.firstRingId===c&&n.secondRingId===e)return[...n.vertices]}}}}function rt(){if(Z)return K;Z=1;const t=X,e=tt;et();const c=ct();class r{constructor(t){this.id=null,this.members=t,this.edges=[],this.insiders=[],this.neighbours=[],this.positioned=!1,this.center=new e(0,0),this.rings=[],this.isBridged=!1,this.isPartOfBridged=!1,this.isSpiro=!1,this.isFused=!1,this.centralAngle=0,this.canFlip=!0}clone(){let e=new r(this.members);return e.id=this.id,e.insiders=t.clone(this.insiders),e.neighbours=t.clone(this.neighbours),e.positioned=this.positioned,e.center=this.center.clone(),e.rings=t.clone(this.rings),e.isBridged=this.isBridged,e.isPartOfBridged=this.isPartOfBridged,e.isSpiro=this.isSpiro,e.isFused=this.isFused,e.centralAngle=this.centralAngle,e.canFlip=this.canFlip,e}getSize(){return this.members.length}getPolygon(t){let e=[];for(let c=0;c<this.members.length;c++)e.push(t[this.members[c]].position);return e}getAngle(){return Math.PI-this.centralAngle}eachMember(t,e,c,r){let n=c=c||0===c?c:this.members[0],i=0;for(;null!=n&&i<100;){let C=n;e(C),n=t[n].getNextInRing(t,this.id,r),r=C,n==c&&(n=null),i++}}getOrderedNeighbours(t){let e=Array(this.neighbours.length);for(let r=0;r<this.neighbours.length;r++){let n=c.getVertices(t,this.id,this.neighbours[r]);e[r]={n:n.length,neighbour:this.neighbours[r]}}return e.sort((function(t,e){return e.n-t.n})),e}isBenzeneLike(t){let e=this.getDoubleBondCount(t),c=this.members.length;return 3===e&&6===c||2===e&&5===c}getDoubleBondCount(t){let e=0;for(let c=0;c<this.members.length;c++){let r=t[this.members[c]].value;"="!==r.bondType&&"="!==r.branchBond||e++}return e}contains(t){for(let e=0;e<this.members.length;e++)if(this.members[e]==t)return!0;return!1}}return K=r}function nt(){if(Q)return J;Q=1;const t=X;et(),rt();class e{constructor(t,e="-"){this.idx=null,this.element=1===t.length?t.toUpperCase():t,this.drawExplicit=!1,this.ringbonds=Array(),this.rings=Array(),this.bondType=e,this.branchBond=null,this.isBridge=!1,this.isBridgeNode=!1,this.originalRings=Array(),this.bridgedRing=null,this.anchoredRings=Array(),this.bracket=null,this.plane=0,this.attachedPseudoElements={},this.hasAttachedPseudoElements=!1,this.isDrawn=!0,this.isConnectedToRing=!1,this.neighbouringElements=Array(),this.isPartOfAromaticRing=t!==this.element,this.bondCount=0,this.chirality="",this.isStereoCenter=!1,this.priority=0,this.mainChain=!1,this.hydrogenDirection="down",this.subtreeDepth=1,this.hasHydrogen=!1,this.class=void 0}addNeighbouringElement(t){this.neighbouringElements.push(t)}attachPseudoElement(t,e,c=0,r=0){null===c&&(c=0),null===r&&(r=0);let n=c+t+r;this.attachedPseudoElements[n]?this.attachedPseudoElements[n].count+=1:this.attachedPseudoElements[n]={element:t,count:1,hydrogenCount:c,previousElement:e,charge:r},this.hasAttachedPseudoElements=!0}getAttachedPseudoElements(){let t={},e=this;return Object.keys(this.attachedPseudoElements).sort().forEach((function(c){t[c]=e.attachedPseudoElements[c]})),t}getAttachedPseudoElementsCount(){return Object.keys(this.attachedPseudoElements).length}isHeteroAtom(){return"C"!==this.element&&"H"!==this.element}addAnchoredRing(e){t.contains(this.anchoredRings,{value:e})||this.anchoredRings.push(e)}getRingbondCount(){return this.ringbonds.length}backupRings(){this.originalRings=Array(this.rings.length);for(let t=0;t<this.rings.length;t++)this.originalRings[t]=this.rings[t]}restoreRings(){this.rings=Array(this.originalRings.length);for(let t=0;t<this.originalRings.length;t++)this.rings[t]=this.originalRings[t]}haveCommonRingbond(t,e){for(let c=0;c<t.ringbonds.length;c++)for(let r=0;r<e.ringbonds.length;r++)if(t.ringbonds[c].id==e.ringbonds[r].id)return!0;return!1}neighbouringElementsEqual(t){if(t.length!==this.neighbouringElements.length)return!1;t.sort(),this.neighbouringElements.sort();for(var e=0;e<this.neighbouringElements.length;e++)if(t[e]!==this.neighbouringElements[e])return!1;return!0}getAtomicNumber(){return e.atomicNumbers[this.element]}getMaxBonds(){return e.maxBonds[this.element]}static get maxBonds(){return{H:1,C:4,N:3,O:2,P:3,S:2,B:3,F:1,I:1,Cl:1,Br:1}}static get atomicNumbers(){return{H:1,He:2,Li:3,Be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,p:15,S:16,s:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Uut:113,Uuq:114,Uup:115,Uuh:116,Uus:117,Uuo:118}}static get mass(){return{H:1,He:2,Li:3,Be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,p:15,S:16,s:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Uut:113,Uuq:114,Uup:115,Uuh:116,Uus:117,Uuo:118}}}return J=e}const it=tt;var Ct=class t{constructor(t=new it(0,0),e=new it(0,0),c=null,r=null,n=!1,i=!1){this.from=t,this.to=e,this.elementFrom=c,this.elementTo=r,this.chiralFrom=n,this.chiralTo=i}clone(){return new t(this.from.clone(),this.to.clone(),this.elementFrom,this.elementTo)}getLength(){return Math.sqrt(Math.pow(this.to.x-this.from.x,2)+Math.pow(this.to.y-this.from.y,2))}getAngle(){return it.subtract(this.getRightVector(),this.getLeftVector()).angle()}getRightVector(){return this.from.x<this.to.x?this.to:this.from}getLeftVector(){return this.from.x<this.to.x?this.from:this.to}getRightElement(){return this.from.x<this.to.x?this.elementTo:this.elementFrom}getLeftElement(){return this.from.x<this.to.x?this.elementFrom:this.elementTo}getRightChiral(){return this.from.x<this.to.x?this.chiralTo:this.chiralFrom}getLeftChiral(){return this.from.x<this.to.x?this.chiralFrom:this.chiralTo}setRightVector(t,e){return this.from.x<this.to.x?(this.to.x=t,this.to.y=e):(this.from.x=t,this.from.y=e),this}setLeftVector(t,e){return this.from.x<this.to.x?(this.from.x=t,this.from.y=e):(this.to.x=t,this.to.y=e),this}rotateToXAxis(){let t=this.getLeftVector();return this.setRightVector(t.x+this.getLength(),t.y),this}rotate(t){let e=this.getLeftVector(),c=this.getRightVector(),r=Math.sin(t),n=Math.cos(t),i=n*(c.x-e.x)-r*(c.y-e.y)+e.x,C=r*(c.x-e.x)-n*(c.y-e.y)+e.y;return this.setRightVector(i,C),this}shortenFrom(t){let e=it.subtract(this.to,this.from);return e.normalize(),e.multiplyScalar(t),this.from.add(e),this}shortenTo(t){let e=it.subtract(this.from,this.to);return e.normalize(),e.multiplyScalar(t),this.to.add(e),this}shortenRight(t){return this.from.x<this.to.x?this.shortenTo(t):this.shortenFrom(t),this}shortenLeft(t){return this.from.x<this.to.x?this.shortenFrom(t):this.shortenTo(t),this}shorten(t){let e=it.subtract(this.from,this.to);return e.normalize(),e.multiplyScalar(t/2),this.to.add(e),this.from.subtract(e),this}};var st=class t{constructor(t,e,c=1){this.id=null,this.sourceId=t,this.targetId=e,this.weight=c,this.bondType="-",this.isPartOfAromaticRing=!1,this.center=!1,this.wedge=""}setBondType(e){this.bondType=e,this.weight=t.bonds[e]}static get bonds(){return{"-":1,"/":1,"\\":1,"=":2,"#":3,$:4}}};var at={getChargeText:function(t){return 1===t?"+":2===t?"2+":-1===t?"-":-2===t?"2-":""}};const ot=U,lt=tt;et(),rt();const{getChargeText:ht}=at;var ut=class{constructor(t,e,c){this.canvas="string"==typeof t||t instanceof String?document.getElementById(t):t,this.ctx=this.canvas.getContext("2d"),this.themeManager=e,this.opts=c,this.drawingWidth=0,this.drawingHeight=0,this.offsetX=0,this.offsetY=0,this.fontLarge=this.opts.fontSizeLarge+"pt Helvetica, Arial, sans-serif",this.fontSmall=this.opts.fontSizeSmall+"pt Helvetica, Arial, sans-serif",this.updateSize(this.opts.width,this.opts.height),this.ctx.font=this.fontLarge,this.hydrogenWidth=this.ctx.measureText("H").width,this.halfHydrogenWidth=this.hydrogenWidth/2,this.halfBondThickness=this.opts.bondThickness/2}updateSize(t,e){this.devicePixelRatio=window.devicePixelRatio||1,this.backingStoreRatio=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,this.ratio=this.devicePixelRatio/this.backingStoreRatio,1!==this.ratio?(this.canvas.width=t*this.ratio,this.canvas.height=e*this.ratio,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.ctx.setTransform(this.ratio,0,0,this.ratio,0,0)):(this.canvas.width=t*this.ratio,this.canvas.height=e*this.ratio)}setTheme(t){this.colors=t}scale(t){let e=-Number.MAX_VALUE,c=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=Number.MAX_VALUE;for(var i=0;i<t.length;i++){if(!t[i].value.isDrawn)continue;let C=t[i].position;e<C.x&&(e=C.x),c<C.y&&(c=C.y),r>C.x&&(r=C.x),n>C.y&&(n=C.y)}var C=this.opts.padding;e+=C,c+=C,r-=C,n-=C,this.drawingWidth=e-r,this.drawingHeight=c-n;var s=this.canvas.offsetWidth/this.drawingWidth,a=this.canvas.offsetHeight/this.drawingHeight,o=s<a?s:a;this.ctx.scale(o,o),this.offsetX=-r,this.offsetY=-n,s<a?this.offsetY+=this.canvas.offsetHeight/(2*o)-this.drawingHeight/2:this.offsetX+=this.canvas.offsetWidth/(2*o)-this.drawingWidth/2}reset(){this.ctx.setTransform(1,0,0,1,0,0)}getColor(t){return(t=t.toUpperCase())in this.colors?this.colors[t]:this.colors.C}drawCircle(t,e,c,r,n=!0,i=!1,C=""){let s=this.ctx,a=this.offsetX,o=this.offsetY;s.save(),s.lineWidth=1.5,s.beginPath(),s.arc(t+a,e+o,c,0,ot.twoPI,!0),s.closePath(),i?(n?(s.fillStyle="#f00",s.fill()):(s.strokeStyle="#f00",s.stroke()),this.drawDebugText(t,e,C)):n?(s.fillStyle=r,s.fill()):(s.strokeStyle=r,s.stroke()),s.restore()}drawLine(t,e=!1,c=1){let r=this.ctx,n=this.offsetX,i=this.offsetY,C=t.clone().shorten(4),s=C.getLeftVector().clone(),a=C.getRightVector().clone();s.x+=n,s.y+=i,a.x+=n,a.y+=i,e||(r.save(),r.globalCompositeOperation="destination-out",r.beginPath(),r.moveTo(s.x,s.y),r.lineTo(a.x,a.y),r.lineCap="round",r.lineWidth=this.opts.bondThickness+1.2,r.strokeStyle=this.themeManager.getColor("BACKGROUND"),r.stroke(),r.globalCompositeOperation="source-over",r.restore()),s=t.getLeftVector().clone(),a=t.getRightVector().clone(),s.x+=n,s.y+=i,a.x+=n,a.y+=i,r.save(),r.beginPath(),r.moveTo(s.x,s.y),r.lineTo(a.x,a.y),r.lineCap="round",r.lineWidth=this.opts.bondThickness;let o=this.ctx.createLinearGradient(s.x,s.y,a.x,a.y);o.addColorStop(.4,this.themeManager.getColor(t.getLeftElement())||this.themeManager.getColor("C")),o.addColorStop(.6,this.themeManager.getColor(t.getRightElement())||this.themeManager.getColor("C")),e&&(r.setLineDash([1,1.5]),r.lineWidth=this.opts.bondThickness/1.5),c<1&&(r.globalAlpha=c),r.strokeStyle=o,r.stroke(),r.restore()}drawWedge(t,e=1){if(isNaN(t.from.x)||isNaN(t.from.y)||isNaN(t.to.x)||isNaN(t.to.y))return;let c=this.ctx,r=this.offsetX,n=this.offsetY,i=t.clone().shorten(5),C=i.getLeftVector().clone(),s=i.getRightVector().clone();C.x+=r,C.y+=n,s.x+=r,s.y+=n,C=t.getLeftVector().clone(),s=t.getRightVector().clone(),C.x+=r,C.y+=n,s.x+=r,s.y+=n,c.save();let a=lt.normals(C,s);a[0].normalize(),a[1].normalize();let o=C,l=s;t.getRightChiral()&&(o=s,l=C);let h=lt.add(o,lt.multiplyScalar(a[0],this.halfBondThickness)),u=lt.add(l,lt.multiplyScalar(a[0],1.5+this.halfBondThickness)),g=lt.add(l,lt.multiplyScalar(a[1],1.5+this.halfBondThickness)),d=lt.add(o,lt.multiplyScalar(a[1],this.halfBondThickness));c.beginPath(),c.moveTo(h.x,h.y),c.lineTo(u.x,u.y),c.lineTo(g.x,g.y),c.lineTo(d.x,d.y);let f=this.ctx.createRadialGradient(s.x,s.y,this.opts.bondLength,s.x,s.y,0);f.addColorStop(.4,this.themeManager.getColor(t.getLeftElement())||this.themeManager.getColor("C")),f.addColorStop(.6,this.themeManager.getColor(t.getRightElement())||this.themeManager.getColor("C")),c.fillStyle=f,c.fill(),c.restore()}drawDashedWedge(t){if(isNaN(t.from.x)||isNaN(t.from.y)||isNaN(t.to.x)||isNaN(t.to.y))return;let e=this.ctx,c=this.offsetX,r=this.offsetY,n=t.getLeftVector().clone(),i=t.getRightVector().clone();n.x+=c,n.y+=r,i.x+=c,i.y+=r,e.save();let C=lt.normals(n,i);C[0].normalize(),C[1].normalize();let s,a,o,l,h=t.getRightChiral(),u=t.clone();h?(s=i,a=n,u.shortenRight(1),o=u.getRightVector().clone(),l=u.getLeftVector().clone()):(s=n,a=i,u.shortenLeft(1),o=u.getLeftVector().clone(),l=u.getRightVector().clone()),o.x+=c,o.y+=r,l.x+=c,l.y+=r;let g=lt.subtract(a,s).normalize();e.strokeStyle=this.themeManager.getColor("C"),e.lineCap="round",e.lineWidth=this.opts.bondThickness,e.beginPath();let d=t.getLength(),f=1.25/(d/(3*this.opts.bondThickness)),p=!1;for(var m=0;m<1;m+=f){let c=lt.multiplyScalar(g,m*d),r=lt.add(s,c),n=1.5*m,i=lt.multiplyScalar(C[0],n);!p&&m>.5&&(e.stroke(),e.beginPath(),e.strokeStyle=this.themeManager.getColor(t.getRightElement())||this.themeManager.getColor("C"),p=!0),r.subtract(i),e.moveTo(r.x,r.y),r.add(lt.multiplyScalar(i,2)),e.lineTo(r.x,r.y)}e.stroke(),e.restore()}drawDebugText(t,e,c){let r=this.ctx;r.save(),r.font="5px Droid Sans, sans-serif",r.textAlign="start",r.textBaseline="top",r.fillStyle="#ff0000",r.fillText(c,t+this.offsetX,e+this.offsetY),r.restore()}drawBall(t,e,c){let r=this.ctx;r.save(),r.beginPath(),r.arc(t+this.offsetX,e+this.offsetY,this.opts.bondLength/4.5,0,ot.twoPI,!1),r.fillStyle=this.themeManager.getColor(c),r.fill(),r.restore()}drawPoint(t,e,c){let r=this.ctx,n=this.offsetX,i=this.offsetY;r.save(),r.globalCompositeOperation="destination-out",r.beginPath(),r.arc(t+n,e+i,1.5,0,ot.twoPI,!0),r.closePath(),r.fill(),r.globalCompositeOperation="source-over",r.beginPath(),r.arc(t+this.offsetX,e+this.offsetY,.75,0,ot.twoPI,!1),r.fillStyle=this.themeManager.getColor(c),r.fill(),r.restore()}drawText(t,e,c,r,n,i,C,s,a,o={}){let l=this.ctx,h=this.offsetX,u=this.offsetY;l.save(),l.textAlign="start",l.textBaseline="alphabetic";let g="",d=0;C&&(g=ht(C),l.font=this.fontSmall,d=l.measureText(g).width);let f="0",p=0;s>0&&(f=s.toString(),l.font=this.fontSmall,p=l.measureText(f).width),1===C&&"N"===c&&o.hasOwnProperty("0O")&&o.hasOwnProperty("0O-1")&&(o={"0O":{element:"O",count:2,hydrogenCount:0,previousElement:"C",charge:""}},C=0),l.font=this.fontLarge,l.fillStyle=this.themeManager.getColor("BACKGROUND");let m=l.measureText(c);m.totalWidth=m.width+d,m.height=parseInt(this.fontLarge,10);let O=m.width>this.opts.fontSizeLarge?m.width:this.opts.fontSizeLarge;O/=1.5,l.globalCompositeOperation="destination-out",l.beginPath(),l.arc(t+h,e+u,O,0,ot.twoPI,!0),l.closePath(),l.fill(),l.globalCompositeOperation="source-over";let v=-m.width/2,b=-m.width/2;l.fillStyle=this.themeManager.getColor(c),l.fillText(c,t+h+v,e+this.opts.halfFontSizeLarge+u),v+=m.width,C&&(l.font=this.fontSmall,l.fillText(g,t+h+v,e-this.opts.fifthFontSizeSmall+u),v+=d),s>0&&(l.font=this.fontSmall,l.fillText(f,t+h+b-p,e-this.opts.fifthFontSizeSmall+u),b-=p),l.font=this.fontLarge;let N=0,w=0;if(1===r){let c=t+h,r=e+u+this.opts.halfFontSizeLarge;N=this.hydrogenWidth,b-=N,"left"===n?c+=b:"right"===n||"up"===n&&i||"down"===n&&i?c+=v:"up"!==n||i?"down"!==n||i||(r+=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,c-=this.halfHydrogenWidth):(r-=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,c-=this.halfHydrogenWidth),l.fillText("H",c,r),v+=N}else if(r>1){let c=t+h,C=e+u+this.opts.halfFontSizeLarge;N=this.hydrogenWidth,l.font=this.fontSmall,w=l.measureText(r).width,b-=N+w,"left"===n?c+=b:"right"===n||"up"===n&&i||"down"===n&&i?c+=v:"up"!==n||i?"down"!==n||i||(C+=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,c-=this.halfHydrogenWidth):(C-=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,c-=this.halfHydrogenWidth),l.font=this.fontLarge,l.fillText("H",c,C),l.font=this.fontSmall,l.fillText(r,c+this.halfHydrogenWidth+w,C+this.opts.fifthFontSizeSmall),v+=N+this.halfHydrogenWidth+w}for(let c in o){if(!o.hasOwnProperty(c))continue;let r=0,i=0,C=o[c].element,s=o[c].count,a=o[c].hydrogenCount,g=o[c].charge;l.font=this.fontLarge,s>1&&a>0&&(r=l.measureText("(").width,i=l.measureText(")").width);let d=l.measureText(C).width,f=0,p="",m=0;N=0,a>0&&(N=this.hydrogenWidth),l.font=this.fontSmall,s>1&&(f=l.measureText(s).width),0!==g&&(p=ht(g),m=l.measureText(p).width),w=0,a>1&&(w=l.measureText(a).width),l.font=this.fontLarge;let O=t+h,y=e+u+this.opts.halfFontSizeLarge;l.fillStyle=this.themeManager.getColor(C),s>0&&(b-=f),s>1&&a>0&&("left"===n?(b-=i,l.fillText(")",O+b,y)):(l.fillText("(",O+v,y),v+=r)),"left"===n?(b-=d,l.fillText(C,O+b,y)):(l.fillText(C,O+v,y),v+=d),a>0&&("left"===n?(b-=N+w,l.fillText("H",O+b,y),a>1&&(l.font=this.fontSmall,l.fillText(a,O+b+N,y+this.opts.fifthFontSizeSmall))):(l.fillText("H",O+v,y),v+=N,a>1&&(l.font=this.fontSmall,l.fillText(a,O+v,y+this.opts.fifthFontSizeSmall),v+=w))),l.font=this.fontLarge,s>1&&a>0&&("left"===n?(b-=r,l.fillText("(",O+b,y)):(l.fillText(")",O+v,y),v+=i)),l.font=this.fontSmall,s>1&&("left"===n?l.fillText(s,O+b+r+i+N+w+d,y+this.opts.fifthFontSizeSmall):(l.fillText(s,O+v,y+this.opts.fifthFontSizeSmall),v+=f)),0!==g&&("left"===n?l.fillText(p,O+b+r+i+N+w+d,e-this.opts.fifthFontSizeSmall+u):(l.fillText(p,O+v,e-this.opts.fifthFontSizeSmall+u),v+=m))}l.restore()}getChargeText(t){return 1===t?"+":2===t?"2+":-1===t?"-":-2===t?"2-":""}drawDebugPoint(t,e,c="",r="#f00"){this.drawCircle(t,e,2,r,!0,!0,c)}drawAromaticityRing(t){let e=this.ctx,c=ot.apothemFromSideLength(this.opts.bondLength,t.getSize());e.save(),e.strokeStyle=this.themeManager.getColor("C"),e.lineWidth=this.opts.bondThickness,e.beginPath(),e.arc(t.center.x+this.offsetX,t.center.y+this.offsetY,c-this.opts.bondSpacing,0,2*Math.PI,!0),e.closePath(),e.stroke(),e.restore()}clear(){this.ctx.clearRect(0,0,this.canvas.offsetWidth,this.canvas.offsetHeight)}};const gt=U,dt=et(),ft=st;rt();const pt=nt();var mt=class t{constructor(t,e=!1){this.vertices=Array(),this.edges=Array(),this.atomIdxToVertexId=Array(),this.vertexIdsToEdgeId={},this.isomeric=e,this._atomIdx=0,this._time=0,this._init(t)}_init(t,e=0,c=null,r=!1){const n=t.atom.element?t.atom.element:t.atom;let i=new pt(n,t.bond);("H"!==n||!t.hasNext&&null===c)&&(i.idx=this._atomIdx,this._atomIdx++),i.branchBond=t.branchBond,i.ringbonds=t.ringbonds,i.bracket=t.atom.element?t.atom:null,i.class=t.atom.class;let C=new dt(i),s=this.vertices[c];if(this.addVertex(C),null!==i.idx&&this.atomIdxToVertexId.push(C.id),null!==c){C.setParentVertexId(c),C.value.addNeighbouringElement(s.value.element),s.addChild(C.id),s.value.addNeighbouringElement(i.element),s.spanningTreeChildren.push(C.id);let t=new ft(c,C.id,1);r?(t.setBondType(C.value.branchBond||"-"),C.id,t.setBondType(C.value.branchBond||"-"),C.id):(t.setBondType(s.value.bondType||"-"),s.id),this.addEdge(t)}let a=t.ringbondCount+1;i.bracket&&(a+=i.bracket.hcount);let o=0;if(i.bracket&&i.bracket.chirality){i.isStereoCenter=!0,o=i.bracket.hcount;for(var l=0;l<o;l++)this._init({atom:"H",isBracket:"false",branches:Array(),branchCount:0,ringbonds:Array(),ringbondCount:!1,next:null,hasNext:!1,bond:"-"},l,C.id,!0)}for(l=0;l<t.branchCount;l++)this._init(t.branches[l],l+a,C.id,!0);t.hasNext&&this._init(t.next,t.branchCount+a,C.id)}clear(){this.vertices=Array(),this.edges=Array(),this.vertexIdsToEdgeId={}}addVertex(t){return t.id=this.vertices.length,this.vertices.push(t),t.id}addEdge(t){let e=this.vertices[t.sourceId],c=this.vertices[t.targetId];return t.id=this.edges.length,this.edges.push(t),this.vertexIdsToEdgeId[t.sourceId+"_"+t.targetId]=t.id,this.vertexIdsToEdgeId[t.targetId+"_"+t.sourceId]=t.id,t.isPartOfAromaticRing=e.value.isPartOfAromaticRing&&c.value.isPartOfAromaticRing,e.value.bondCount+=t.weight,c.value.bondCount+=t.weight,e.edges.push(t.id),c.edges.push(t.id),t.id}getEdge(t,e){let c=this.vertexIdsToEdgeId[t+"_"+e];return void 0===c?null:this.edges[c]}getEdges(t){let e=Array(),c=this.vertices[t];for(var r=0;r<c.neighbours.length;r++)e.push(this.vertexIdsToEdgeId[t+"_"+c.neighbours[r]]);return e}hasEdge(t,e){return void 0!==this.vertexIdsToEdgeId[t+"_"+e]}getVertexList(){let t=[this.vertices.length];for(var e=0;e<this.vertices.length;e++)t[e]=this.vertices[e].id;return t}getEdgeList(){let t=Array(this.edges.length);for(var e=0;e<this.edges.length;e++)t[e]=[this.edges[e].sourceId,this.edges[e].targetId];return t}getAdjacencyMatrix(){let t=this.vertices.length,e=Array(t);for(var c=0;c<t;c++)e[c]=new Array(t),e[c].fill(0);for(c=0;c<this.edges.length;c++){let t=this.edges[c];e[t.sourceId][t.targetId]=1,e[t.targetId][t.sourceId]=1}return e}getComponentsAdjacencyMatrix(){let t=this.vertices.length,e=Array(t),c=this.getBridges();for(var r=0;r<t;r++)e[r]=new Array(t),e[r].fill(0);for(r=0;r<this.edges.length;r++){let t=this.edges[r];e[t.sourceId][t.targetId]=1,e[t.targetId][t.sourceId]=1}for(r=0;r<c.length;r++)e[c[r][0]][c[r][1]]=0,e[c[r][1]][c[r][0]]=0;return e}getSubgraphAdjacencyMatrix(t){let e=t.length,c=Array(e);for(var r=0;r<e;r++){c[r]=new Array(e),c[r].fill(0);for(var n=0;n<e;n++)r!==n&&this.hasEdge(t[r],t[n])&&(c[r][n]=1)}return c}getDistanceMatrix(){let t=this.vertices.length,e=this.getAdjacencyMatrix(),c=Array(t);for(var r=0;r<t;r++)c[r]=Array(t),c[r].fill(1/0);for(r=0;r<t;r++)for(var n=0;n<t;n++)1===e[r][n]&&(c[r][n]=1);for(var i=0;i<t;i++)for(r=0;r<t;r++)for(n=0;n<t;n++)c[r][n]>c[r][i]+c[i][n]&&(c[r][n]=c[r][i]+c[i][n]);return c}getSubgraphDistanceMatrix(t){let e=t.length,c=this.getSubgraphAdjacencyMatrix(t),r=Array(e);for(var n=0;n<e;n++)r[n]=Array(e),r[n].fill(1/0);for(n=0;n<e;n++)for(var i=0;i<e;i++)1===c[n][i]&&(r[n][i]=1);for(var C=0;C<e;C++)for(n=0;n<e;n++)for(i=0;i<e;i++)r[n][i]>r[n][C]+r[C][i]&&(r[n][i]=r[n][C]+r[C][i]);return r}getAdjacencyList(){let t=this.vertices.length,e=Array(t);for(var c=0;c<t;c++){e[c]=[];for(var r=0;r<t;r++)c!==r&&this.hasEdge(this.vertices[c].id,this.vertices[r].id)&&e[c].push(r)}return e}getSubgraphAdjacencyList(t){let e=t.length,c=Array(e);for(var r=0;r<e;r++){c[r]=Array();for(var n=0;n<e;n++)r!==n&&this.hasEdge(t[r],t[n])&&c[r].push(n)}return c}getBridges(){let t=this.vertices.length,e=new Array(t),c=new Array(t),r=new Array(t),n=new Array(t),i=this.getAdjacencyList(),C=Array();e.fill(!1),n.fill(null),this._time=0;for(var s=0;s<t;s++)e[s]||this._bridgeDfs(s,e,c,r,n,i,C);return C}traverseBF(t,e){let c=this.vertices.length,r=new Array(c);r.fill(!1);for(var n=[t];n.length>0;){let t=n.shift(),c=this.vertices[t];e(c);for(var i=0;i<c.neighbours.length;i++){let t=c.neighbours[i];r[t]||(r[t]=!0,n.push(t))}}}getTreeDepth(t,e){if(null===t||null===e)return 0;let c=this.vertices[t].getSpanningTreeNeighbours(e),r=0;for(var n=0;n<c.length;n++){let e=c[n],i=this.getTreeDepth(e,t);i>r&&(r=i)}return r+1}traverseTree(t,e,c,r=999999,n=!1,i=1,C=null){if(null===C&&(C=new Uint8Array(this.vertices.length)),i>r+1||1===C[t])return;C[t]=1;let s=this.vertices[t],a=s.getNeighbours(e);(!n||i>1)&&c(s);for(var o=0;o<a.length;o++)this.traverseTree(a[o],t,c,r,n,i+1,C)}kkLayout(t,e,c,r,n,i=.1,C=.1,s=2e3,a=50,o=1e9){let l=n;for(var h=t.length;h--;){var u=this.vertices[t[h]].neighbours.length}let g=this.getSubgraphDistanceMatrix(t),d=t.length,f=gt.polyCircumradius(500,d),p=gt.centralAngle(d),m=0,O=new Float32Array(d),v=new Float32Array(d),b=Array(d);for(h=d;h--;){let c=this.vertices[t[h]];c.positioned?(O[h]=c.position.x,v[h]=c.position.y):(O[h]=e.x+Math.cos(m)*f,v[h]=e.y+Math.sin(m)*f),b[h]=c.positioned,m+=p}let N=Array(d);for(h=d;h--;){N[h]=new Array(d);for(u=d;u--;)N[h][u]=n*g[h][u]}let w=Array(d);for(h=d;h--;){w[h]=Array(d);for(u=d;u--;)w[h][u]=l*Math.pow(g[h][u],-2)}let y,S,x,A,F,R,k,M=Array(d),E=new Float32Array(d),T=new Float32Array(d);for(h=d;h--;)M[h]=Array(d);for(h=d;h--;){y=O[h],S=v[h],x=0,A=0;let t=d;for(;t--;)h!==t&&(F=O[t],R=v[t],k=1/Math.sqrt((y-F)*(y-F)+(S-R)*(S-R)),M[h][t]=[w[h][t]*(y-F-N[h][t]*(y-F)*k),w[h][t]*(S-R-N[h][t]*(S-R)*k)],M[t][h]=M[h][t],x+=M[h][t][0],A+=M[h][t][1]);E[h]=x,T[h]=A}let I=function(t){return[E[t]*E[t]+T[t]*T[t],E[t],T[t]]},B=function(){let t=0,e=0,c=0,r=0;for(h=d;h--;){let[n,i,C]=I(h);n>t&&!1===b[h]&&(t=n,e=h,c=i,r=C)}return[e,t,c,r]},L=function(t,e,c){let r=0,n=0,i=0,C=O[t],s=v[t],a=N[t],o=w[t];for(h=d;h--;){if(h===t)continue;let e=O[h],c=v[h],l=a[h],u=o[h],g=(C-e)*(C-e),d=1/Math.pow(g+(s-c)*(s-c),1.5);r+=u*(1-l*(s-c)*(s-c)*d),n+=u*(1-l*g*d),i+=u*(l*(C-e)*(s-c)*d)}0===r&&(r=.1),0===n&&(n=.1),0===i&&(i=.1);let l=e/r+c/i;l/=i/r-n/i;let u=-(i*l+e)/r;O[t]+=u,v[t]+=l;let g,f,p,m,b,y=M[t];for(e=0,c=0,C=O[t],s=v[t],h=d;h--;)t!==h&&(g=O[h],f=v[h],p=y[h][0],m=y[h][1],b=1/Math.sqrt((C-g)*(C-g)+(s-f)*(s-f)),u=o[h]*(C-g-a[h]*(C-g)*b),l=o[h]*(s-f-a[h]*(s-f)*b),y[h]=[u,l],e+=u,c+=l,E[h]+=u-p,T[h]+=l-m);E[t]=e,T[t]=c},P=0,D=0,H=0,z=0,$=0,_=0;for(;o>i&&s>$;)for($++,[P,o,D,H]=B(),z=o,_=0;z>C&&a>_;)_++,L(P,D,H),[z,D,H]=I(P);for(h=d;h--;){let e=t[h],c=this.vertices[e];c.position.x=O[h],c.position.y=v[h],c.positioned=!0,c.forcePositioned=!0}}_bridgeDfs(t,e,c,r,n,i,C){e[t]=!0,c[t]=r[t]=++this._time;for(var s=0;s<i[t].length;s++){let a=i[t][s];e[a]?a!==n[t]&&(r[t]=Math.min(r[t],c[a])):(n[a]=t,this._bridgeDfs(a,e,c,r,n,i,C),r[t]=Math.min(r[t],r[a]),r[a]>c[t]&&C.push([t,a]))}}static getConnectedComponents(e){let c=e.length,r=new Array(c),n=new Array;r.fill(!1);for(var i=0;i<c;i++)if(!r[i]){let c=Array();r[i]=!0,c.push(i),t._ccGetDfs(i,r,e,c),c.length>1&&n.push(c)}return n}static getConnectedComponentCount(e){let c=e.length,r=new Array(c),n=0;r.fill(!1);for(var i=0;i<c;i++)r[i]||(r[i]=!0,n++,t._ccCountDfs(i,r,e));return n}static _ccCountDfs(e,c,r){for(var n=0;n<r[e].length;n++){r[e][n]&&!c[n]&&e!==n&&(c[n]=!0,t._ccCountDfs(n,c,r))}}static _ccGetDfs(e,c,r,n){for(var i=0;i<r[e].length;i++){r[e][i]&&!c[i]&&e!==i&&(c[i]=!0,n.push(i),t._ccGetDfs(i,c,r,n))}}};const Ot=mt;var vt=class t{static getRings(e,c=!1){let r=e.getComponentsAdjacencyMatrix();if(0===r.length)return null;let n=Ot.getConnectedComponents(r),i=Array();for(var C=0;C<n.length;C++){let r=n[C],o=e.getSubgraphAdjacencyMatrix([...r]),l=new Uint16Array(o.length),h=new Uint16Array(o.length);for(var s=0;s<o.length;s++){h[s]=0,l[s]=0;for(var a=0;a<o[s].length;a++)l[s]+=o[s][a]}let u=0;for(s=0;s<o.length;s++)for(a=s+1;a<o.length;a++)u+=o[s][a];let g=u-o.length+1,d=!0;for(s=0;s<l.length;s++)3!==l[s]&&(d=!1);if(d&&(g=2+u-o.length),1===g){i.push([...r]);continue}c&&(g=999);let{d:f,pe:p,pe_prime:m}=t.getPathIncludedDistanceMatrices(o),O=t.getRingCandidates(f,p,m),v=t.getSSSR(O,f,o,p,m,l,h,g);for(s=0;s<v.length;s++){let t=Array(v[s].size),e=0;for(let c of v[s])t[e++]=r[c];i.push(t)}}return i}static matrixToString(t){let e="";for(var c=0;c<t.length;c++){for(var r=0;r<t[c].length;r++)e+=t[c][r]+" ";e+="\n"}return e}static getPathIncludedDistanceMatrices(t){let e=t.length,c=Array(e),r=Array(e),n=Array(e);for(var i=0,C=0,s=0,a=e;a--;){c[a]=Array(e),r[a]=Array(e),n[a]=Array(e);for(var o=e;o--;)c[a][o]=a===o||1===t[a][o]?t[a][o]:Number.POSITIVE_INFINITY,1===c[a][o]?r[a][o]=[[[a,o]]]:r[a][o]=Array(),n[a][o]=Array()}for(var l=e;l--;)for(a=e;a--;)for(o=e;o--;){const t=c[a][o],e=c[a][l]+c[l][o];if(t>e){if(t===e+1)for(n[a][o]=[r[a][o].length],i=r[a][o].length;i--;)for(n[a][o][i]=[r[a][o][i].length],C=r[a][o][i].length;C--;)for(n[a][o][i][C]=[r[a][o][i][C].length],s=r[a][o][i][C].length;s--;)n[a][o][i][C][s]=[r[a][o][i][C][0],r[a][o][i][C][1]];else n[a][o]=Array();for(c[a][o]=e,r[a][o]=[[]],i=r[a][l][0].length;i--;)r[a][o][0].push(r[a][l][0][i]);for(i=r[l][o][0].length;i--;)r[a][o][0].push(r[l][o][0][i])}else if(t===e){if(r[a][l].length&&r[l][o].length)if(r[a][o].length){let t=Array();for(i=r[a][l][0].length;i--;)t.push(r[a][l][0][i]);for(i=r[l][o][0].length;i--;)t.push(r[l][o][0][i]);r[a][o].push(t)}else{let t=Array();for(i=r[a][l][0].length;i--;)t.push(r[a][l][0][i]);for(i=r[l][o][0].length;i--;)t.push(r[l][o][0][i]);r[a][o][0]=t}}else if(t===e-1){if(n[a][o].length){let t=Array();for(i=r[a][l][0].length;i--;)t.push(r[a][l][0][i]);for(i=r[l][o][0].length;i--;)t.push(r[l][o][0][i]);n[a][o].push(t)}else{let t=Array();for(i=r[a][l][0].length;i--;)t.push(r[a][l][0][i]);for(i=r[l][o][0].length;i--;)t.push(r[l][o][0][i]);n[a][o][0]=t}}}return{d:c,pe:r,pe_prime:n}}static getRingCandidates(t,e,c){let r=t.length,n=Array(),i=0;for(let C=0;C<r;C++)for(let s=0;s<r;s++)0===t[C][s]||1===e[C][s].length&&0===c[C][s]||(i=0!==c[C][s].length?2*(t[C][s]+.5):2*t[C][s],i!==1/0&&n.push([i,e[C][s],c[C][s]]));return n.sort((function(t,e){return t[0]-e[0]})),n}static getSSSR(e,c,r,n,i,C,s,a){let o=Array(),l=Array();for(let c=0;c<e.length;c++)if(e[c][0]%2!=0)for(let n=0;n<e[c][2].length;n++){let i=e[c][1][0].concat(e[c][2][n]);for(var h=0;h<i.length;h++)i[h][0].constructor===Array&&(i[h]=i[h][0]);let u=t.bondsToAtoms(i);if(t.getBondCount(u,r)!==u.size||t.pathSetsContain(o,u,i,l,C,s)||(o.push(u),l=l.concat(i)),o.length>a)return o}else for(let n=0;n<e[c][1].length-1;n++){let i=e[c][1][n].concat(e[c][1][n+1]);for(h=0;h<i.length;h++)i[h][0].constructor===Array&&(i[h]=i[h][0]);let u=t.bondsToAtoms(i);if(t.getBondCount(u,r)!==u.size||t.pathSetsContain(o,u,i,l,C,s)||(o.push(u),l=l.concat(i)),o.length>a)return o}return o}static getEdgeCount(t){let e=0,c=t.length;for(var r=c-1;r--;)for(var n=c;n--;)1===t[r][n]&&e++;return e}static getEdgeList(t){let e=t.length,c=Array();for(var r=e-1;r--;)for(var n=e;n--;)1===t[r][n]&&c.push([r,n]);return c}static bondsToAtoms(t){let e=new Set;for(var c=t.length;c--;)e.add(t[c][0]),e.add(t[c][1]);return e}static getBondCount(t,e){let c=0;for(let r of t)for(let n of t)r!==n&&(c+=e[r][n]);return c/2}static pathSetsContain(e,c,r,n,i,C){for(var s=e.length;s--;){if(t.isSupersetOf(c,e[s]))return!0;if(e[s].size===c.size&&t.areSetsEqual(e[s],c))return!0}let a=0,o=!1;for(s=r.length;s--;)for(var l=n.length;l--;)(r[s][0]===n[l][0]&&r[s][1]===n[l][1]||r[s][1]===n[l][0]&&r[s][0]===n[l][1])&&a++,a===r.length&&(o=!0);let h=!1;if(o)for(let t of c)if(C[t]<i[t]){h=!0;break}if(o&&!h)return!0;for(let t of c)C[t]++;return!1}static areSetsEqual(t,e){if(t.size!==e.size)return!1;for(let c of t)if(!e.has(c))return!1;return!0}static isSupersetOf(t,e){for(var c of e)if(!t.has(c))return!1;return!0}};var bt=class{constructor(t,e){this.colors=t,this.theme=this.colors[e]}getColor(t){return t&&(t=t.toUpperCase())in this.theme?this.theme[t]:this.theme.C}setTheme(t){this.colors.hasOwnProperty(t)&&(this.theme=this.colors[t])}};var Nt=class{static extend(){let t=this,e={},c=!1,r=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(c=arguments[0],r++);let i=function(r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(c&&"[object Object]"===Object.prototype.toString.call(r[n])?e[n]=t.extend(!0,e[n],r[n]):e[n]=r[n])};for(;r<n;r++){i(arguments[r])}return e}};const wt=U,yt=X,St=tt,xt=Ct;et();const At=st,Ft=nt(),Rt=rt(),kt=ct(),Mt=ut,Et=mt,Tt=vt,It=bt,Bt=Nt;var Lt=class{constructor(t){this.graph=null,this.doubleBondConfigCount=0,this.doubleBondConfig=null,this.ringIdCounter=0,this.ringConnectionIdCounter=0,this.canvasWrapper=null,this.totalOverlapScore=0,this.defaultOptions={width:500,height:500,scale:0,bondThickness:1,bondLength:30,shortBondLength:.8,bondSpacing:.17*30,atomVisualization:"default",isomeric:!0,debug:!1,terminalCarbons:!1,explicitHydrogens:!0,overlapSensitivity:.42,overlapResolutionIterations:1,compactDrawing:!0,fontFamily:"Arial, Helvetica, sans-serif",fontSizeLarge:11,fontSizeSmall:3,padding:10,experimentalSSSR:!1,kkThreshold:.1,kkInnerThreshold:.1,kkMaxIteration:2e4,kkMaxInnerIteration:50,kkMaxEnergy:1e9,weights:{colormap:null,additionalPadding:20,sigma:10,interval:0,opacity:1},themes:{dark:{C:"#fff",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#aaa",BACKGROUND:"#141414"},light:{C:"#222",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#666",BACKGROUND:"#fff"},oldschool:{C:"#000",O:"#000",N:"#000",F:"#000",CL:"#000",BR:"#000",I:"#000",P:"#000",S:"#000",B:"#000",SI:"#000",H:"#000",BACKGROUND:"#fff"},solarized:{C:"#586e75",O:"#dc322f",N:"#268bd2",F:"#859900",CL:"#16a085",BR:"#cb4b16",I:"#6c71c4",P:"#d33682",S:"#b58900",B:"#2aa198",SI:"#2aa198",H:"#657b83",BACKGROUND:"#fff"},"solarized-dark":{C:"#93a1a1",O:"#dc322f",N:"#268bd2",F:"#859900",CL:"#16a085",BR:"#cb4b16",I:"#6c71c4",P:"#d33682",S:"#b58900",B:"#2aa198",SI:"#2aa198",H:"#839496",BACKGROUND:"#fff"},matrix:{C:"#678c61",O:"#2fc079",N:"#4f7e7e",F:"#90d762",CL:"#82d967",BR:"#23755a",I:"#409931",P:"#c1ff8a",S:"#faff00",B:"#50b45a",SI:"#409931",H:"#426644",BACKGROUND:"#fff"},github:{C:"#24292f",O:"#cf222e",N:"#0969da",F:"#2da44e",CL:"#6fdd8b",BR:"#bc4c00",I:"#8250df",P:"#bf3989",S:"#d4a72c",B:"#fb8f44",SI:"#bc4c00",H:"#57606a",BACKGROUND:"#fff"},carbon:{C:"#161616",O:"#da1e28",N:"#0f62fe",F:"#198038",CL:"#007d79",BR:"#fa4d56",I:"#8a3ffc",P:"#ff832b",S:"#f1c21b",B:"#8a3800",SI:"#e67e22",H:"#525252",BACKGROUND:"#fff"},cyberpunk:{C:"#ea00d9",O:"#ff3131",N:"#0abdc6",F:"#00ff9f",CL:"#00fe00",BR:"#fe9f20",I:"#ff00ff",P:"#fe7f00",S:"#fcee0c",B:"#ff00ff",SI:"#ffffff",H:"#913cb1",BACKGROUND:"#fff"},gruvbox:{C:"#665c54",O:"#cc241d",N:"#458588",F:"#98971a",CL:"#79740e",BR:"#d65d0e",I:"#b16286",P:"#af3a03",S:"#d79921",B:"#689d6a",SI:"#427b58",H:"#7c6f64",BACKGROUND:"#fbf1c7"},"gruvbox-dark":{C:"#ebdbb2",O:"#cc241d",N:"#458588",F:"#98971a",CL:"#b8bb26",BR:"#d65d0e",I:"#b16286",P:"#fe8019",S:"#d79921",B:"#8ec07c",SI:"#83a598",H:"#bdae93",BACKGROUND:"#282828"},custom:{C:"#222",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#666",BACKGROUND:"#fff"}}},this.opts=Bt.extend(!0,this.defaultOptions,t),this.opts.halfBondSpacing=this.opts.bondSpacing/2,this.opts.bondLengthSq=this.opts.bondLength*this.opts.bondLength,this.opts.halfFontSizeLarge=this.opts.fontSizeLarge/2,this.opts.quarterFontSizeLarge=this.opts.fontSizeLarge/4,this.opts.fifthFontSizeSmall=this.opts.fontSizeSmall/5,this.theme=this.opts.themes.dark}draw(t,e,c="light",r=!1){this.initDraw(t,c,r),this.infoOnly||(this.themeManager=new It(this.opts.themes,c),this.canvasWrapper=new Mt(e,this.themeManager,this.opts)),r||(this.processGraph(),this.canvasWrapper.scale(this.graph.vertices),this.drawEdges(this.opts.debug),this.drawVertices(this.opts.debug),this.canvasWrapper.reset(),this.opts.debug&&(console.log(this.graph),console.log(this.rings),console.log(this.ringConnections)))}edgeRingCount(t){let e=this.graph.edges[t],c=this.graph.vertices[e.sourceId],r=this.graph.vertices[e.targetId];return Math.min(c.value.rings.length,r.value.rings.length)}getBridgedRings(){let t=Array();for(var e=0;e<this.rings.length;e++)this.rings[e].isBridged&&t.push(this.rings[e]);return t}getFusedRings(){let t=Array();for(var e=0;e<this.rings.length;e++)this.rings[e].isFused&&t.push(this.rings[e]);return t}getSpiros(){let t=Array();for(var e=0;e<this.rings.length;e++)this.rings[e].isSpiro&&t.push(this.rings[e]);return t}printRingInfo(){let t="";for(var e=0;e<this.rings.length;e++){const c=this.rings[e];t+=c.id+";",t+=c.members.length+";",t+=c.neighbours.length+";",t+=c.isSpiro?"true;":"false;",t+=c.isFused?"true;":"false;",t+=c.isBridged?"true;":"false;",t+=c.rings.length+";",t+="\n"}return t}rotateDrawing(){let t=0,e=0,c=0;for(var r=0;r<this.graph.vertices.length;r++){let i=this.graph.vertices[r];if(i.value.isDrawn)for(var n=r+1;n<this.graph.vertices.length;n++){let C=this.graph.vertices[n];if(!C.value.isDrawn)continue;let s=i.position.distanceSq(C.position);s>c&&(c=s,t=r,e=n)}}let i=-St.subtract(this.graph.vertices[t].position,this.graph.vertices[e].position).angle();if(!isNaN(i)){let t=i%.523599;t<.2617995?i-=t:i+=.523599-t;for(r=0;r<this.graph.vertices.length;r++)r!==e&&this.graph.vertices[r].position.rotateAround(i,this.graph.vertices[e].position);for(r=0;r<this.rings.length;r++)this.rings[r].center.rotateAround(i,this.graph.vertices[e].position)}}getTotalOverlapScore(){return this.totalOverlapScore}getRingCount(){return this.rings.length}hasBridgedRing(){return this.bridgedRing}getHeavyAtomCount(){let t=0;for(var e=0;e<this.graph.vertices.length;e++)"H"!==this.graph.vertices[e].value.element&&t++;return t}getMolecularFormula(t=null){let e="",c=new Map,r=null===t?this.graph:new Et(t,this.opts.isomeric);for(var n=0;n<r.vertices.length;n++){let t=r.vertices[n].value;if(c.has(t.element)?c.set(t.element,c.get(t.element)+1):c.set(t.element,1),t.bracket&&!t.bracket.chirality&&(c.has("H")?c.set("H",c.get("H")+t.bracket.hcount):c.set("H",t.bracket.hcount)),!t.bracket){let e=Ft.maxBonds[t.element]-t.bondCount;t.isPartOfAromaticRing&&e--,c.has("H")?c.set("H",c.get("H")+e):c.set("H",e)}}if(c.has("C")){let t=c.get("C");e+="C"+(t>1?t:""),c.delete("C")}if(c.has("H")){let t=c.get("H");e+="H"+(t>1?t:""),c.delete("H")}return Object.keys(Ft.atomicNumbers).sort().map((t=>{if(c.has(t)){let r=c.get(t);e+=t+(r>1?r:"")}})),e}getRingbondType(t,e){if(t.value.getRingbondCount()<1||e.value.getRingbondCount()<1)return null;for(var c=0;c<t.value.ringbonds.length;c++)for(var r=0;r<e.value.ringbonds.length;r++)if(t.value.ringbonds[c].id===e.value.ringbonds[r].id)return"-"===t.value.ringbonds[c].bondType?e.value.ringbonds[r].bond:t.value.ringbonds[c].bond;return null}initDraw(t,e,c,r){this.data=t,this.infoOnly=c,this.ringIdCounter=0,this.ringConnectionIdCounter=0,this.graph=new Et(t,this.opts.isomeric),this.rings=Array(),this.ringConnections=Array(),this.originalRings=Array(),this.originalRingConnections=Array(),this.bridgedRing=!1,this.doubleBondConfigCount=null,this.doubleBondConfig=null,this.highlight_atoms=r,this.initRings(),this.initHydrogens()}processGraph(){this.position(),this.restoreRingInformation(),this.resolvePrimaryOverlaps();let t=this.getOverlapScore();this.totalOverlapScore=this.getOverlapScore().total;for(var e=0;e<this.opts.overlapResolutionIterations;e++)for(var c=0;c<this.graph.edges.length;c++){let e=this.graph.edges[c];if(this.isEdgeRotatable(e)){let c=this.graph.getTreeDepth(e.sourceId,e.targetId),r=this.graph.getTreeDepth(e.targetId,e.sourceId),n=e.targetId,i=e.sourceId;if(c>r&&(n=e.sourceId,i=e.targetId),this.getSubtreeOverlapScore(i,n,t.vertexScores).value>this.opts.overlapSensitivity){let e=this.graph.vertices[n],c=this.graph.vertices[i],r=c.getNeighbours(n);if(1===r.length){let t=this.graph.vertices[r[0]],n=t.position.getRotateAwayFromAngle(e.position,c.position,wt.toRad(120));this.rotateSubtree(t.id,c.id,n,c.position);let i=this.getOverlapScore().total;i>this.totalOverlapScore?this.rotateSubtree(t.id,c.id,-n,c.position):this.totalOverlapScore=i}else if(2===r.length){if(0!==c.value.rings.length&&0!==e.value.rings.length)continue;let t=this.graph.vertices[r[0]],n=this.graph.vertices[r[1]];if(1===t.value.rings.length&&1===n.value.rings.length){if(t.value.rings[0]!==n.value.rings[0])continue}else{if(0!==t.value.rings.length||0!==n.value.rings.length)continue;{let r=t.position.getRotateAwayFromAngle(e.position,c.position,wt.toRad(120)),i=n.position.getRotateAwayFromAngle(e.position,c.position,wt.toRad(120));this.rotateSubtree(t.id,c.id,r,c.position),this.rotateSubtree(n.id,c.id,i,c.position);let C=this.getOverlapScore().total;C>this.totalOverlapScore?(this.rotateSubtree(t.id,c.id,-r,c.position),this.rotateSubtree(n.id,c.id,-i,c.position)):this.totalOverlapScore=C}}}t=this.getOverlapScore()}}}this.resolveSecondaryOverlaps(t.scores),this.opts.isomeric&&this.annotateStereochemistry(),this.opts.compactDrawing&&"default"===this.opts.atomVisualization&&this.initPseudoElements(),this.rotateDrawing()}initRings(){let t=new Map;for(var e=this.graph.vertices.length-1;e>=0;e--){let r=this.graph.vertices[e];if(0!==r.value.ringbonds.length)for(var c=0;c<r.value.ringbonds.length;c++){let e=r.value.ringbonds[c].id,n=r.value.ringbonds[c].bond;if(t.has(e)){let i=r.id,C=t.get(e)[0],s=t.get(e)[1],a=new At(i,C,1);a.setBondType(s||n||"-");let o=this.graph.addEdge(a),l=this.graph.vertices[C];r.addRingbondChild(C,c),r.value.addNeighbouringElement(l.value.element),l.addRingbondChild(i,c),l.value.addNeighbouringElement(r.value.element),r.edges.push(o),l.edges.push(o),t.delete(e)}else t.set(e,[r.id,n])}}let r=Tt.getRings(this.graph,this.opts.experimentalSSSR);if(null!==r){for(e=0;e<r.length;e++){let t=[...r[e]],n=this.addRing(new Rt(t));for(c=0;c<t.length;c++)this.graph.vertices[t[c]].value.rings.push(n)}for(e=0;e<this.rings.length-1;e++)for(c=e+1;c<this.rings.length;c++){let t=this.rings[e],r=this.rings[c],n=new kt(t,r);n.vertices.size>0&&this.addRingConnection(n)}for(e=0;e<this.rings.length;e++){let t=this.rings[e];t.neighbours=kt.getNeighbours(this.ringConnections,t.id)}for(e=0;e<this.rings.length;e++){let t=this.rings[e];this.graph.vertices[t.members[0]].value.addAnchoredRing(t.id)}for(this.backupRingInformation();this.rings.length>0;){let t=-1;for(e=0;e<this.rings.length;e++){let c=this.rings[e];this.isPartOfBridgedRing(c.id)&&!c.isBridged&&(t=c.id)}if(-1===t)break;let c=this.getRing(t),r=this.getBridgedRingRings(c.id);this.bridgedRing=!0,this.createBridgedRing(r,c.members[0]);for(e=0;e<r.length;e++)this.removeRing(r[e])}}}initHydrogens(){if(!this.opts.explicitHydrogens)for(var t=0;t<this.graph.vertices.length;t++){let e=this.graph.vertices[t];if("H"!==e.value.element)continue;let c=this.graph.vertices[e.neighbours[0]];c.value.hasHydrogen=!0,(!c.value.isStereoCenter||c.value.rings.length<2&&!c.value.bridgedRing||c.value.bridgedRing&&c.value.originalRings.length<2)&&(e.value.isDrawn=!1)}}getBridgedRingRings(t){let e=Array(),c=this,r=function(t){let n=c.getRing(t);e.push(t);for(var i=0;i<n.neighbours.length;i++){let C=n.neighbours[i];-1===e.indexOf(C)&&C!==t&&kt.isBridge(c.ringConnections,c.graph.vertices,t,C)&&r(C)}};return r(t),yt.unique(e)}isPartOfBridgedRing(t){for(var e=0;e<this.ringConnections.length;e++)if(this.ringConnections[e].containsRing(t)&&this.ringConnections[e].isBridge(this.graph.vertices))return!0;return!1}createBridgedRing(t,e){let c=new Set,r=new Set,n=new Set;for(var i=0;i<t.length;i++){let e=this.getRing(t[i]);e.isPartOfBridged=!0;for(var C=0;C<e.members.length;C++)r.add(e.members[C]);for(C=0;C<e.neighbours.length;C++){let c=e.neighbours[C];-1===t.indexOf(c)&&n.add(e.neighbours[C])}}let s=new Set;for(let e of r){let r=this.graph.vertices[e],n=yt.intersection(t,r.value.rings);1===r.value.rings.length||1===n.length?c.add(r.id):s.add(r.id)}Array();let a=Array();for(let t of s){let e=this.graph.vertices[t],r=!1;for(let t=0;t<e.edges.length;t++)1===this.edgeRingCount(e.edges[t])&&(r=!0);r?(e.value.isBridgeNode=!0,c.add(e.id)):(e.value.isBridge=!0,c.add(e.id))}let o=new Rt([...c]);this.addRing(o),o.isBridged=!0,o.neighbours=[...n];for(i=0;i<t.length;i++)o.rings.push(this.getRing(t[i]).clone());for(i=0;i<o.members.length;i++)this.graph.vertices[o.members[i]].value.bridgedRing=o.id;for(i=0;i<a.length;i++){this.graph.vertices[a[i]].value.rings=Array()}for(let e of c){let c=this.graph.vertices[e];c.value.rings=yt.removeAll(c.value.rings,t),c.value.rings.push(o.id)}for(i=0;i<t.length;i++)for(C=i+1;C<t.length;C++)this.removeRingConnectionsBetween(t[i],t[C]);for(let e of n){let c=this.getRingConnections(e,t);for(C=0;C<c.length;C++)this.getRingConnection(c[C]).updateOther(o.id,e);this.getRing(e).neighbours.push(o.id)}return o}areVerticesInSameRing(t,e){for(var c=0;c<t.value.rings.length;c++)for(var r=0;r<e.value.rings.length;r++)if(t.value.rings[c]===e.value.rings[r])return!0;return!1}getCommonRings(t,e){let c=Array();for(var r=0;r<t.value.rings.length;r++)for(var n=0;n<e.value.rings.length;n++)t.value.rings[r]==e.value.rings[n]&&c.push(t.value.rings[r]);return c}getLargestOrAromaticCommonRing(t,e){let c=this.getCommonRings(t,e),r=0,n=null;for(var i=0;i<c.length;i++){let t=this.getRing(c[i]),e=t.getSize();if(t.isBenzeneLike(this.graph.vertices))return t;e>r&&(r=e,n=t)}return n}getVerticesAt(t,e,c){let r=Array();for(var n=0;n<this.graph.vertices.length;n++){let i=this.graph.vertices[n];i.id!==c&&i.positioned&&(t.distanceSq(i.position)<=e*e&&r.push(i.id))}return r}getClosestVertex(t){let e=99999,c=null;for(var r=0;r<this.graph.vertices.length;r++){let n=this.graph.vertices[r];if(n.id===t.id)continue;let i=t.position.distanceSq(n.position);i<e&&(e=i,c=n)}return c}addRing(t){return t.id=this.ringIdCounter++,this.rings.push(t),t.id}removeRing(t){this.rings=this.rings.filter((function(e){return e.id!==t})),this.ringConnections=this.ringConnections.filter((function(e){return e.firstRingId!==t&&e.secondRingId!==t}));for(var e=0;e<this.rings.length;e++){let c=this.rings[e];c.neighbours=c.neighbours.filter((function(e){return e!==t}))}}getRing(t){for(var e=0;e<this.rings.length;e++)if(this.rings[e].id==t)return this.rings[e]}addRingConnection(t){return t.id=this.ringConnectionIdCounter++,this.ringConnections.push(t),t.id}removeRingConnection(t){this.ringConnections=this.ringConnections.filter((function(e){return e.id!==t}))}removeRingConnectionsBetween(t,e){let c=Array();for(var r=0;r<this.ringConnections.length;r++){let n=this.ringConnections[r];(n.firstRingId===t&&n.secondRingId===e||n.firstRingId===e&&n.secondRingId===t)&&c.push(n.id)}for(r=0;r<c.length;r++)this.removeRingConnection(c[r])}getRingConnection(t){for(var e=0;e<this.ringConnections.length;e++)if(this.ringConnections[e].id==t)return this.ringConnections[e]}getRingConnections(t,e){let c=Array();for(var r=0;r<this.ringConnections.length;r++){let i=this.ringConnections[r];for(var n=0;n<e.length;n++){let r=e[n];(i.firstRingId===t&&i.secondRingId===r||i.firstRingId===r&&i.secondRingId===t)&&c.push(i.id)}}return c}getOverlapScore(){let t=0,e=new Float32Array(this.graph.vertices.length);for(var c=0;c<this.graph.vertices.length;c++)e[c]=0;for(c=0;c<this.graph.vertices.length;c++)for(var r=this.graph.vertices.length;--r>c;){let n=this.graph.vertices[c],i=this.graph.vertices[r];if(!n.value.isDrawn||!i.value.isDrawn)continue;let C=St.subtract(n.position,i.position).lengthSq();if(C<this.opts.bondLengthSq){let n=(this.opts.bondLength-Math.sqrt(C))/this.opts.bondLength;t+=n,e[c]+=n,e[r]+=n}}let n=Array();for(c=0;c<this.graph.vertices.length;c++)n.push({id:c,score:e[c]});return n.sort((function(t,e){return e.score-t.score})),{total:t,scores:n,vertexScores:e}}chooseSide(t,e,c){let r=t.getNeighbours(e.id),n=e.getNeighbours(t.id),i=r.length,C=n.length,s=yt.merge(r,n),a=[0,0];for(var o=0;o<s.length;o++){this.graph.vertices[s[o]].position.sameSideAs(t.position,e.position,c[0])?a[0]++:a[1]++}let l=[0,0];for(o=0;o<this.graph.vertices.length;o++){this.graph.vertices[o].position.sameSideAs(t.position,e.position,c[0])?l[0]++:l[1]++}return{totalSideCount:l,totalPosition:l[0]>l[1]?0:1,sideCount:a,position:a[0]>a[1]?0:1,anCount:i,bnCount:C}}setRingCenter(t){let e=t.getSize(),c=new St(0,0);for(var r=0;r<e;r++)c.add(this.graph.vertices[t.members[r]].position);t.center=c.divide(e)}getSubringCenter(t,e){let c=e.value.originalRings,r=t.center,n=Number.MAX_VALUE;for(var i=0;i<c.length;i++)for(var C=0;C<t.rings.length;C++)c[i]===t.rings[C].id&&t.rings[C].getSize()<n&&(r=t.rings[C].center,n=t.rings[C].getSize());return r}drawEdges(t){let e=this,c=Array(this.graph.edges.length);if(c.fill(!1),this.graph.traverseBF(0,(function(r){let n=e.graph.getEdges(r.id);for(var i=0;i<n.length;i++){let r=n[i];c[r]||(c[r]=!0,e.drawEdge(r,t))}})),!this.bridgedRing)for(var r=0;r<this.rings.length;r++){let t=this.rings[r];this.isRingAromatic(t)&&this.canvasWrapper.drawAromaticityRing(t)}}drawEdge(t,e){let c=this,r=this.graph.edges[t],n=this.graph.vertices[r.sourceId],i=this.graph.vertices[r.targetId],C=n.value.element,s=i.value.element;if(!(n.value.isDrawn&&i.value.isDrawn||"default"!==this.opts.atomVisualization))return;let a=n.position,o=i.position,l=this.getEdgeNormals(r),h=yt.clone(l);if(h[0].multiplyScalar(10).add(a),h[1].multiplyScalar(10).add(a),"="===r.bondType||"="===this.getRingbondType(n,i)||r.isPartOfAromaticRing&&this.bridgedRing){let t=this.areVerticesInSameRing(n,i),e=this.chooseSide(n,i,h);if(t){let t=this.getLargestOrAromaticCommonRing(n,i).center;l[0].multiplyScalar(c.opts.bondSpacing),l[1].multiplyScalar(c.opts.bondSpacing);let e=null;e=t.sameSideAs(n.position,i.position,St.add(a,l[0]))?new xt(St.add(a,l[0]),St.add(o,l[0]),C,s):new xt(St.add(a,l[1]),St.add(o,l[1]),C,s),e.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),r.isPartOfAromaticRing?this.canvasWrapper.drawLine(e,!0):this.canvasWrapper.drawLine(e),this.canvasWrapper.drawLine(new xt(a,o,C,s))}else if(r.center||n.isTerminal()&&i.isTerminal()){l[0].multiplyScalar(c.opts.halfBondSpacing),l[1].multiplyScalar(c.opts.halfBondSpacing);let t=new xt(St.add(a,l[0]),St.add(o,l[0]),C,s),e=new xt(St.add(a,l[1]),St.add(o,l[1]),C,s);this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(e)}else if(0==e.anCount&&e.bnCount>1||0==e.bnCount&&e.anCount>1){l[0].multiplyScalar(c.opts.halfBondSpacing),l[1].multiplyScalar(c.opts.halfBondSpacing);let t=new xt(St.add(a,l[0]),St.add(o,l[0]),C,s),e=new xt(St.add(a,l[1]),St.add(o,l[1]),C,s);this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(e)}else if(e.sideCount[0]>e.sideCount[1]){l[0].multiplyScalar(c.opts.bondSpacing),l[1].multiplyScalar(c.opts.bondSpacing);let t=new xt(St.add(a,l[0]),St.add(o,l[0]),C,s);t.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(new xt(a,o,C,s))}else if(e.sideCount[0]<e.sideCount[1]){l[0].multiplyScalar(c.opts.bondSpacing),l[1].multiplyScalar(c.opts.bondSpacing);let t=new xt(St.add(a,l[1]),St.add(o,l[1]),C,s);t.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(new xt(a,o,C,s))}else if(e.totalSideCount[0]>e.totalSideCount[1]){l[0].multiplyScalar(c.opts.bondSpacing),l[1].multiplyScalar(c.opts.bondSpacing);let t=new xt(St.add(a,l[0]),St.add(o,l[0]),C,s);t.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(new xt(a,o,C,s))}else if(e.totalSideCount[0]<=e.totalSideCount[1]){l[0].multiplyScalar(c.opts.bondSpacing),l[1].multiplyScalar(c.opts.bondSpacing);let t=new xt(St.add(a,l[1]),St.add(o,l[1]),C,s);t.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(new xt(a,o,C,s))}}else if("#"===r.bondType){l[0].multiplyScalar(c.opts.bondSpacing/1.5),l[1].multiplyScalar(c.opts.bondSpacing/1.5);let t=new xt(St.add(a,l[0]),St.add(o,l[0]),C,s),e=new xt(St.add(a,l[1]),St.add(o,l[1]),C,s);this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(e),this.canvasWrapper.drawLine(new xt(a,o,C,s))}else if("."===r.bondType);else{let t=n.value.isStereoCenter,e=i.value.isStereoCenter;"up"===r.wedge?this.canvasWrapper.drawWedge(new xt(a,o,C,s,t,e)):"down"===r.wedge?this.canvasWrapper.drawDashedWedge(new xt(a,o,C,s,t,e)):this.canvasWrapper.drawLine(new xt(a,o,C,s,t,e))}if(e){let e=St.midpoint(a,o);this.canvasWrapper.drawDebugText(e.x,e.y,"e: "+t)}}drawVertices(t){var e=this.graph.vertices.length;for(e=0;e<this.graph.vertices.length;e++){let c=this.graph.vertices[e],r=c.value,n=0,i=0,C=c.value.bondCount,s=r.element,a=Ft.maxBonds[s]-C,o=c.getTextDirection(this.graph.vertices),l=!(!this.opts.terminalCarbons&&"C"===s&&!r.hasAttachedPseudoElements)&&c.isTerminal(),h="C"===r.element;if("N"===r.element&&r.isPartOfAromaticRing&&(a=0),r.bracket&&(a=r.bracket.hcount,n=r.bracket.charge,i=r.bracket.isotope),"allballs"===this.opts.atomVisualization)this.canvasWrapper.drawBall(c.position.x,c.position.y,s);else if(r.isDrawn&&(!h||r.drawExplicit||l||r.hasAttachedPseudoElements)||1===this.graph.vertices.length)"default"===this.opts.atomVisualization?this.canvasWrapper.drawText(c.position.x,c.position.y,s,a,o,l,n,i,this.graph.vertices.length,r.getAttachedPseudoElements()):"balls"===this.opts.atomVisualization&&this.canvasWrapper.drawBall(c.position.x,c.position.y,s);else if(2===c.getNeighbourCount()&&1==c.forcePositioned){let t=this.graph.vertices[c.neighbours[0]].position,e=this.graph.vertices[c.neighbours[1]].position,r=St.threePointangle(c.position,t,e);Math.abs(Math.PI-r)<.1&&this.canvasWrapper.drawPoint(c.position.x,c.position.y,s)}if(t){let t="v: "+c.id+" "+yt.print(r.ringbonds);this.canvasWrapper.drawDebugText(c.position.x,c.position.y,t)}}if(this.opts.debug)for(e=0;e<this.rings.length;e++){let t=this.rings[e].center;this.canvasWrapper.drawDebugPoint(t.x,t.y,"r: "+this.rings[e].id)}}position(){let t=null;for(var e=0;e<this.graph.vertices.length;e++)if(null!==this.graph.vertices[e].value.bridgedRing){t=this.graph.vertices[e];break}for(e=0;e<this.rings.length;e++)this.rings[e].isBridged&&(t=this.graph.vertices[this.rings[e].members[0]]);this.rings.length>0&&null===t&&(t=this.graph.vertices[this.rings[0].members[0]]),null===t&&(t=this.graph.vertices[0]),this.createNextBond(t,null,0)}backupRingInformation(){this.originalRings=Array(),this.originalRingConnections=Array();for(var t=0;t<this.rings.length;t++)this.originalRings.push(this.rings[t]);for(t=0;t<this.ringConnections.length;t++)this.originalRingConnections.push(this.ringConnections[t]);for(t=0;t<this.graph.vertices.length;t++)this.graph.vertices[t].value.backupRings()}restoreRingInformation(){let t=this.getBridgedRings();this.rings=Array(),this.ringConnections=Array();for(var e=0;e<t.length;e++){let r=t[e];for(var c=0;c<r.rings.length;c++){let t=r.rings[c];this.originalRings[t.id].center=t.center}}for(e=0;e<this.originalRings.length;e++)this.rings.push(this.originalRings[e]);for(e=0;e<this.originalRingConnections.length;e++)this.ringConnections.push(this.originalRingConnections[e]);for(e=0;e<this.graph.vertices.length;e++)this.graph.vertices[e].value.restoreRings()}createRing(t,e=null,c=null,r=null){if(t.positioned)return;e=e||new St(0,0);let n=t.getOrderedNeighbours(this.ringConnections),i=c?St.subtract(c.position,e).angle():0,C=wt.polyCircumradius(this.opts.bondLength,t.getSize()),s=wt.centralAngle(t.getSize());t.centralAngle=s;let a=i,o=this,l=c?c.id:null;if(-1===t.members.indexOf(l)&&(c&&(c.positioned=!1),l=t.members[0]),t.isBridged){this.graph.kkLayout(t.members.slice(),e,c.id,t,this.opts.bondLength,this.opts.kkThreshold,this.opts.kkInnerThreshold,this.opts.kkMaxIteration,this.opts.kkMaxInnerIteration,this.opts.kkMaxEnergy),t.positioned=!0,this.setRingCenter(t),e=t.center;for(var h=0;h<t.rings.length;h++)this.setRingCenter(t.rings[h])}else t.eachMember(this.graph.vertices,(function(c){let r=o.graph.vertices[c];r.positioned||r.setPosition(e.x+Math.cos(a)*C,e.y+Math.sin(a)*C),a+=s,(!t.isBridged||t.rings.length<3)&&(r.angle=a,r.positioned=!0)}),l,r?r.id:null);t.positioned=!0,t.center=e;for(h=0;h<n.length;h++){let c=this.getRing(n[h].neighbour);if(c.positioned)continue;let r=kt.getVertices(this.ringConnections,t.id,c.id);if(2===r.length){t.isFused=!0,c.isFused=!0;let n=this.graph.vertices[r[0]],i=this.graph.vertices[r[1]],C=St.midpoint(n.position,i.position),s=St.normals(n.position,i.position);s[0].normalize(),s[1].normalize();let a=wt.polyCircumradius(this.opts.bondLength,c.getSize()),o=wt.apothem(a,c.getSize());s[0].multiplyScalar(o).add(C),s[1].multiplyScalar(o).add(C);let l=s[0];St.subtract(e,s[1]).lengthSq()>St.subtract(e,s[0]).lengthSq()&&(l=s[1]);let h=St.subtract(n.position,l),u=St.subtract(i.position,l);-1===h.clockwise(u)?c.positioned||this.createRing(c,l,n,i):c.positioned||this.createRing(c,l,i,n)}else if(1===r.length){t.isSpiro=!0,c.isSpiro=!0;let n=this.graph.vertices[r[0]],i=St.subtract(e,n.position);i.invert(),i.normalize();let C=wt.polyCircumradius(this.opts.bondLength,c.getSize());i.multiplyScalar(C),i.add(n.position),c.positioned||this.createRing(c,i,n)}}for(h=0;h<t.members.length;h++){let e=this.graph.vertices[t.members[h]],c=e.neighbours;for(var u=0;u<c.length;u++){let t=this.graph.vertices[c[u]];t.positioned||(t.value.isConnectedToRing=!0,this.createNextBond(t,e,0))}}}rotateSubtree(t,e,c,r){let n=this;this.graph.traverseTree(t,e,(function(t){t.position.rotateAround(c,r);for(var e=0;e<t.value.anchoredRings.length;e++){let i=n.rings[t.value.anchoredRings[e]];i&&i.center.rotateAround(c,r)}}))}getSubtreeOverlapScore(t,e,c){let r=this,n=0,i=new St(0,0),C=0;return this.graph.traverseTree(t,e,(function(t){if(!t.value.isDrawn)return;let e=c[t.id];e>r.opts.overlapSensitivity&&(n+=e,C++);let s=r.graph.vertices[t.id].position.clone();s.multiplyScalar(e),i.add(s)})),i.divide(n),{value:n/C,center:i}}getCurrentCenterOfMass(){let t=new St(0,0),e=0;for(var c=0;c<this.graph.vertices.length;c++){let r=this.graph.vertices[c];r.positioned&&(t.add(r.position),e++)}return t.divide(e)}getCurrentCenterOfMassInNeigbourhood(t,e=2*this.opts.bondLength){let c=new St(0,0),r=0,n=e*e;for(var i=0;i<this.graph.vertices.length;i++){let e=this.graph.vertices[i];e.positioned&&t.distanceSq(e.position)<n&&(c.add(e.position),r++)}return c.divide(r)}resolvePrimaryOverlaps(){let t=Array(),e=Array(this.graph.vertices.length);for(var c=0;c<this.rings.length;c++){let i=this.rings[c];for(var r=0;r<i.members.length;r++){let c=this.graph.vertices[i.members[r]];if(e[c.id])continue;e[c.id]=!0;let C=this.getNonRingNeighbours(c.id);if(C.length>1){let e=Array();for(var n=0;n<c.value.rings.length;n++)e.push(c.value.rings[n]);t.push({common:c,rings:e,vertices:C})}else if(1===C.length&&2===c.value.rings.length){let e=Array();for(n=0;n<c.value.rings.length;n++)e.push(c.value.rings[n]);t.push({common:c,rings:e,vertices:C})}}}for(c=0;c<t.length;c++){let e=t[c];if(2===e.vertices.length){let t=e.vertices[0],c=e.vertices[1];if(!t.value.isDrawn||!c.value.isDrawn)continue;let r=(2*Math.PI-this.getRing(e.rings[0]).getAngle())/6;this.rotateSubtree(t.id,e.common.id,r,e.common.position),this.rotateSubtree(c.id,e.common.id,-r,e.common.position);let n=this.getOverlapScore(),i=this.getSubtreeOverlapScore(t.id,e.common.id,n.vertexScores),C=this.getSubtreeOverlapScore(c.id,e.common.id,n.vertexScores),s=i.value+C.value;this.rotateSubtree(t.id,e.common.id,-2*r,e.common.position),this.rotateSubtree(c.id,e.common.id,2*r,e.common.position),n=this.getOverlapScore(),i=this.getSubtreeOverlapScore(t.id,e.common.id,n.vertexScores),C=this.getSubtreeOverlapScore(c.id,e.common.id,n.vertexScores),i.value+C.value>s&&(this.rotateSubtree(t.id,e.common.id,2*r,e.common.position),this.rotateSubtree(c.id,e.common.id,-2*r,e.common.position))}else 1===e.vertices.length&&e.rings.length}}resolveSecondaryOverlaps(t){for(var e=0;e<t.length;e++)if(t[e].score>this.opts.overlapSensitivity){let c=this.graph.vertices[t[e].id];if(c.isTerminal()){let t=this.getClosestVertex(c);if(t){let e=null;e=t.isTerminal()?0===t.id?this.graph.vertices[1].position:t.previousPosition:0===t.id?this.graph.vertices[1].position:t.position;let r=0===c.id?this.graph.vertices[1].position:c.previousPosition;c.position.rotateAwayFrom(e,r,wt.toRad(20))}}}}getLastVertexWithAngle(t){let e=0,c=null;for(;!e&&t;)c=this.graph.vertices[t],e=c.angle,t=c.parentVertexId;return c}createNextBond(t,e=null,c=0,r=!1,n=!1){if(t.positioned&&!n)return;let i=!1;if(e){let c=this.graph.getEdge(t.id,e.id);"/"!==c.bondType&&"\\"!==c.bondType||++this.doubleBondConfigCount%2!=1||null===this.doubleBondConfig&&(this.doubleBondConfig=c.bondType,i=!0,null===e.parentVertexId&&t.value.branchBond&&("/"===this.doubleBondConfig?this.doubleBondConfig="\\":"\\"===this.doubleBondConfig&&(this.doubleBondConfig="/")))}if(!n)if(e)if(e.value.rings.length>0){let c=e.neighbours,r=null,n=new St(0,0);if(null===e.value.bridgedRing&&e.value.rings.length>1)for(var C=0;C<c.length;C++){let t=this.graph.vertices[c[C]];if(yt.containsAll(t.value.rings,e.value.rings)){r=t;break}}if(null===r){for(C=0;C<c.length;C++){let t=this.graph.vertices[c[C]];t.positioned&&this.areVerticesInSameRing(t,e)&&n.add(St.subtract(t.position,e.position))}n.invert().normalize().multiplyScalar(this.opts.bondLength).add(e.position)}else n=r.position.clone().rotateAround(Math.PI,e.position);t.previousPosition=e.position,t.setPositionFromVector(n),t.positioned=!0}else{let r=new St(this.opts.bondLength,0);r.rotate(c),r.add(e.position),t.setPositionFromVector(r),t.previousPosition=e.position,t.positioned=!0}else{let e=new St(this.opts.bondLength,0);e.rotate(wt.toRad(-60)),t.previousPosition=e,t.setPosition(this.opts.bondLength,0),t.angle=wt.toRad(-60),null===t.value.bridgedRing&&(t.positioned=!0)}if(null!==t.value.bridgedRing){let e=this.getRing(t.value.bridgedRing);if(!e.positioned){let c=St.subtract(t.previousPosition,t.position);c.invert(),c.normalize();let r=wt.polyCircumradius(this.opts.bondLength,e.members.length);c.multiplyScalar(r),c.add(t.position),this.createRing(e,c,t)}}else if(t.value.rings.length>0){let e=this.getRing(t.value.rings[0]);if(!e.positioned){let c=St.subtract(t.previousPosition,t.position);c.invert(),c.normalize();let r=wt.polyCircumradius(this.opts.bondLength,e.getSize());c.multiplyScalar(r),c.add(t.position),this.createRing(e,c,t)}}else{t.value.isStereoCenter;let c=t.getNeighbours(),n=Array();for(C=0;C<c.length;C++)this.graph.vertices[c[C]].value.isDrawn&&n.push(c[C]);e&&(n=yt.remove(n,e.id));let s=t.getAngle();if(1===n.length){let c=this.graph.vertices[n[0]];if("#"===t.value.bondType||e&&"#"===e.value.bondType||"="===t.value.bondType&&e&&0===e.value.rings.length&&"="===e.value.bondType&&"-"!==t.value.branchBond){if(t.value.drawExplicit=!1,e){this.graph.getEdge(t.id,e.id).center=!0}this.graph.getEdge(t.id,c.id).center=!0,("#"===t.value.bondType||e&&"#"===e.value.bondType)&&(c.angle=0),c.drawExplicit=!0,this.createNextBond(c,t,s+c.angle)}else if(e&&e.value.rings.length>0){let e=wt.toRad(60),r=-e,n=new St(this.opts.bondLength,0),i=new St(this.opts.bondLength,0);n.rotate(e).add(t.position),i.rotate(r).add(t.position);let C=this.getCurrentCenterOfMass(),a=n.distanceSq(C),o=i.distanceSq(C);c.angle=a<o?r:e,this.createNextBond(c,t,s+c.angle)}else{let n=t.angle;if(e&&e.neighbours.length>3)n=n>0?Math.min(1.0472,n):n<0?Math.max(-1.0472,n):1.0472;else if(!n){n=this.getLastVertexWithAngle(t.id).angle,n||(n=1.0472)}if(e&&!i){let e=this.graph.getEdge(t.id,c.id).bondType;"/"===e?("/"===this.doubleBondConfig||"\\"===this.doubleBondConfig&&(n=-n),this.doubleBondConfig=null):"\\"===e&&("/"===this.doubleBondConfig?n=-n:this.doubleBondConfig,this.doubleBondConfig=null)}c.angle=r?n:-n,this.createNextBond(c,t,s+c.angle)}}else if(2===n.length){let c=t.angle;c||(c=1.0472);let r=this.graph.getTreeDepth(n[0],t.id),i=this.graph.getTreeDepth(n[1],t.id),C=this.graph.vertices[n[0]],a=this.graph.vertices[n[1]];C.value.subtreeDepth=r,a.value.subtreeDepth=i;let o=this.graph.getTreeDepth(e?e.id:null,t.id);e&&(e.value.subtreeDepth=o);let l=0,h=1;"C"===a.value.element&&"C"!==C.value.element&&i>1&&r<5?(l=1,h=0):"C"!==a.value.element&&"C"===C.value.element&&r>1&&i<5?(l=0,h=1):i>r&&(l=1,h=0);let u=this.graph.vertices[n[l]],g=this.graph.vertices[n[h]];this.graph.getEdge(t.id,u.id),this.graph.getEdge(t.id,g.id);let d=!1;o<r&&o<i&&(d=!0),g.angle=c,u.angle=-c,"\\"===this.doubleBondConfig?"\\"===g.value.branchBond&&(g.angle=-c,u.angle=c):"/"===this.doubleBondConfig&&"/"===g.value.branchBond&&(g.angle=-c,u.angle=c),this.createNextBond(g,t,s+g.angle,d),this.createNextBond(u,t,s+u.angle,d)}else if(3===n.length){let c=this.graph.getTreeDepth(n[0],t.id),r=this.graph.getTreeDepth(n[1],t.id),i=this.graph.getTreeDepth(n[2],t.id),C=this.graph.vertices[n[0]],a=this.graph.vertices[n[1]],o=this.graph.vertices[n[2]];C.value.subtreeDepth=c,a.value.subtreeDepth=r,o.value.subtreeDepth=i,r>c&&r>i?(C=this.graph.vertices[n[1]],a=this.graph.vertices[n[0]],o=this.graph.vertices[n[2]]):i>c&&i>r&&(C=this.graph.vertices[n[2]],a=this.graph.vertices[n[0]],o=this.graph.vertices[n[1]]),e&&e.value.rings.length<1&&C.value.rings.length<1&&a.value.rings.length<1&&o.value.rings.length<1&&1===this.graph.getTreeDepth(a.id,t.id)&&1===this.graph.getTreeDepth(o.id,t.id)&&this.graph.getTreeDepth(C.id,t.id)>1?(C.angle=-t.angle,t.angle>=0?(a.angle=wt.toRad(30),o.angle=wt.toRad(90)):(a.angle=-wt.toRad(30),o.angle=-wt.toRad(90)),this.createNextBond(C,t,s+C.angle),this.createNextBond(a,t,s+a.angle),this.createNextBond(o,t,s+o.angle)):(C.angle=0,a.angle=wt.toRad(90),o.angle=-wt.toRad(90),this.createNextBond(C,t,s+C.angle),this.createNextBond(a,t,s+a.angle),this.createNextBond(o,t,s+o.angle))}else if(4===n.length){let e=this.graph.getTreeDepth(n[0],t.id),c=this.graph.getTreeDepth(n[1],t.id),r=this.graph.getTreeDepth(n[2],t.id),i=this.graph.getTreeDepth(n[3],t.id),C=this.graph.vertices[n[0]],a=this.graph.vertices[n[1]],o=this.graph.vertices[n[2]],l=this.graph.vertices[n[3]];C.value.subtreeDepth=e,a.value.subtreeDepth=c,o.value.subtreeDepth=r,l.value.subtreeDepth=i,c>e&&c>r&&c>i?(C=this.graph.vertices[n[1]],a=this.graph.vertices[n[0]],o=this.graph.vertices[n[2]],l=this.graph.vertices[n[3]]):r>e&&r>c&&r>i?(C=this.graph.vertices[n[2]],a=this.graph.vertices[n[0]],o=this.graph.vertices[n[1]],l=this.graph.vertices[n[3]]):i>e&&i>c&&i>r&&(C=this.graph.vertices[n[3]],a=this.graph.vertices[n[0]],o=this.graph.vertices[n[1]],l=this.graph.vertices[n[2]]),C.angle=-wt.toRad(36),a.angle=wt.toRad(36),o.angle=-wt.toRad(108),l.angle=wt.toRad(108),this.createNextBond(C,t,s+C.angle),this.createNextBond(a,t,s+a.angle),this.createNextBond(o,t,s+o.angle),this.createNextBond(l,t,s+l.angle)}}}getCommonRingbondNeighbour(t){let e=t.neighbours;for(var c=0;c<e.length;c++){let r=this.graph.vertices[e[c]];if(yt.containsAll(r.value.rings,t.value.rings))return r}return null}isPointInRing(t){for(var e=0;e<this.rings.length;e++){let c=this.rings[e];if(!c.positioned)continue;let r=wt.polyCircumradius(this.opts.bondLength,c.getSize()),n=r*r;if(t.distanceSq(c.center)<n)return!0}return!1}isEdgeInRing(t){let e=this.graph.vertices[t.sourceId],c=this.graph.vertices[t.targetId];return this.areVerticesInSameRing(e,c)}isEdgeRotatable(t){let e=this.graph.vertices[t.sourceId],c=this.graph.vertices[t.targetId];return"-"===t.bondType&&(!e.isTerminal()&&!c.isTerminal()&&!(e.value.rings.length>0&&c.value.rings.length>0&&this.areVerticesInSameRing(e,c)))}isRingAromatic(t){for(var e=0;e<t.members.length;e++){if(!this.graph.vertices[t.members[e]].value.isPartOfAromaticRing)return!1}return!0}getEdgeNormals(t){let e=this.graph.vertices[t.sourceId].position,c=this.graph.vertices[t.targetId].position;return St.units(e,c)}getNonRingNeighbours(t){let e=Array(),c=this.graph.vertices[t],r=c.neighbours;for(var n=0;n<r.length;n++){let t=this.graph.vertices[r[n]];0===yt.intersection(c.value.rings,t.value.rings).length&&0==t.value.isBridge&&e.push(t)}return e}annotateStereochemistry(){for(var t=0;t<this.graph.vertices.length;t++){let n=this.graph.vertices[t];if(!n.value.isStereoCenter)continue;let i=n.getNeighbours(),C=i.length,s=Array(C);for(var e=0;e<C;e++){let t=new Uint8Array(this.graph.vertices.length),r=Array(Array());t[n.id]=1,this.visitStereochemistry(i[e],n.id,t,r,10,0);for(var c=0;c<r.length;c++)r[c].sort((function(t,e){return e-t}));s[e]=[e,r]}let a=0,o=0;for(e=0;e<s.length;e++){s[e][1].length>a&&(a=s[e][1].length);for(c=0;c<s[e][1].length;c++)s[e][1][c].length>o&&(o=s[e][1][c].length)}for(e=0;e<s.length;e++){let t=a-s[e][1].length;for(c=0;c<t;c++)s[e][1].push([]);s[e][1].push([i[e]]);for(c=0;c<s[e][1].length;c++){let t=o-s[e][1][c].length;for(var r=0;r<t;r++)s[e][1][c].push(0)}}s.sort((function(t,e){for(var c=0;c<t[1].length;c++)for(var r=0;r<t[1][c].length;r++){if(t[1][c][r]>e[1][c][r])return-1;if(t[1][c][r]<e[1][c][r])return 1}return 0}));let l=new Uint8Array(C);for(e=0;e<C;e++)l[e]=s[e][0],n.value.priority=e;let h=this.graph.vertices[i[l[0]]].position,u=this.graph.vertices[i[l[1]]].position,g=this.graph.vertices[i[l[2]]].position,d=h.relativeClockwise(u,n.position);h.relativeClockwise(g,n.position);let f=-1===d,p="@"===n.value.bracket.chirality?-1:1,m=wt.parityOfPermutation(l)*p==1?"R":"S",O="down",v="up";(f&&"R"!==m||!f&&"S"!==m)&&(n.value.hydrogenDirection="up",O="up",v="down"),n.value.hasHydrogen&&(this.graph.getEdge(n.id,i[l[l.length-1]]).wedge=O);let b=new Array(i.length-1),N=n.value.rings.length>1&&n.value.hasHydrogen,w=n.value.hasHydrogen?1:0;for(e=0;e<l.length-w;e++){b[e]=new Uint32Array(2);let t=this.graph.vertices[i[l[e]]];b[e][0]+=t.value.isStereoCenter?0:1e5,b[e][0]+=this.areVerticesInSameRing(t,n)?0:1e4,b[e][0]+=t.value.isHeteroAtom()?1e3:0,b[e][0]-=0===t.value.subtreeDepth?1e3:0,b[e][0]+=1e3-t.value.subtreeDepth,b[e][1]=i[l[e]]}if(b.sort((function(t,e){return t[0]>e[0]?-1:t[0]<e[0]?1:0})),!N){let t=b[0][1];if(n.value.hasHydrogen)this.graph.getEdge(n.id,t).wedge=v;else{let c=v;for(e=l.length-1;e>=0&&(c=c===O?v:O,i[l[e]]!==t);e--);this.graph.getEdge(n.id,t).wedge=c}}n.value.chirality=m}}visitStereochemistry(t,e,c,r,n,i,C=0){c[t]=1;let s=this.graph.vertices[t],a=s.value.getAtomicNumber();r.length<=i&&r.push(Array());for(var o=0;o<this.graph.getEdge(t,e).weight;o++)r[i].push(1e3*C+a);let l=this.graph.vertices[t].neighbours;for(o=0;o<l.length;o++)1!==c[l[o]]&&i<n-1&&this.visitStereochemistry(l[o],t,c.slice(),r,n,i+1,a);if(i<n-1){let e=0;for(o=0;o<l.length;o++)e+=this.graph.getEdge(t,l[o]).weight;for(o=0;o<s.value.getMaxBonds()-e;o++)r.length<=i+1&&r.push(Array()),r[i+1].push(1e3*a+1)}}initPseudoElements(){for(var t=0;t<this.graph.vertices.length;t++){const c=this.graph.vertices[t],r=c.neighbours;let n=Array(r.length);for(var e=0;e<r.length;e++)n[e]=this.graph.vertices[r[e]];if(c.getNeighbourCount()<3||c.value.rings.length>0)continue;if("P"===c.value.element)continue;if("C"===c.value.element&&3===n.length&&"N"===n[0].value.element&&"N"===n[1].value.element&&"N"===n[2].value.element)continue;let i=0,C=0;for(e=0;e<n.length;e++){let t=n[e],c=t.value.element,r=t.getNeighbourCount();"C"!==c&&"H"!==c&&1===r&&i++,r>1&&C++}if(C>1||i<2)continue;let s=null;for(e=0;e<n.length;e++){let t=n[e];t.getNeighbourCount()>1&&(s=t)}for(e=0;e<n.length;e++){let t=n[e];if(t.getNeighbourCount()>1)continue;t.value.isDrawn=!1;let r=Ft.maxBonds[t.value.element]-t.value.bondCount,i="";t.value.bracket&&(r=t.value.bracket.hcount,i=t.value.bracket.charge||0),c.value.attachPseudoElement(t.value.element,s?s.value.element:null,r,i)}}for(t=0;t<this.graph.vertices.length;t++){const c=this.graph.vertices[t],r=c.value,n=r.element;if("C"===n||"H"===n||!r.isDrawn)continue;const i=c.neighbours;let C=Array(i.length);for(e=0;e<i.length;e++)C[e]=this.graph.vertices[i[e]];for(e=0;e<C.length;e++){let t=C[e].value;if(!t.hasAttachedPseudoElements||2!==t.getAttachedPseudoElementsCount())continue;const r=t.getAttachedPseudoElements();r.hasOwnProperty("0O")&&r.hasOwnProperty("3C")&&(t.isDrawn=!1,c.value.attachPseudoElement("Ac","",0))}}}};const Pt=Ct,Dt=tt,Ht=U;var zt=class t{constructor(t,e,c,r=!0){if(this.svg="string"==typeof e||e instanceof String?document.getElementById(e):e,this.container=null,this.opts=c,this.uid=function(t){for(var e="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=c.length,n=0;n<t;n++)e+=c.charAt(Math.floor(Math.random()*r));return e}(5),this.gradientId=0,this.backgroundItems=[],this.paths=[],this.vertices=[],this.gradients=[],this.highlights=[],this.drawingWidth=0,this.drawingHeight=0,this.halfBondThickness=this.opts.bondThickness/2,this.themeManager=t,this.maskElements=[],this.maxX=-Number.MAX_VALUE,this.maxY=-Number.MAX_VALUE,this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,r)for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);this.style=document.createElementNS("http://www.w3.org/2000/svg","style"),this.style.appendChild(document.createTextNode(`\n                .element {\n                    font: ${this.opts.fontSizeLarge}pt ${this.opts.fontFamily};\n                }\n                .sub {\n                    font: ${this.opts.fontSizeSmall}pt ${this.opts.fontFamily};\n                }\n            `)),this.svg?this.svg.appendChild(this.style):(this.container=document.createElementNS("http://www.w3.org/2000/svg","g"),container.appendChild(this.style))}constructSvg(){let t=document.createElementNS("http://www.w3.org/2000/svg","defs"),e=document.createElementNS("http://www.w3.org/2000/svg","mask"),c=document.createElementNS("http://www.w3.org/2000/svg","g"),r=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","g"),C=this.paths,s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttributeNS(null,"x",this.minX),s.setAttributeNS(null,"y",this.minY),s.setAttributeNS(null,"width",this.maxX-this.minX),s.setAttributeNS(null,"height",this.maxY-this.minY),s.setAttributeNS(null,"fill","white"),e.appendChild(s),e.setAttributeNS(null,"id",this.uid+"-text-mask");for(let t of C)n.appendChild(t);for(let t of this.backgroundItems)c.appendChild(t);for(let t of this.highlights)r.appendChild(t);for(let t of this.vertices)i.appendChild(t);for(let t of this.maskElements)e.appendChild(t);for(let e of this.gradients)t.appendChild(e);if(n.setAttributeNS(null,"mask","url(#"+this.uid+"-text-mask)"),this.updateViewbox(this.opts.scale),c.setAttributeNS(null,"style",`transform: translateX(${this.minX}px) translateY(${this.minY}px)`),!this.svg)return this.container.appendChild(t),this.container.appendChild(e),this.container.appendChild(c),this.container.appendChild(n),this.container.appendChild(i),this.container;this.svg.appendChild(t),this.svg.appendChild(e),this.svg.appendChild(c),this.svg.appendChild(r),this.svg.appendChild(n),this.svg.appendChild(i)}addLayer(t){this.backgroundItems.push(t.firstChild)}createGradient(t){let e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),c=this.uid+"-line-"+this.gradientId++,r=t.getLeftVector(),n=t.getRightVector(),i=r.x,C=r.y,s=n.x,a=n.y;e.setAttributeNS(null,"id",c),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"x1",i),e.setAttributeNS(null,"y1",C),e.setAttributeNS(null,"x2",s),e.setAttributeNS(null,"y2",a);let o=document.createElementNS("http://www.w3.org/2000/svg","stop");o.setAttributeNS(null,"stop-color",this.themeManager.getColor(t.getLeftElement())||this.themeManager.getColor("C")),o.setAttributeNS(null,"offset","20%");let l=document.createElementNS("http://www.w3.org/2000/svg","stop");return l.setAttributeNS(null,"stop-color",this.themeManager.getColor(t.getRightElement()||this.themeManager.getColor("C"))),l.setAttributeNS(null,"offset","100%"),e.appendChild(o),e.appendChild(l),this.gradients.push(e),c}createSubSuperScripts(t,e){let c=document.createElementNS("http://www.w3.org/2000/svg","tspan");return c.setAttributeNS(null,"baseline-shift",e),c.appendChild(document.createTextNode(t)),c.setAttributeNS(null,"class","sub"),c}static createUnicodeCharge(e){return 1===e?"":-1===e?"":e>1?t.createUnicodeSuperscript(e)+"":e<-1?t.createUnicodeSuperscript(e)+"":""}determineDimensions(t){for(var e=0;e<t.length;e++){if(!t[e].value.isDrawn)continue;let c=t[e].position;this.maxX<c.x&&(this.maxX=c.x),this.maxY<c.y&&(this.maxY=c.y),this.minX>c.x&&(this.minX=c.x),this.minY>c.y&&(this.minY=c.y)}let c=this.opts.padding;this.maxX+=c,this.maxY+=c,this.minX-=c,this.minY-=c,this.drawingWidth=this.maxX-this.minX,this.drawingHeight=this.maxY-this.minY}updateViewbox(t){let e=this.minX,c=this.minY,r=this.maxX-this.minX,n=this.maxY-this.minY;if(t<=0)if(r>n){let t=r-n;n=r,c-=t/2}else{let t=n-r;r=n,e-=t/2}else this.svg&&(this.svg.style.width=t*r+"px",this.svg.style.height=t*n+"px");this.svg.setAttributeNS(null,"viewBox",`${e} ${c} ${r} ${n}`)}drawBall(t,e,c){let r=this.opts.bondLength/4.5;t-r<this.minX&&(this.minX=t-r),t+r>this.maxX&&(this.maxX=t+r),e-r<this.minY&&(this.minY=e-r),e+r>this.maxY&&(this.maxY=e+r);let n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r",r),n.setAttributeNS(null,"fill",this.themeManager.getColor(c)),this.vertices.push(n)}drawWedge(t){let e=t.getLeftVector().clone(),c=t.getRightVector().clone(),r=Dt.normals(e,c);r[0].normalize(),r[1].normalize();let n=e,i=c;t.getRightChiral()&&(n=c,i=e);let C=Dt.add(n,Dt.multiplyScalar(r[0],this.halfBondThickness)),s=Dt.add(i,Dt.multiplyScalar(r[0],3+this.opts.fontSizeLarge/4)),a=Dt.add(i,Dt.multiplyScalar(r[1],3+this.opts.fontSizeLarge/4)),o=Dt.add(n,Dt.multiplyScalar(r[1],this.halfBondThickness)),l=document.createElementNS("http://www.w3.org/2000/svg","polygon"),h=this.createGradient(t,e.x,e.y,c.x,c.y);l.setAttributeNS(null,"points",`${C.x},${C.y} ${s.x},${s.y} ${a.x},${a.y} ${o.x},${o.y}`),l.setAttributeNS(null,"fill",`url('#${h}')`),this.paths.push(l)}drawAtomHighlight(t,e,c="#03fc9d"){let r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttributeNS(null,"cx",t),r.setAttributeNS(null,"cy",e),r.setAttributeNS(null,"r",this.opts.bondLength/3),r.setAttributeNS(null,"fill",c),this.highlights.push(r)}drawDashedWedge(t){if(isNaN(t.from.x)||isNaN(t.from.y)||isNaN(t.to.x)||isNaN(t.to.y))return;let e,c,r=t.getLeftVector().clone(),n=t.getRightVector().clone(),i=Dt.normals(r,n);i[0].normalize(),i[1].normalize(),t.getRightChiral()?(e=n,c=r):(e=r,c=n);let C=Dt.subtract(c,e).normalize(),s=t.getLength(),a=1.25/(s/(this.opts.bondLength/10)),o=this.createGradient(t);for(let t=0;t<1;t+=a){let c=Dt.multiplyScalar(C,t*s),r=Dt.add(e,c),n=this.opts.fontSizeLarge/2*t,a=Dt.multiplyScalar(i[0],n);r.subtract(a);let l=r.clone();l.add(Dt.multiplyScalar(a,2)),this.drawLine(new Pt(r,l),null,o)}}drawDebugPoint(t,e,c="",r="#f00"){let n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r","2"),n.setAttributeNS(null,"fill","#f00"),this.vertices.push(n),this.drawDebugText(t,e,c)}drawDebugText(t,e,c){let r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttributeNS(null,"x",t),r.setAttributeNS(null,"y",e),r.setAttributeNS(null,"class","debug"),r.setAttributeNS(null,"fill","#ff0000"),r.setAttributeNS(null,"style","\n                font: 5px Droid Sans, sans-serif;\n            "),r.appendChild(document.createTextNode(c)),this.vertices.push(r)}drawRing(t,e,c){let r=document.createElementNS("http://www.w3.org/2000/svg","circle"),n=Ht.apothemFromSideLength(this.opts.bondLength,c);r.setAttributeNS(null,"cx",t),r.setAttributeNS(null,"cy",e),r.setAttributeNS(null,"r",n-this.opts.bondSpacing),r.setAttributeNS(null,"stroke",this.themeManager.getColor("C")),r.setAttributeNS(null,"stroke-width",this.opts.bondThickness),r.setAttributeNS(null,"fill","none"),this.paths.push(r)}drawLine(t,e=!1,c=null,r="round"){this.opts;let n=[["stroke-width",this.opts.bondThickness],["stroke-linecap",r],["stroke-dasharray",e?"5, 5":"none"]],i=t.getLeftVector(),C=t.getRightVector(),s=i.x,a=i.y,o=C.x,l=C.y,h=n.map((t=>t.join(":"))).join(";"),u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttributeNS(null,"x1",s),u.setAttributeNS(null,"y1",a),u.setAttributeNS(null,"x2",o),u.setAttributeNS(null,"y2",l),u.setAttributeNS(null,"style",h),this.paths.push(u),null==c&&(c=this.createGradient(t,s,a,o,l)),u.setAttributeNS(null,"stroke",`url('#${c}')`)}drawPoint(t,e,c){let r=.75;t-r<this.minX&&(this.minX=t-r),t+r>this.maxX&&(this.maxX=t+r),e-r<this.minY&&(this.minY=e-r),e+r>this.maxY&&(this.maxY=e+r);let n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r","1.5"),n.setAttributeNS(null,"fill","black"),this.maskElements.push(n);let i=document.createElementNS("http://www.w3.org/2000/svg","circle");i.setAttributeNS(null,"cx",t),i.setAttributeNS(null,"cy",e),i.setAttributeNS(null,"r",r),i.setAttributeNS(null,"fill",this.themeManager.getColor(c)),this.vertices.push(i)}drawText(e,c,r,n,i,C,s,a,o,l={}){let h=[],u=r;0!==s&&null!==s&&(u+=t.createUnicodeCharge(s)),0!==a&&null!==a&&(u=t.createUnicodeSuperscript(a)+u),h.push([u,r]),1===n?h.push(["H","H"]):n>1&&h.push(["H"+t.createUnicodeSubscript(n),"H"]),1===s&&"N"===r&&l.hasOwnProperty("0O")&&l.hasOwnProperty("0O-1")&&(l={"0O":{element:"O",count:2,hydrogenCount:0,previousElement:"C",charge:""}},s=0);for(let e in l){if(!l.hasOwnProperty(e))continue;let c=l[e],r=c.element;c.count>1&&(r+=t.createUnicodeSubscript(c.count)),""!==c.charge&&(r+=t.createUnicodeCharge(s)),h.push([r,c.element]),1===c.hydrogenCount?h.push(["H","H"]):c.hydrogenCount>1&&h.push(["H"+t.createUnicodeSubscript(c.hydrogenCount),"H"])}this.write(h,i,e,c,1===o)}write(e,c,r,n,i){let C=t.measureText(e[0][1],this.opts.fontSizeLarge,this.opts.fontFamily);"left"===c&&e[0][0]!==e[0][1]&&(C.width*=2),i?(r+C.width*e.length>this.maxX&&(this.maxX=r+C.width*e.length),r-C.width/2<this.minX&&(this.minX=r-C.width/2),n-C.height<this.minY&&(this.minY=n-C.height),n+C.height>this.maxY&&(this.maxY=n+C.height)):("right"!==c?(r+C.width*e.length>this.maxX&&(this.maxX=r+C.width*e.length),r-C.width*e.length<this.minX&&(this.minX=r-C.width*e.length)):"left"!==c&&(r+C.width*e.length>this.maxX&&(this.maxX=r+C.width*e.length),r-C.width/2<this.minX&&(this.minX=r-C.width/2)),n-C.height<this.minY&&(this.minY=n-C.height),n+C.height>this.maxY&&(this.maxY=n+C.height),"down"===c&&n+.8*C.height*e.length>this.maxY&&(this.maxY=n+.8*C.height*e.length),"up"===c&&n-.8*C.height*e.length<this.minY&&(this.minY=n-.8*C.height*e.length));let s=r,a=n,o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttributeNS(null,"class","element");let l=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"fill","#ffffff"),"left"===c&&(e=e.reverse()),"right"!==c&&"down"!==c&&"up"!==c||(r-=C.width/2),"left"===c&&(r+=C.width/2),e.forEach(((t,e)=>{const r=t[0],n=t[1];let i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS(null,"fill",this.themeManager.getColor(n)),i.textContent=r,"up"!==c&&"down"!==c||(i.setAttributeNS(null,"x","0px"),"up"===c?i.setAttributeNS(null,"y",`-${.9*e}em`):i.setAttributeNS(null,"y",.9*e+"em")),o.appendChild(i)})),o.setAttributeNS(null,"data-direction",c),"left"===c||"right"===c?(o.setAttributeNS(null,"dominant-baseline","alphabetic"),o.setAttributeNS(null,"y","0.36em")):o.setAttributeNS(null,"dominant-baseline","central"),"left"===c&&o.setAttributeNS(null,"text-anchor","end"),l.appendChild(o),l.setAttributeNS(null,"style",`transform: translateX(${r}px) translateY(${n}px)`);let h=.75*this.opts.fontSizeLarge;e[0][1].length>1&&(h=1.1*this.opts.fontSizeLarge);let u=document.createElementNS("http://www.w3.org/2000/svg","circle");u.setAttributeNS(null,"cx",s),u.setAttributeNS(null,"cy",a),u.setAttributeNS(null,"r",h),u.setAttributeNS(null,"fill","black"),this.maskElements.push(u),this.vertices.push(l)}toCanvas(t,e,c){("string"==typeof t||t instanceof String)&&(t=document.getElementById(t));let r=new Image;r.onload=function(){t.width=e,t.height=c,t.getContext("2d").drawImage(r,0,0,e,c)},r.src="data:image/svg+xml;charset-utf-8,"+encodeURIComponent(this.svg.outerHTML)}static createUnicodeSubscript(t){let e="";return t.toString().split("").forEach((t=>{e+=["","","","","","","","","",""][parseInt(t)]})),e}static createUnicodeSuperscript(t){let e="";return t.toString().split("").forEach((t=>{parseInt(t)&&(e+=["","","","","","","","","",""][parseInt(t)])})),e}static replaceNumbersWithSubscript(t){let e={0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""};for(const[c,r]of Object.entries(e))t=t.replaceAll(c,r);return t}static measureText(t,e,c,r=.9){const n=document.createElement("canvas").getContext("2d");n.font=`${e}pt ${c}`;let i=n.measureText(t),C=Math.abs(i.actualBoundingBoxLeft)+Math.abs(i.actualBoundingBoxRight);return{width:i.width>C?i.width:C,height:(Math.abs(i.actualBoundingBoxAscent)+Math.abs(i.actualBoundingBoxAscent))*r}}static svgToCanvas(t,e,c,r,n=null){t.setAttributeNS(null,"width",c),t.setAttributeNS(null,"height",r);let i=new Image;return i.onload=function(){e.width=c,e.height=r;let t=e.getContext("2d");t.imageSmoothingEnabled=!1,t.drawImage(i,0,0,c,r),n&&n(e)},i.onerror=function(t){console.log(t)},i.src="data:image/svg+xml;charset-utf-8,"+encodeURIComponent(t.outerHTML),e}static svgToImg(t,e,c,r){let n=document.createElement("canvas");this.svgToCanvas(t,n,c,r,(t=>{e.src=n.toDataURL("image/png")}))}static writeText(e,c,r,n,i=Number.MAX_SAFE_INTEGER){let C=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","style");s.appendChild(document.createTextNode(`\n        .text {\n            font: ${r}pt ${n};\n            dominant-baseline: ideographic;\n        }\n    `)),C.appendChild(s);let a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttributeNS(null,"class","text");let o=0,l=0,h=[];return e.split("\n").forEach((e=>{let c=t.measureText(e,r,n,1);if(c.width>=i){let c=0,C=0,s=e.split(" "),a=0;for(let e=0;e<s.length;e++){let o=t.measureText(s[e],r,n,1);c+o.width>i&&(h.push({text:s.slice(a,e).join(" "),width:c,height:C}),c=0,C=0,a=e),o.height>C&&(C=o.height),c+=o.width}a<s.length&&h.push({text:s.slice(a,s.length).join(" "),width:c,height:C})}else h.push({text:e,width:c.width,height:c.height})})),h.forEach(((t,e)=>{l+=t.height;let r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS(null,"fill",c.getColor("C")),r.textContent=t.text,r.setAttributeNS(null,"x","0px"),r.setAttributeNS(null,"y",`${l}px`),a.appendChild(r),t.width>o&&(o=t.width)})),C.appendChild(a),{svg:C,width:o,height:l}}};var $t=function(t){function e(t,e){var c=t.length,r=0;if(0===c||c>0&&c-1 in t)for(;r<c&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break}function c(t){var e=parseInt(t).toString(16);return 1==e.length?"0"+e:e}function r(t,e,r,n){return void 0===(n=parseInt(n))||255===n?"#"+c(t)+c(e)+c(r):0!==n&&"rgba("+t+","+e+","+r+","+n/255+")"}function n(t,e,c){return"M"+t+" "+e+"h"+c}let i=function(t){var c="";return e(t,(function(t,i){if(!1!==(t=r.apply(null,t.split(",")))){var C,s=[],a=1;e(i,(function(){C&&this[1]===C[1]&&this[0]===C[0]+a?a++:(C&&(s.push(n(C[0],C[1],a)),a=1),C=this)})),s.push(n(C[0],C[1],a)),c+=function(t,e){return'<path stroke="'+t+'" d="'+e+'" />\n'}(t,s.join(""))}})),c}(function(t){var e={},c=t.data,r=c.length,n=t.width;t.height;for(var i,C=0,s=0,a=0;a<r;a+=4)c[a+3]>0&&(e[i=c[a]+","+c[a+1]+","+c[a+2]+","+c[a+3]]=e[i]||[],C=a/4%n,s=Math.floor(a/4/n),e[i].push([C,s]));return e}(t)),C='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -0.5 '+t.width+" "+t.height+'" shape-rendering="crispEdges"><g shape-rendering="crispEdges">'+i+"</g></svg>";var s=document.createElement("div");return s.innerHTML=C,s.firstChild},_t={};({get exports(){return _t},set exports(t){_t=t}}).exports=function(){for(var t=function(t,e,c){return void 0===e&&(e=0),void 0===c&&(c=1),t<e?e:t>c?c:t},e=t,c=function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var c=0;c<=3;c++)c<3?((t[c]<0||t[c]>255)&&(t._clipped=!0),t[c]=e(t[c],0,255)):3===c&&(t[c]=e(t[c],0,1));return t},r={},n=0,i=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<i.length;n+=1){var C=i[n];r["[object "+C+"]"]=C.toLowerCase()}var s=function(t){return r[Object.prototype.toString.call(t)]||"object"},a=s,o=function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==a(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},l=s,h=function(t){if(t.length<2)return null;var e=t.length-1;return"string"==l(t[e])?t[e].toLowerCase():null},u=Math.PI,g={clip_rgb:c,limit:t,type:s,unpack:o,last:h,PI:u,TWOPI:2*u,PITHIRD:u/3,DEG2RAD:u/180,RAD2DEG:180/u},d={format:{},autodetect:[]},f=g.last,p=g.clip_rgb,m=g.type,O=d,v=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=this;if("object"===m(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var r=f(t),n=!1;if(!r){n=!0,O.sorted||(O.autodetect=O.autodetect.sort((function(t,e){return e.p-t.p})),O.sorted=!0);for(var i=0,C=O.autodetect;i<C.length;i+=1){var s=C[i];if(r=s.test.apply(s,t))break}}if(!O.format[r])throw new Error("unknown format: "+t);var a=O.format[r].apply(null,n?t:t.slice(0,-1));c._rgb=p(a),3===c._rgb.length&&c._rgb.push(1)};v.prototype.toString=function(){return"function"==m(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var b=v,N=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(N.Color,[null].concat(t)))};N.Color=b,N.version="2.4.2";var w=N,y=g.unpack,S=Math.max,x=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=y(t,"rgb"),r=c[0],n=c[1],i=c[2],C=1-S(r/=255,S(n/=255,i/=255)),s=C<1?1/(1-C):0;return[(1-r-C)*s,(1-n-C)*s,(1-i-C)*s,C]},A=x,F=g.unpack,R=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=(t=F(t,"cmyk"))[0],r=t[1],n=t[2],i=t[3],C=t.length>4?t[4]:1;return 1===i?[0,0,0,C]:[c>=1?0:255*(1-c)*(1-i),r>=1?0:255*(1-r)*(1-i),n>=1?0:255*(1-n)*(1-i),C]},k=R,M=w,E=b,T=d,I=g.unpack,B=g.type,L=A;E.prototype.cmyk=function(){return L(this._rgb)},M.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(E,[null].concat(t,["cmyk"])))},T.format.cmyk=k,T.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=I(t,"cmyk"),"array"===B(t)&&4===t.length)return"cmyk"}});var P=g.unpack,D=g.last,H=function(t){return Math.round(100*t)/100},z=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=P(t,"hsla"),r=D(t)||"lsa";return c[0]=H(c[0]||0),c[1]=H(100*c[1])+"%",c[2]=H(100*c[2])+"%","hsla"===r||c.length>3&&c[3]<1?(c[3]=c.length>3?c[3]:1,r="hsla"):c.length=3,r+"("+c.join(",")+")"},$=z,_=g.unpack,V=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=(t=_(t,"rgba"))[0],r=t[1],n=t[2];c/=255,r/=255,n/=255;var i,C,s=Math.min(c,r,n),a=Math.max(c,r,n),o=(a+s)/2;return a===s?(i=0,C=Number.NaN):i=o<.5?(a-s)/(a+s):(a-s)/(2-a-s),c==a?C=(r-n)/(a-s):r==a?C=2+(n-c)/(a-s):n==a&&(C=4+(c-r)/(a-s)),(C*=60)<0&&(C+=360),t.length>3&&void 0!==t[3]?[C,i,o,t[3]]:[C,i,o]},W=V,X=g.unpack,U=g.last,Y=$,q=W,G=Math.round,j=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=X(t,"rgba"),r=U(t)||"rgb";return"hsl"==r.substr(0,3)?Y(q(c),r):(c[0]=G(c[0]),c[1]=G(c[1]),c[2]=G(c[2]),("rgba"===r||c.length>3&&c[3]<1)&&(c[3]=c.length>3?c[3]:1,r="rgba"),r+"("+c.slice(0,"rgb"===r?3:4).join(",")+")")},K=j,Z=g.unpack,J=Math.round,Q=function(){for(var t,e=[],c=arguments.length;c--;)e[c]=arguments[c];var r,n,i,C=(e=Z(e,"hsl"))[0],s=e[1],a=e[2];if(0===s)r=n=i=255*a;else{var o=[0,0,0],l=[0,0,0],h=a<.5?a*(1+s):a+s-a*s,u=2*a-h,g=C/360;o[0]=g+1/3,o[1]=g,o[2]=g-1/3;for(var d=0;d<3;d++)o[d]<0&&(o[d]+=1),o[d]>1&&(o[d]-=1),6*o[d]<1?l[d]=u+6*(h-u)*o[d]:2*o[d]<1?l[d]=h:3*o[d]<2?l[d]=u+(h-u)*(2/3-o[d])*6:l[d]=u;r=(t=[J(255*l[0]),J(255*l[1]),J(255*l[2])])[0],n=t[1],i=t[2]}return e.length>3?[r,n,i,e[3]]:[r,n,i,1]},tt=Q,et=tt,ct=d,rt=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,nt=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,it=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Ct=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,st=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,at=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,ot=Math.round,lt=function(t){var e;if(t=t.toLowerCase().trim(),ct.format.named)try{return ct.format.named(t)}catch(t){}if(e=t.match(rt)){for(var c=e.slice(1,4),r=0;r<3;r++)c[r]=+c[r];return c[3]=1,c}if(e=t.match(nt)){for(var n=e.slice(1,5),i=0;i<4;i++)n[i]=+n[i];return n}if(e=t.match(it)){for(var C=e.slice(1,4),s=0;s<3;s++)C[s]=ot(2.55*C[s]);return C[3]=1,C}if(e=t.match(Ct)){for(var a=e.slice(1,5),o=0;o<3;o++)a[o]=ot(2.55*a[o]);return a[3]=+a[3],a}if(e=t.match(st)){var l=e.slice(1,4);l[1]*=.01,l[2]*=.01;var h=et(l);return h[3]=1,h}if(e=t.match(at)){var u=e.slice(1,4);u[1]*=.01,u[2]*=.01;var g=et(u);return g[3]=+e[4],g}};lt.test=function(t){return rt.test(t)||nt.test(t)||it.test(t)||Ct.test(t)||st.test(t)||at.test(t)};var ht=lt,ut=w,gt=b,dt=d,ft=g.type,pt=K,mt=ht;gt.prototype.css=function(t){return pt(this._rgb,t)},ut.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(gt,[null].concat(t,["css"])))},dt.format.css=mt,dt.autodetect.push({p:5,test:function(t){for(var e=[],c=arguments.length-1;c-- >0;)e[c]=arguments[c+1];if(!e.length&&"string"===ft(t)&&mt.test(t))return"css"}});var Ot=b,vt=w,bt=d,Nt=g.unpack;bt.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=Nt(t,"rgba");return c[0]*=255,c[1]*=255,c[2]*=255,c},vt.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Ot,[null].concat(t,["gl"])))},Ot.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var wt=g.unpack,yt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c,r=wt(t,"rgb"),n=r[0],i=r[1],C=r[2],s=Math.min(n,i,C),a=Math.max(n,i,C),o=a-s,l=100*o/255,h=s/(255-o)*100;return 0===o?c=Number.NaN:(n===a&&(c=(i-C)/o),i===a&&(c=2+(C-n)/o),C===a&&(c=4+(n-i)/o),(c*=60)<0&&(c+=360)),[c,l,h]},St=yt,xt=g.unpack,At=Math.floor,Ft=function(){for(var t,e,c,r,n,i,C=[],s=arguments.length;s--;)C[s]=arguments[s];var a,o,l,h=(C=xt(C,"hcg"))[0],u=C[1],g=C[2];g*=255;var d=255*u;if(0===u)a=o=l=g;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var f=At(h/=60),p=h-f,m=g*(1-u),O=m+d*(1-p),v=m+d*p,b=m+d;switch(f){case 0:a=(t=[b,v,m])[0],o=t[1],l=t[2];break;case 1:a=(e=[O,b,m])[0],o=e[1],l=e[2];break;case 2:a=(c=[m,b,v])[0],o=c[1],l=c[2];break;case 3:a=(r=[m,O,b])[0],o=r[1],l=r[2];break;case 4:a=(n=[v,m,b])[0],o=n[1],l=n[2];break;case 5:a=(i=[b,m,O])[0],o=i[1],l=i[2]}}return[a,o,l,C.length>3?C[3]:1]},Rt=Ft,kt=g.unpack,Mt=g.type,Et=w,Tt=b,It=d,Bt=St;Tt.prototype.hcg=function(){return Bt(this._rgb)},Et.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Tt,[null].concat(t,["hcg"])))},It.format.hcg=Rt,It.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=kt(t,"hcg"),"array"===Mt(t)&&3===t.length)return"hcg"}});var Lt=g.unpack,Pt=g.last,Dt=Math.round,Ht=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=Lt(t,"rgba"),r=c[0],n=c[1],i=c[2],C=c[3],s=Pt(t)||"auto";void 0===C&&(C=1),"auto"===s&&(s=C<1?"rgba":"rgb");var a="000000"+((r=Dt(r))<<16|(n=Dt(n))<<8|(i=Dt(i))).toString(16);a=a.substr(a.length-6);var o="0"+Dt(255*C).toString(16);switch(o=o.substr(o.length-2),s.toLowerCase()){case"rgba":return"#"+a+o;case"argb":return"#"+o+a;default:return"#"+a}},zt=Ht,$t=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,_t=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Vt=function(t){if(t.match($t)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(_t)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var c=parseInt(t,16);return[c>>24&255,c>>16&255,c>>8&255,Math.round((255&c)/255*100)/100]}throw new Error("unknown hex color: "+t)},Wt=w,Xt=b,Ut=g.type,Yt=d,qt=zt;Xt.prototype.hex=function(t){return qt(this._rgb,t)},Wt.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Xt,[null].concat(t,["hex"])))},Yt.format.hex=Vt,Yt.autodetect.push({p:4,test:function(t){for(var e=[],c=arguments.length-1;c-- >0;)e[c]=arguments[c+1];if(!e.length&&"string"===Ut(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var Gt=g.unpack,jt=g.TWOPI,Kt=Math.min,Zt=Math.sqrt,Jt=Math.acos,Qt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c,r=Gt(t,"rgb"),n=r[0],i=r[1],C=r[2],s=Kt(n/=255,i/=255,C/=255),a=(n+i+C)/3,o=a>0?1-s/a:0;return 0===o?c=NaN:(c=(n-i+(n-C))/2,c/=Zt((n-i)*(n-i)+(n-C)*(i-C)),c=Jt(c),C>i&&(c=jt-c),c/=jt),[360*c,o,a]},te=Qt,ee=g.unpack,ce=g.limit,re=g.TWOPI,ne=g.PITHIRD,ie=Math.cos,Ce=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c,r,n,i=(t=ee(t,"hsi"))[0],C=t[1],s=t[2];return isNaN(i)&&(i=0),isNaN(C)&&(C=0),i>360&&(i-=360),i<0&&(i+=360),(i/=360)<1/3?r=1-((n=(1-C)/3)+(c=(1+C*ie(re*i)/ie(ne-re*i))/3)):i<2/3?n=1-((c=(1-C)/3)+(r=(1+C*ie(re*(i-=1/3))/ie(ne-re*i))/3)):c=1-((r=(1-C)/3)+(n=(1+C*ie(re*(i-=2/3))/ie(ne-re*i))/3)),[255*(c=ce(s*c*3)),255*(r=ce(s*r*3)),255*(n=ce(s*n*3)),t.length>3?t[3]:1]},se=Ce,ae=g.unpack,oe=g.type,le=w,he=b,ue=d,ge=te;he.prototype.hsi=function(){return ge(this._rgb)},le.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(he,[null].concat(t,["hsi"])))},ue.format.hsi=se,ue.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ae(t,"hsi"),"array"===oe(t)&&3===t.length)return"hsi"}});var de=g.unpack,fe=g.type,pe=w,me=b,Oe=d,ve=W;me.prototype.hsl=function(){return ve(this._rgb)},pe.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(me,[null].concat(t,["hsl"])))},Oe.format.hsl=tt,Oe.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=de(t,"hsl"),"array"===fe(t)&&3===t.length)return"hsl"}});var be=g.unpack,Ne=Math.min,we=Math.max,ye=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c,r,n,i=(t=be(t,"rgb"))[0],C=t[1],s=t[2],a=Ne(i,C,s),o=we(i,C,s),l=o-a;return n=o/255,0===o?(c=Number.NaN,r=0):(r=l/o,i===o&&(c=(C-s)/l),C===o&&(c=2+(s-i)/l),s===o&&(c=4+(i-C)/l),(c*=60)<0&&(c+=360)),[c,r,n]},Se=ye,xe=g.unpack,Ae=Math.floor,Fe=function(){for(var t,e,c,r,n,i,C=[],s=arguments.length;s--;)C[s]=arguments[s];var a,o,l,h=(C=xe(C,"hsv"))[0],u=C[1],g=C[2];if(g*=255,0===u)a=o=l=g;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var d=Ae(h/=60),f=h-d,p=g*(1-u),m=g*(1-u*f),O=g*(1-u*(1-f));switch(d){case 0:a=(t=[g,O,p])[0],o=t[1],l=t[2];break;case 1:a=(e=[m,g,p])[0],o=e[1],l=e[2];break;case 2:a=(c=[p,g,O])[0],o=c[1],l=c[2];break;case 3:a=(r=[p,m,g])[0],o=r[1],l=r[2];break;case 4:a=(n=[O,p,g])[0],o=n[1],l=n[2];break;case 5:a=(i=[g,p,m])[0],o=i[1],l=i[2]}}return[a,o,l,C.length>3?C[3]:1]},Re=Fe,ke=g.unpack,Me=g.type,Ee=w,Te=b,Ie=d,Be=Se;Te.prototype.hsv=function(){return Be(this._rgb)},Ee.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Te,[null].concat(t,["hsv"])))},Ie.format.hsv=Re,Ie.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ke(t,"hsv"),"array"===Me(t)&&3===t.length)return"hsv"}});var Le={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Pe=Le,De=g.unpack,He=Math.pow,ze=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=De(t,"rgb"),r=c[0],n=c[1],i=c[2],C=Ve(r,n,i),s=C[0],a=C[1],o=116*a-16;return[o<0?0:o,500*(s-a),200*(a-C[2])]},$e=function(t){return(t/=255)<=.04045?t/12.92:He((t+.055)/1.055,2.4)},_e=function(t){return t>Pe.t3?He(t,1/3):t/Pe.t2+Pe.t0},Ve=function(t,e,c){return t=$e(t),e=$e(e),c=$e(c),[_e((.4124564*t+.3575761*e+.1804375*c)/Pe.Xn),_e((.2126729*t+.7151522*e+.072175*c)/Pe.Yn),_e((.0193339*t+.119192*e+.9503041*c)/Pe.Zn)]},We=ze,Xe=Le,Ue=g.unpack,Ye=Math.pow,qe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c,r,n,i=(t=Ue(t,"lab"))[0],C=t[1],s=t[2];return r=(i+16)/116,c=isNaN(C)?r:r+C/500,n=isNaN(s)?r:r-s/200,r=Xe.Yn*je(r),c=Xe.Xn*je(c),n=Xe.Zn*je(n),[Ge(3.2404542*c-1.5371385*r-.4985314*n),Ge(-.969266*c+1.8760108*r+.041556*n),Ge(.0556434*c-.2040259*r+1.0572252*n),t.length>3?t[3]:1]},Ge=function(t){return 255*(t<=.00304?12.92*t:1.055*Ye(t,1/2.4)-.055)},je=function(t){return t>Xe.t1?t*t*t:Xe.t2*(t-Xe.t0)},Ke=qe,Ze=g.unpack,Je=g.type,Qe=w,tc=b,ec=d,cc=We;tc.prototype.lab=function(){return cc(this._rgb)},Qe.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(tc,[null].concat(t,["lab"])))},ec.format.lab=Ke,ec.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Ze(t,"lab"),"array"===Je(t)&&3===t.length)return"lab"}});var rc=g.unpack,nc=g.RAD2DEG,ic=Math.sqrt,Cc=Math.atan2,sc=Math.round,ac=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=rc(t,"lab"),r=c[0],n=c[1],i=c[2],C=ic(n*n+i*i),s=(Cc(i,n)*nc+360)%360;return 0===sc(1e4*C)&&(s=Number.NaN),[r,C,s]},oc=ac,lc=g.unpack,hc=We,uc=oc,gc=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=lc(t,"rgb"),r=c[0],n=c[1],i=c[2],C=hc(r,n,i),s=C[0],a=C[1],o=C[2];return uc(s,a,o)},dc=gc,fc=g.unpack,pc=g.DEG2RAD,mc=Math.sin,Oc=Math.cos,vc=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=fc(t,"lch"),r=c[0],n=c[1],i=c[2];return isNaN(i)&&(i=0),[r,Oc(i*=pc)*n,mc(i)*n]},bc=vc,Nc=g.unpack,wc=bc,yc=Ke,Sc=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=(t=Nc(t,"lch"))[0],r=t[1],n=t[2],i=wc(c,r,n),C=i[0],s=i[1],a=i[2],o=yc(C,s,a);return[o[0],o[1],o[2],t.length>3?t[3]:1]},xc=Sc,Ac=g.unpack,Fc=xc,Rc=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=Ac(t,"hcl").reverse();return Fc.apply(void 0,c)},kc=Rc,Mc=g.unpack,Ec=g.type,Tc=w,Ic=b,Bc=d,Lc=dc;Ic.prototype.lch=function(){return Lc(this._rgb)},Ic.prototype.hcl=function(){return Lc(this._rgb).reverse()},Tc.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Ic,[null].concat(t,["lch"])))},Tc.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Ic,[null].concat(t,["hcl"])))},Bc.format.lch=xc,Bc.format.hcl=kc,["lch","hcl"].forEach((function(t){return Bc.autodetect.push({p:2,test:function(){for(var e=[],c=arguments.length;c--;)e[c]=arguments[c];if(e=Mc(e,t),"array"===Ec(e)&&3===e.length)return t}})}));var Pc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Dc=b,Hc=d,zc=g.type,$c=Pc,_c=Vt,Vc=zt;Dc.prototype.name=function(){for(var t=Vc(this._rgb,"rgb"),e=0,c=Object.keys($c);e<c.length;e+=1){var r=c[e];if($c[r]===t)return r.toLowerCase()}return t},Hc.format.named=function(t){if(t=t.toLowerCase(),$c[t])return _c($c[t]);throw new Error("unknown color name: "+t)},Hc.autodetect.push({p:5,test:function(t){for(var e=[],c=arguments.length-1;c-- >0;)e[c]=arguments[c+1];if(!e.length&&"string"===zc(t)&&$c[t.toLowerCase()])return"named"}});var Wc=g.unpack,Xc=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=Wc(t,"rgb");return(c[0]<<16)+(c[1]<<8)+c[2]},Uc=Xc,Yc=g.type,qc=function(t){if("number"==Yc(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},Gc=w,jc=b,Kc=d,Zc=g.type,Jc=Uc;jc.prototype.num=function(){return Jc(this._rgb)},Gc.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(jc,[null].concat(t,["num"])))},Kc.format.num=qc,Kc.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===Zc(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var Qc=w,tr=b,er=d,cr=g.unpack,rr=g.type,nr=Math.round;tr.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(nr)},tr.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,c){return c<3?!1===t?e:nr(e):e}))},Qc.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(tr,[null].concat(t,["rgb"])))},er.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=cr(t,"rgba");return void 0===c[3]&&(c[3]=1),c},er.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=cr(t,"rgba"),"array"===rr(t)&&(3===t.length||4===t.length&&"number"==rr(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var ir=Math.log,Cr=function(t){var e,c,r,n=t/100;return n<66?(e=255,c=n<6?0:-155.25485562709179-.44596950469579133*(c=n-2)+104.49216199393888*ir(c),r=n<20?0:.8274096064007395*(r=n-10)-254.76935184120902+115.67994401066147*ir(r)):(e=351.97690566805693+.114206453784165*(e=n-55)-40.25366309332127*ir(e),c=325.4494125711974+.07943456536662342*(c=n-50)-28.0852963507957*ir(c),r=255),[e,c,r,1]},sr=Cr,ar=g.unpack,or=Math.round,lr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var c,r=ar(t,"rgb"),n=r[0],i=r[2],C=1e3,s=4e4,a=.4;s-C>a;){var o=sr(c=.5*(s+C));o[2]/o[0]>=i/n?s=c:C=c}return or(c)},hr=w,ur=b,gr=d,dr=lr;ur.prototype.temp=ur.prototype.kelvin=ur.prototype.temperature=function(){return dr(this._rgb)},hr.temp=hr.kelvin=hr.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(ur,[null].concat(t,["temp"])))},gr.format.temp=gr.format.kelvin=gr.format.temperature=Cr;var fr=g.unpack,pr=Math.cbrt,mr=Math.pow,Or=Math.sign,vr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=fr(t,"rgb"),r=c[0],n=c[1],i=c[2],C=[Nr(r/255),Nr(n/255),Nr(i/255)],s=C[0],a=C[1],o=C[2],l=pr(.4122214708*s+.5363325363*a+.0514459929*o),h=pr(.2119034982*s+.6806995451*a+.1073969566*o),u=pr(.0883024619*s+.2817188376*a+.6299787005*o);return[.2104542553*l+.793617785*h-.0040720468*u,1.9779984951*l-2.428592205*h+.4505937099*u,.0259040371*l+.7827717662*h-.808675766*u]},br=vr;function Nr(t){var e=Math.abs(t);return e<.04045?t/12.92:(Or(t)||1)*mr((e+.055)/1.055,2.4)}var wr=g.unpack,yr=Math.pow,Sr=Math.sign,xr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=(t=wr(t,"lab"))[0],r=t[1],n=t[2],i=yr(c+.3963377774*r+.2158037573*n,3),C=yr(c-.1055613458*r-.0638541728*n,3),s=yr(c-.0894841775*r-1.291485548*n,3);return[255*Fr(4.0767416621*i-3.3077115913*C+.2309699292*s),255*Fr(-1.2684380046*i+2.6097574011*C-.3413193965*s),255*Fr(-.0041960863*i-.7034186147*C+1.707614701*s),t.length>3?t[3]:1]},Ar=xr;function Fr(t){var e=Math.abs(t);return e>.0031308?(Sr(t)||1)*(1.055*yr(e,1/2.4)-.055):12.92*t}var Rr=g.unpack,kr=g.type,Mr=w,Er=b,Tr=d,Ir=br;Er.prototype.oklab=function(){return Ir(this._rgb)},Mr.oklab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Er,[null].concat(t,["oklab"])))},Tr.format.oklab=Ar,Tr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Rr(t,"oklab"),"array"===kr(t)&&3===t.length)return"oklab"}});var Br=g.unpack,Lr=br,Pr=oc,Dr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=Br(t,"rgb"),r=c[0],n=c[1],i=c[2],C=Lr(r,n,i),s=C[0],a=C[1],o=C[2];return Pr(s,a,o)},Hr=Dr,zr=g.unpack,$r=bc,_r=Ar,Vr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var c=(t=zr(t,"lch"))[0],r=t[1],n=t[2],i=$r(c,r,n),C=i[0],s=i[1],a=i[2],o=_r(C,s,a);return[o[0],o[1],o[2],t.length>3?t[3]:1]},Wr=Vr,Xr=g.unpack,Ur=g.type,Yr=w,qr=b,Gr=d,jr=Hr;qr.prototype.oklch=function(){return jr(this._rgb)},Yr.oklch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(qr,[null].concat(t,["oklch"])))},Gr.format.oklch=Wr,Gr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Xr(t,"oklch"),"array"===Ur(t)&&3===t.length)return"oklch"}});var Kr=b,Zr=g.type;Kr.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===Zr(t)?e?(this._rgb[3]=t,this):new Kr([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},b.prototype.clipped=function(){return this._rgb._clipped||!1};var Jr=b,Qr=Le;Jr.prototype.darken=function(t){void 0===t&&(t=1);var e=this,c=e.lab();return c[0]-=Qr.Kn*t,new Jr(c,"lab").alpha(e.alpha(),!0)},Jr.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},Jr.prototype.darker=Jr.prototype.darken,Jr.prototype.brighter=Jr.prototype.brighten,b.prototype.get=function(t){var e=t.split("."),c=e[0],r=e[1],n=this[c]();if(r){var i=c.indexOf(r)-("ok"===c.substr(0,2)?2:0);if(i>-1)return n[i];throw new Error("unknown channel "+r+" in mode "+c)}return n};var tn=b,en=g.type,cn=Math.pow,rn=1e-7,nn=20;tn.prototype.luminance=function(t){if(void 0!==t&&"number"===en(t)){if(0===t)return new tn([0,0,0,this._rgb[3]],"rgb");if(1===t)return new tn([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),c="rgb",r=nn,n=function(e,i){var C=e.interpolate(i,.5,c),s=C.luminance();return Math.abs(t-s)<rn||!r--?C:s>t?n(e,C):n(C,i)},i=(e>t?n(new tn([0,0,0]),this):n(this,new tn([255,255,255]))).rgb();return new tn(i.concat([this._rgb[3]]))}return Cn.apply(void 0,this._rgb.slice(0,3))};var Cn=function(t,e,c){return.2126*(t=sn(t))+.7152*(e=sn(e))+.0722*(c=sn(c))},sn=function(t){return(t/=255)<=.03928?t/12.92:cn((t+.055)/1.055,2.4)},an={},on=b,ln=g.type,hn=an,un=function(t,e,c){void 0===c&&(c=.5);for(var r=[],n=arguments.length-3;n-- >0;)r[n]=arguments[n+3];var i=r[0]||"lrgb";if(hn[i]||r.length||(i=Object.keys(hn)[0]),!hn[i])throw new Error("interpolation mode "+i+" is not defined");return"object"!==ln(t)&&(t=new on(t)),"object"!==ln(e)&&(e=new on(e)),hn[i](t,e,c).alpha(t.alpha()+c*(e.alpha()-t.alpha()))},gn=b,dn=un;gn.prototype.mix=gn.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var c=[],r=arguments.length-2;r-- >0;)c[r]=arguments[r+2];return dn.apply(void 0,[this,t,e].concat(c))};var fn=b;fn.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,c=e[3];return t?(this._rgb=[e[0]*c,e[1]*c,e[2]*c,c],this):new fn([e[0]*c,e[1]*c,e[2]*c,c],"rgb")};var pn=b,mn=Le;pn.prototype.saturate=function(t){void 0===t&&(t=1);var e=this,c=e.lch();return c[1]+=mn.Kn*t,c[1]<0&&(c[1]=0),new pn(c,"lch").alpha(e.alpha(),!0)},pn.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var On=b,vn=g.type;On.prototype.set=function(t,e,c){void 0===c&&(c=!1);var r=t.split("."),n=r[0],i=r[1],C=this[n]();if(i){var s=n.indexOf(i)-("ok"===n.substr(0,2)?2:0);if(s>-1){if("string"==vn(e))switch(e.charAt(0)){case"+":case"-":C[s]+=+e;break;case"*":C[s]*=+e.substr(1);break;case"/":C[s]/=+e.substr(1);break;default:C[s]=+e}else{if("number"!==vn(e))throw new Error("unsupported value for Color.set");C[s]=e}var a=new On(C,n);return c?(this._rgb=a._rgb,this):a}throw new Error("unknown channel "+i+" in mode "+n)}return C};var bn=b,Nn=function(t,e,c){var r=t._rgb,n=e._rgb;return new bn(r[0]+c*(n[0]-r[0]),r[1]+c*(n[1]-r[1]),r[2]+c*(n[2]-r[2]),"rgb")};an.rgb=Nn;var wn=b,yn=Math.sqrt,Sn=Math.pow,xn=function(t,e,c){var r=t._rgb,n=r[0],i=r[1],C=r[2],s=e._rgb,a=s[0],o=s[1],l=s[2];return new wn(yn(Sn(n,2)*(1-c)+Sn(a,2)*c),yn(Sn(i,2)*(1-c)+Sn(o,2)*c),yn(Sn(C,2)*(1-c)+Sn(l,2)*c),"rgb")};an.lrgb=xn;var An=b,Fn=function(t,e,c){var r=t.lab(),n=e.lab();return new An(r[0]+c*(n[0]-r[0]),r[1]+c*(n[1]-r[1]),r[2]+c*(n[2]-r[2]),"lab")};an.lab=Fn;var Rn=b,kn=function(t,e,c,r){var n,i,C,s,a,o,l,h,u,g,d,f,p;return"hsl"===r?(C=t.hsl(),s=e.hsl()):"hsv"===r?(C=t.hsv(),s=e.hsv()):"hcg"===r?(C=t.hcg(),s=e.hcg()):"hsi"===r?(C=t.hsi(),s=e.hsi()):"lch"===r||"hcl"===r?(r="hcl",C=t.hcl(),s=e.hcl()):"oklch"===r&&(C=t.oklch().reverse(),s=e.oklch().reverse()),"h"!==r.substr(0,1)&&"oklch"!==r||(a=(n=C)[0],l=n[1],u=n[2],o=(i=s)[0],h=i[1],g=i[2]),isNaN(a)||isNaN(o)?isNaN(a)?isNaN(o)?f=Number.NaN:(f=o,1!=u&&0!=u||"hsv"==r||(d=h)):(f=a,1!=g&&0!=g||"hsv"==r||(d=l)):f=a+c*(o>a&&o-a>180?o-(a+360):o<a&&a-o>180?o+360-a:o-a),void 0===d&&(d=l+c*(h-l)),p=u+c*(g-u),new Rn("oklch"===r?[p,d,f]:[f,d,p],r)},Mn=kn,En=function(t,e,c){return Mn(t,e,c,"lch")};an.lch=En,an.hcl=En;var Tn=b,In=function(t,e,c){var r=t.num(),n=e.num();return new Tn(r+c*(n-r),"num")};an.num=In;var Bn=kn,Ln=function(t,e,c){return Bn(t,e,c,"hcg")};an.hcg=Ln;var Pn=kn,Dn=function(t,e,c){return Pn(t,e,c,"hsi")};an.hsi=Dn;var Hn=kn,zn=function(t,e,c){return Hn(t,e,c,"hsl")};an.hsl=zn;var $n=kn,_n=function(t,e,c){return $n(t,e,c,"hsv")};an.hsv=_n;var Vn=b,Wn=function(t,e,c){var r=t.oklab(),n=e.oklab();return new Vn(r[0]+c*(n[0]-r[0]),r[1]+c*(n[1]-r[1]),r[2]+c*(n[2]-r[2]),"oklab")};an.oklab=Wn;var Xn=kn,Un=function(t,e,c){return Xn(t,e,c,"oklch")};an.oklch=Un;var Yn=b,qn=g.clip_rgb,Gn=Math.pow,jn=Math.sqrt,Kn=Math.PI,Zn=Math.cos,Jn=Math.sin,Qn=Math.atan2,ti=function(t,e,c){void 0===e&&(e="lrgb"),void 0===c&&(c=null);var r=t.length;c||(c=Array.from(new Array(r)).map((function(){return 1})));var n=r/c.reduce((function(t,e){return t+e}));if(c.forEach((function(t,e){c[e]*=n})),t=t.map((function(t){return new Yn(t)})),"lrgb"===e)return ei(t,c);for(var i=t.shift(),C=i.get(e),s=[],a=0,o=0,l=0;l<C.length;l++)if(C[l]=(C[l]||0)*c[0],s.push(isNaN(C[l])?0:c[0]),"h"===e.charAt(l)&&!isNaN(C[l])){var h=C[l]/180*Kn;a+=Zn(h)*c[0],o+=Jn(h)*c[0]}var u=i.alpha()*c[0];t.forEach((function(t,r){var n=t.get(e);u+=t.alpha()*c[r+1];for(var i=0;i<C.length;i++)if(!isNaN(n[i]))if(s[i]+=c[r+1],"h"===e.charAt(i)){var l=n[i]/180*Kn;a+=Zn(l)*c[r+1],o+=Jn(l)*c[r+1]}else C[i]+=n[i]*c[r+1]}));for(var g=0;g<C.length;g++)if("h"===e.charAt(g)){for(var d=Qn(o/s[g],a/s[g])/Kn*180;d<0;)d+=360;for(;d>=360;)d-=360;C[g]=d}else C[g]=C[g]/s[g];return u/=r,new Yn(C,e).alpha(u>.99999?1:u,!0)},ei=function(t,e){for(var c=t.length,r=[0,0,0,0],n=0;n<t.length;n++){var i=t[n],C=e[n]/c,s=i._rgb;r[0]+=Gn(s[0],2)*C,r[1]+=Gn(s[1],2)*C,r[2]+=Gn(s[2],2)*C,r[3]+=s[3]*C}return r[0]=jn(r[0]),r[1]=jn(r[1]),r[2]=jn(r[2]),r[3]>.9999999&&(r[3]=1),new Yn(qn(r))},ci=w,ri=g.type,ni=Math.pow,ii=function(t){var e="rgb",c=ci("#ccc"),r=0,n=[0,1],i=[],C=[0,0],s=!1,a=[],o=!1,l=0,h=1,u=!1,g={},d=!0,f=1,p=function(t){if((t=t||["#fff","#000"])&&"string"===ri(t)&&ci.brewer&&ci.brewer[t.toLowerCase()]&&(t=ci.brewer[t.toLowerCase()]),"array"===ri(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=ci(t[e]);i.length=0;for(var c=0;c<t.length;c++)i.push(c/(t.length-1))}return N(),a=t},m=function(t){if(null!=s){for(var e=s.length-1,c=0;c<e&&t>=s[c];)c++;return c-1}return 0},O=function(t){return t},v=function(t){return t},b=function(t,r){var n,o;if(null==r&&(r=!1),isNaN(t)||null===t)return c;o=r?t:s&&s.length>2?m(t)/(s.length-2):h!==l?(t-l)/(h-l):1,o=v(o),r||(o=O(o)),1!==f&&(o=ni(o,f)),o=C[0]+o*(1-C[0]-C[1]),o=Math.min(1,Math.max(0,o));var u=Math.floor(1e4*o);if(d&&g[u])n=g[u];else{if("array"===ri(a))for(var p=0;p<i.length;p++){var b=i[p];if(o<=b){n=a[p];break}if(o>=b&&p===i.length-1){n=a[p];break}if(o>b&&o<i[p+1]){o=(o-b)/(i[p+1]-b),n=ci.interpolate(a[p],a[p+1],o,e);break}}else"function"===ri(a)&&(n=a(o));d&&(g[u]=n)}return n},N=function(){return g={}};p(t);var w=function(t){var e=ci(b(t));return o&&e[o]?e[o]():e};return w.classes=function(t){if(null!=t){if("array"===ri(t))s=t,n=[t[0],t[t.length-1]];else{var e=ci.analyze(n);s=0===t?[e.min,e.max]:ci.limits(e,"e",t)}return w}return s},w.domain=function(t){if(!arguments.length)return n;l=t[0],h=t[t.length-1],i=[];var e=a.length;if(t.length===e&&l!==h)for(var c=0,r=Array.from(t);c<r.length;c+=1){var C=r[c];i.push((C-l)/(h-l))}else{for(var s=0;s<e;s++)i.push(s/(e-1));if(t.length>2){var o=t.map((function(e,c){return c/(t.length-1)})),u=t.map((function(t){return(t-l)/(h-l)}));u.every((function(t,e){return o[e]===t}))||(v=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=u[e+1];)e++;var c=(t-u[e])/(u[e+1]-u[e]);return o[e]+c*(o[e+1]-o[e])})}}return n=[l,h],w},w.mode=function(t){return arguments.length?(e=t,N(),w):e},w.range=function(t,e){return p(t),w},w.out=function(t){return o=t,w},w.spread=function(t){return arguments.length?(r=t,w):r},w.correctLightness=function(t){return null==t&&(t=!0),u=t,N(),O=u?function(t){for(var e=b(0,!0).lab()[0],c=b(1,!0).lab()[0],r=e>c,n=b(t,!0).lab()[0],i=e+(c-e)*t,C=n-i,s=0,a=1,o=20;Math.abs(C)>.01&&o-- >0;)r&&(C*=-1),C<0?(s=t,t+=.5*(a-t)):(a=t,t+=.5*(s-t)),n=b(t,!0).lab()[0],C=n-i;return t}:function(t){return t},w},w.padding=function(t){return null!=t?("number"===ri(t)&&(t=[t,t]),C=t,w):C},w.colors=function(e,c){arguments.length<2&&(c="hex");var r=[];if(0===arguments.length)r=a.slice(0);else if(1===e)r=[w(.5)];else if(e>1){var i=n[0],C=n[1]-i;r=Ci(0,e,!1).map((function(t){return w(i+t/(e-1)*C)}))}else{t=[];var o=[];if(s&&s.length>2)for(var l=1,h=s.length,u=1<=h;u?l<h:l>h;u?l++:l--)o.push(.5*(s[l-1]+s[l]));else o=n;r=o.map((function(t){return w(t)}))}return ci[c]&&(r=r.map((function(t){return t[c]()}))),r},w.cache=function(t){return null!=t?(d=t,w):d},w.gamma=function(t){return null!=t?(f=t,w):f},w.nodata=function(t){return null!=t?(c=ci(t),w):c},w};function Ci(t,e,c){for(var r=[],n=t<e,i=c?n?e+1:e-1:e,C=t;n?C<i:C>i;n?C++:C--)r.push(C);return r}var si=b,ai=ii,oi=function(t){for(var e=[1,1],c=1;c<t;c++){for(var r=[1],n=1;n<=e.length;n++)r[n]=(e[n]||0)+e[n-1];e=r}return e},li=function(t){var e,c,r,n,i,C,s;if(2===(t=t.map((function(t){return new si(t)}))).length)e=t.map((function(t){return t.lab()})),i=e[0],C=e[1],n=function(t){var e=[0,1,2].map((function(e){return i[e]+t*(C[e]-i[e])}));return new si(e,"lab")};else if(3===t.length)c=t.map((function(t){return t.lab()})),i=c[0],C=c[1],s=c[2],n=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*i[e]+2*(1-t)*t*C[e]+t*t*s[e]}));return new si(e,"lab")};else if(4===t.length){var a;r=t.map((function(t){return t.lab()})),i=r[0],C=r[1],s=r[2],a=r[3],n=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*i[e]+3*(1-t)*(1-t)*t*C[e]+3*(1-t)*t*t*s[e]+t*t*t*a[e]}));return new si(e,"lab")}}else{if(!(t.length>=5))throw new RangeError("No point in running bezier with only one color.");var o,l,h;o=t.map((function(t){return t.lab()})),h=t.length-1,l=oi(h),n=function(t){var e=1-t,c=[0,1,2].map((function(c){return o.reduce((function(r,n,i){return r+l[i]*Math.pow(e,h-i)*Math.pow(t,i)*n[c]}),0)}));return new si(c,"lab")}}return n},hi=function(t){var e=li(t);return e.scale=function(){return ai(e)},e},ui=w,gi=function(t,e,c){if(!gi[c])throw new Error("unknown blend mode "+c);return gi[c](t,e)},di=function(t){return function(e,c){var r=ui(c).rgb(),n=ui(e).rgb();return ui.rgb(t(r,n))}},fi=function(t){return function(e,c){var r=[];return r[0]=t(e[0],c[0]),r[1]=t(e[1],c[1]),r[2]=t(e[2],c[2]),r}},pi=function(t){return t},mi=function(t,e){return t*e/255},Oi=function(t,e){return t>e?e:t},vi=function(t,e){return t>e?t:e},bi=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},Ni=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},wi=function(t,e){return 255*(1-(1-e/255)/(t/255))},yi=function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t};gi.normal=di(fi(pi)),gi.multiply=di(fi(mi)),gi.screen=di(fi(bi)),gi.overlay=di(fi(Ni)),gi.darken=di(fi(Oi)),gi.lighten=di(fi(vi)),gi.dodge=di(fi(yi)),gi.burn=di(fi(wi));for(var Si=gi,xi=g.type,Ai=g.clip_rgb,Fi=g.TWOPI,Ri=Math.pow,ki=Math.sin,Mi=Math.cos,Ei=w,Ti=function(t,e,c,r,n){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===c&&(c=1),void 0===r&&(r=1),void 0===n&&(n=[0,1]);var i,C=0;"array"===xi(n)?i=n[1]-n[0]:(i=0,n=[n,n]);var s=function(s){var a=Fi*((t+120)/360+e*s),o=Ri(n[0]+i*s,r),l=(0!==C?c[0]+s*C:c)*o*(1-o)/2,h=Mi(a),u=ki(a);return Ei(Ai([255*(o+l*(-.14861*h+1.78277*u)),255*(o+l*(-.29227*h-.90649*u)),255*(o+l*(1.97294*h)),1]))};return s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?r:(r=t,s)},s.hue=function(t){return null==t?c:("array"===xi(c=t)?0==(C=c[1]-c[0])&&(c=c[1]):C=0,s)},s.lightness=function(t){return null==t?n:("array"===xi(t)?(n=t,i=t[1]-t[0]):(n=[t,t],i=0),s)},s.scale=function(){return Ei.scale(s)},s.hue(c),s},Ii=b,Bi="0123456789abcdef",Li=Math.floor,Pi=Math.random,Di=function(){for(var t="#",e=0;e<6;e++)t+=Bi.charAt(Li(16*Pi()));return new Ii(t,"hex")},Hi=s,zi=Math.log,$i=Math.pow,_i=Math.floor,Vi=Math.abs,Wi=function(t,e){void 0===e&&(e=null);var c={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===Hi(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===Hi(t)&&(t=t[e]),null==t||isNaN(t)||(c.values.push(t),c.sum+=t,t<c.min&&(c.min=t),t>c.max&&(c.max=t),c.count+=1)})),c.domain=[c.min,c.max],c.limits=function(t,e){return Xi(c,t,e)},c},Xi=function(t,e,c){void 0===e&&(e="equal"),void 0===c&&(c=7),"array"==Hi(t)&&(t=Wi(t));var r=t.min,n=t.max,i=t.values.sort((function(t,e){return t-e}));if(1===c)return[r,n];var C=[];if("c"===e.substr(0,1)&&(C.push(r),C.push(n)),"e"===e.substr(0,1)){C.push(r);for(var s=1;s<c;s++)C.push(r+s/c*(n-r));C.push(n)}else if("l"===e.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var a=Math.LOG10E*zi(r),o=Math.LOG10E*zi(n);C.push(r);for(var l=1;l<c;l++)C.push($i(10,a+l/c*(o-a)));C.push(n)}else if("q"===e.substr(0,1)){C.push(r);for(var h=1;h<c;h++){var u=(i.length-1)*h/c,g=_i(u);if(g===u)C.push(i[g]);else{var d=u-g;C.push(i[g]*(1-d)+i[g+1]*d)}}C.push(n)}else if("k"===e.substr(0,1)){var f,p=i.length,m=new Array(p),O=new Array(c),v=!0,b=0,N=null;(N=[]).push(r);for(var w=1;w<c;w++)N.push(r+w/c*(n-r));for(N.push(n);v;){for(var y=0;y<c;y++)O[y]=0;for(var S=0;S<p;S++)for(var x=i[S],A=Number.MAX_VALUE,F=void 0,R=0;R<c;R++){var k=Vi(N[R]-x);k<A&&(A=k,F=R),O[F]++,m[S]=F}for(var M=new Array(c),E=0;E<c;E++)M[E]=null;for(var T=0;T<p;T++)null===M[f=m[T]]?M[f]=i[T]:M[f]+=i[T];for(var I=0;I<c;I++)M[I]*=1/O[I];v=!1;for(var B=0;B<c;B++)if(M[B]!==N[B]){v=!0;break}N=M,++b>200&&(v=!1)}for(var L={},P=0;P<c;P++)L[P]=[];for(var D=0;D<p;D++)L[f=m[D]].push(i[D]);for(var H=[],z=0;z<c;z++)H.push(L[z][0]),H.push(L[z][L[z].length-1]);H=H.sort((function(t,e){return t-e})),C.push(H[0]);for(var $=1;$<H.length;$+=2){var _=H[$];isNaN(_)||-1!==C.indexOf(_)||C.push(_)}}return C},Ui={analyze:Wi,limits:Xi},Yi=b,qi=function(t,e){t=new Yi(t),e=new Yi(e);var c=t.luminance(),r=e.luminance();return c>r?(c+.05)/(r+.05):(r+.05)/(c+.05)},Gi=b,ji=Math.sqrt,Ki=Math.pow,Zi=Math.min,Ji=Math.max,Qi=Math.atan2,tC=Math.abs,eC=Math.cos,cC=Math.sin,rC=Math.exp,nC=Math.PI,iC=function(t,e,c,r,n){void 0===c&&(c=1),void 0===r&&(r=1),void 0===n&&(n=1);var i=function(t){return 360*t/(2*nC)},C=function(t){return 2*nC*t/360};t=new Gi(t),e=new Gi(e);var s=Array.from(t.lab()),a=s[0],o=s[1],l=s[2],h=Array.from(e.lab()),u=h[0],g=h[1],d=h[2],f=(a+u)/2,p=(ji(Ki(o,2)+Ki(l,2))+ji(Ki(g,2)+Ki(d,2)))/2,m=.5*(1-ji(Ki(p,7)/(Ki(p,7)+Ki(25,7)))),O=o*(1+m),v=g*(1+m),b=ji(Ki(O,2)+Ki(l,2)),N=ji(Ki(v,2)+Ki(d,2)),w=(b+N)/2,y=i(Qi(l,O)),S=i(Qi(d,v)),x=y>=0?y:y+360,A=S>=0?S:S+360,F=tC(x-A)>180?(x+A+360)/2:(x+A)/2,R=1-.17*eC(C(F-30))+.24*eC(C(2*F))+.32*eC(C(3*F+6))-.2*eC(C(4*F-63)),k=A-x;k=tC(k)<=180?k:A<=x?k+360:k-360,k=2*ji(b*N)*cC(C(k)/2);var M=u-a,E=N-b,T=1+.015*Ki(f-50,2)/ji(20+Ki(f-50,2)),I=1+.045*w,B=1+.015*w*R,L=30*rC(-Ki((F-275)/25,2)),P=-2*ji(Ki(w,7)/(Ki(w,7)+Ki(25,7)))*cC(2*C(L)),D=ji(Ki(M/(c*T),2)+Ki(E/(r*I),2)+Ki(k/(n*B),2)+P*(E/(r*I))*(k/(n*B)));return Ji(0,Zi(100,D))},CC=b,sC=function(t,e,c){void 0===c&&(c="lab"),t=new CC(t),e=new CC(e);var r=t.get(c),n=e.get(c),i=0;for(var C in r){var s=(r[C]||0)-(n[C]||0);i+=s*s}return Math.sqrt(i)},aC=b,oC=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(aC,[null].concat(t))),!0}catch(t){return!1}},lC=w,hC=ii,uC={cool:function(){return hC([lC.hsl(180,1,.9),lC.hsl(250,.7,.4)])},hot:function(){return hC(["#000","#f00","#ff0","#fff"]).mode("rgb")}},gC={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},dC=0,fC=Object.keys(gC);dC<fC.length;dC+=1){var pC=fC[dC];gC[pC.toLowerCase()]=gC[pC]}var mC=gC,OC=w;OC.average=ti,OC.bezier=hi,OC.blend=Si,OC.cubehelix=Ti,OC.mix=OC.interpolate=un,OC.random=Di,OC.scale=ii,OC.analyze=Ui.analyze,OC.contrast=qi,OC.deltaE=iC,OC.distance=sC,OC.limits=Ui.limits,OC.valid=oC,OC.scales=uC,OC.colors=Pc,OC.brewer=mC;var vC=OC;return vC}();const Vt=tt,Wt=$t,Xt=_t;var Ut=class{constructor(t,e,c,r,n=.3,i=0,C=null,s=1,a=!1){if(this.points=t,this.weights=e,this.width=c,this.height=r,this.sigma=n,this.interval=i,this.opacity=s,this.normalized=a,null===C){C=["#c51b7d","#de77ae","#f1b6da","#fde0ef","#ffffff","#e6f5d0","#b8e186","#7fbc41","#4d9221"]}this.colormap=C,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height}setFromArray(t,e){this.points=[],t.forEach((t=>{this.points.push(new Vt(t[0],t[1]))})),this.weights=[],e.forEach((t=>{this.weights.push(t)}))}draw(){let t=[];for(let e=0;e<this.width;e++){let e=[];for(let t=0;t<this.height;t++)e.push(0);t.push(e)}let e=1/(2*this.sigma**2);for(let c=0;c<this.points.length;c++){let r=this.points[c],n=this.weights[c];for(let c=0;c<this.width;c++)for(let i=0;i<this.height;i++){let C=((c-r.x)**2+(i-r.y)**2)*e,s=n*Math.exp(-C);t[c][i]+=s}}let c=1;if(!this.normalized){let e=-Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER;for(let c=0;c<this.width;c++)for(let n=0;n<this.height;n++)t[c][n]<r&&(r=t[c][n]),t[c][n]>e&&(e=t[c][n]);c=Math.max(Math.abs(r),Math.abs(e))}const r=Xt.scale(this.colormap).domain([-1,1]);for(let e=0;e<this.width;e++)for(let n=0;n<this.height;n++){this.normalized||(t[e][n]=t[e][n]/c),0!==this.interval&&(t[e][n]=Math.round(t[e][n]/this.interval)*this.interval);let[i,C,s]=r(t[e][n]).rgb();this.setPixel(new Vt(e,n),i,C,s)}}getImage(t){let e=new Image;e.onload=()=>{this.context.imageSmoothingEnabled=!1,this.context.drawImage(e,0,0,this.width,this.height),t&&t(e)},e.onerror=function(t){console.log(t)},e.src=this.canvas.toDataURL()}getSVG(){return Wt(this.context.getImageData(0,0,this.width,this.height))}setPixel(t,e,c,r){this.context.fillStyle="rgba("+e+","+c+","+r+","+this.opacity+")",this.context.fillRect(t.x,t.y,1,1)}};const Yt=X,qt=nt(),Gt=Lt,jt=Ct,Kt=zt,Zt=bt,Jt=tt,Qt=Ut;var te=class{constructor(t,e=!0){this.preprocessor=new Gt(t),this.opts=this.preprocessor.opts,this.clear=e,this.svgWrapper=null}draw(t,e,c="light",r=null,n=!1,i=[],C=!1){null===e||"svg"===e?((e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttributeNS(null,"width",this.opts.width),e.setAttributeNS(null,"height",this.opts.height)):e instanceof String&&(e=document.getElementById(e));let s={padding:this.opts.padding,compactDrawing:this.opts.compactDrawing};null!==r&&(this.opts.padding+=this.opts.weights.additionalPadding,this.opts.compactDrawing=!1);let a=this.preprocessor;return a.initDraw(t,c,n,i),n||(this.themeManager=new Zt(this.opts.themes,c),(null===this.svgWrapper||this.clear)&&(this.svgWrapper=new Kt(this.themeManager,e,this.opts,this.clear))),a.processGraph(),this.svgWrapper.determineDimensions(a.graph.vertices),this.drawAtomHighlights(a.opts.debug),this.drawEdges(a.opts.debug),this.drawVertices(a.opts.debug),null!==r&&this.drawWeights(r,C),a.opts.debug&&(console.log(a.graph),console.log(a.rings),console.log(a.ringConnections)),this.svgWrapper.constructSvg(),null!==r&&(this.opts.padding=s.padding,this.opts.compactDrawing=s.padding),e}drawCanvas(t,e,c="light",r=!1){let n=null;n="string"==typeof e||e instanceof String?document.getElementById(e):e;let i=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttributeNS(null,"viewBox","0 0 500 500"),i.setAttributeNS(null,"width","500"),i.setAttributeNS(null,"height","500"),i.setAttributeNS(null,"style","visibility: hidden: position: absolute; left: -1000px"),document.body.appendChild(i),this.svgDrawer.draw(t,i,c,r),this.svgDrawer.svgWrapper.toCanvas(n,this.svgDrawer.opts.width,this.svgDrawer.opts.height),document.body.removeChild(i),e}drawAromaticityRing(t){this.svgWrapper.drawRing(t.center.x,t.center.y,t.getSize())}drawEdges(t){let e=this.preprocessor,c=e.graph,r=e.rings,n=Array(this.preprocessor.graph.edges.length);if(n.fill(!1),c.traverseBF(0,(e=>{let r=c.getEdges(e.id);for(var i=0;i<r.length;i++){let e=r[i];n[e]||(n[e]=!0,this.drawEdge(e,t))}})),!this.bridgedRing)for(var i=0;i<r.length;i++){let t=r[i];e.isRingAromatic(t)&&this.drawAromaticityRing(t)}}drawEdge(t,e){let c=this.preprocessor,r=c.opts,n=this.svgWrapper,i=c.graph.edges[t],C=c.graph.vertices[i.sourceId],s=c.graph.vertices[i.targetId],a=C.value.element,o=s.value.element;if(!(C.value.isDrawn&&s.value.isDrawn||"default"!==c.opts.atomVisualization))return;let l=C.position,h=s.position,u=c.getEdgeNormals(i),g=Yt.clone(u);if(g[0].multiplyScalar(10).add(l),g[1].multiplyScalar(10).add(l),"="===i.bondType||"="===c.getRingbondType(C,s)||i.isPartOfAromaticRing&&c.bridgedRing){let t=c.areVerticesInSameRing(C,s),e=c.chooseSide(C,s,g);if(t){let t=c.getLargestOrAromaticCommonRing(C,s).center;u[0].multiplyScalar(r.bondSpacing),u[1].multiplyScalar(r.bondSpacing);let e=null;e=t.sameSideAs(C.position,s.position,Jt.add(l,u[0]))?new jt(Jt.add(l,u[0]),Jt.add(h,u[0]),a,o):new jt(Jt.add(l,u[1]),Jt.add(h,u[1]),a,o),e.shorten(r.bondLength-r.shortBondLength*r.bondLength),i.isPartOfAromaticRing?n.drawLine(e,!0):n.drawLine(e),n.drawLine(new jt(l,h,a,o))}else if(i.center||C.isTerminal()&&s.isTerminal()||0==e.anCount&&e.bnCount>1||0==e.bnCount&&e.anCount>1){this.multiplyNormals(u,r.halfBondSpacing);let t=new jt(Jt.add(l,u[0]),Jt.add(h,u[0]),a,o),e=new jt(Jt.add(l,u[1]),Jt.add(h,u[1]),a,o);n.drawLine(t),n.drawLine(e)}else if(e.sideCount[0]>e.sideCount[1]||e.totalSideCount[0]>e.totalSideCount[1]){this.multiplyNormals(u,r.bondSpacing);let t=new jt(Jt.add(l,u[0]),Jt.add(h,u[0]),a,o);t.shorten(r.bondLength-r.shortBondLength*r.bondLength),n.drawLine(t),n.drawLine(new jt(l,h,a,o))}else if(e.sideCount[0]<e.sideCount[1]||e.totalSideCount[0]<=e.totalSideCount[1]){this.multiplyNormals(u,r.bondSpacing);let t=new jt(Jt.add(l,u[1]),Jt.add(h,u[1]),a,o);t.shorten(r.bondLength-r.shortBondLength*r.bondLength),n.drawLine(t),n.drawLine(new jt(l,h,a,o))}}else if("#"===i.bondType){u[0].multiplyScalar(r.bondSpacing/1.5),u[1].multiplyScalar(r.bondSpacing/1.5);let t=new jt(Jt.add(l,u[0]),Jt.add(h,u[0]),a,o),e=new jt(Jt.add(l,u[1]),Jt.add(h,u[1]),a,o);n.drawLine(t),n.drawLine(e),n.drawLine(new jt(l,h,a,o))}else if("."===i.bondType);else{let t=C.value.isStereoCenter,e=s.value.isStereoCenter;"up"===i.wedge?n.drawWedge(new jt(l,h,a,o,t,e)):"down"===i.wedge?n.drawDashedWedge(new jt(l,h,a,o,t,e)):n.drawLine(new jt(l,h,a,o,t,e))}if(e){let e=Jt.midpoint(l,h);n.drawDebugText(e.x,e.y,"e: "+t)}}drawAtomHighlights(t){let e=this.preprocessor;e.opts;let c=e.graph;e.rings;let r=this.svgWrapper;for(var n=0;n<c.vertices.length;n++){let t=c.vertices[n],C=t.value;for(var i=0;i<e.highlight_atoms.length;i++){let c=e.highlight_atoms[i];C.class===c[0]&&r.drawAtomHighlight(t.position.x,t.position.y,c[1])}}}drawVertices(t){let e=this.preprocessor,c=e.opts,r=e.graph,n=e.rings,i=this.svgWrapper;var C=r.vertices.length;for(C=0;C<r.vertices.length;C++){let e=r.vertices[C],n=e.value,s=0,a=0,o=e.value.bondCount,l=n.element,h=qt.maxBonds[l]-o,u=e.getTextDirection(r.vertices,n.hasAttachedPseudoElements),g=!(!c.terminalCarbons&&"C"===l&&!n.hasAttachedPseudoElements)&&e.isTerminal(),d="C"===n.element;if(r.vertices.length<3&&(d=!1),"N"===n.element&&n.isPartOfAromaticRing&&(h=0),n.bracket&&(h=n.bracket.hcount,s=n.bracket.charge,a=n.bracket.isotope),"allballs"===c.atomVisualization)i.drawBall(e.position.x,e.position.y,l);else if(n.isDrawn&&(!d||n.drawExplicit||g||n.hasAttachedPseudoElements)||1===r.vertices.length)if("default"===c.atomVisualization){let t=n.getAttachedPseudoElements();n.hasAttachedPseudoElements&&r.vertices.length===Object.keys(t).length+1&&(u="right"),i.drawText(e.position.x,e.position.y,l,h,u,g,s,a,r.vertices.length,t)}else"balls"===c.atomVisualization&&i.drawBall(e.position.x,e.position.y,l);else if(2===e.getNeighbourCount()&&1==e.forcePositioned){let t=r.vertices[e.neighbours[0]].position,c=r.vertices[e.neighbours[1]].position,n=Jt.threePointangle(e.position,t,c);Math.abs(Math.PI-n)<.1&&i.drawPoint(e.position.x,e.position.y,l)}if(t){let t="v: "+e.id+" "+Yt.print(n.ringbonds);i.drawDebugText(e.position.x,e.position.y,t)}}if(c.debug)for(C=0;C<n.length;C++){let t=n[C].center;i.drawDebugPoint(t.x,t.y,"r: "+n[C].id)}}drawWeights(t,e){if(t.every((t=>0===t)))return;if(t.length!==this.preprocessor.graph.atomIdxToVertexId.length)throw new Error("The number of weights supplied must be equal to the number of (heavy) atoms in the molecule.");let c=[];for(const t of this.preprocessor.graph.atomIdxToVertexId){let e=this.preprocessor.graph.vertices[t];c.push(new Jt(e.position.x-this.svgWrapper.minX,e.position.y-this.svgWrapper.minY))}let r=new Qt(c,t,this.svgWrapper.drawingWidth,this.svgWrapper.drawingHeight,this.opts.weights.sigma,this.opts.weights.interval,this.opts.weights.colormap,this.opts.weights.opacity,e);r.draw(),this.svgWrapper.addLayer(r.getSVG())}getTotalOverlapScore(){return this.preprocessor.getTotalOverlapScore()}getMolecularFormula(t=null){return this.preprocessor.getMolecularFormula(t)}multiplyNormals(t,e){t[0].multiplyScalar(e),t[1].multiplyScalar(e)}};const ee=te;var ce=class{constructor(t){this.svgDrawer=new ee(t)}draw(t,e,c="light",r=!1,n=[]){let i=null;i="string"==typeof e||e instanceof String?document.getElementById(e):e;let C=document.createElementNS("http://www.w3.org/2000/svg","svg");C.setAttribute("xmlns","http://www.w3.org/2000/svg"),C.setAttributeNS(null,"viewBox","0 0 "+this.svgDrawer.opts.width+" "+this.svgDrawer.opts.height),C.setAttributeNS(null,"width",this.svgDrawer.opts.width+""),C.setAttributeNS(null,"height",this.svgDrawer.opts.height+""),this.svgDrawer.draw(t,C,c,r,n),this.svgDrawer.svgWrapper.toCanvas(i,this.svgDrawer.opts.width,this.svgDrawer.opts.height)}getTotalOverlapScore(){return this.svgDrawer.getTotalOverlapScore()}getMolecularFormula(){this.svgDrawer.getMolecularFormula()}},re=function(){function t(e,c,r,n){this.message=e,this.expected=c,this.found=r,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function c(){this.constructor=t}c.prototype=e.prototype,t.prototype=new c}(t,Error),t.buildMessage=function(t,e){var c={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,c="";for(e=0;e<t.parts.length;e++)c+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+c+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}return"Expected "+function(t){var e,r,n,i=new Array(t.length);for(e=0;e<t.length;e++)i[e]=(n=t[e],c[n.type](n));if(i.sort(),i.length>0){for(e=1,r=1;e<i.length;e++)i[e-1]!==i[e]&&(i[r]=i[e],r++);i.length=r}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:function(e,c){if(c=void 0!==c?c:{},e.split("(").length-1!==e.split(")").length-1)throw Ut("The number of opening parentheses does not match the number of closing parentheses.",0);var r,n,i,C,s={},a={chain:Yt},o=Yt,l=function(t){for(var e=[],c=[],r=0;r<t[1].length;r++)e.push(t[1][r]);for(r=0;r<t[2].length;r++){var n=t[2][r][0]?t[2][r][0]:"-";c.push({bond:n,id:t[2][r][1]})}for(r=0;r<t[3].length;r++)e.push(t[3][r]);for(r=0;r<t[6].length;r++)e.push(t[6][r]);return{atom:t[0],isBracket:!!t[0].element,branches:e,branchCount:e.length,ringbonds:c,ringbondCount:c.length,bond:t[4]?t[4]:"-",next:t[5],hasNext:!!t[5]}},h="(",u=$t("(",!1),g=")",d=$t(")",!1),f=function(t){var e=t[1]?t[1]:"-";return t[2].branchBond=e,t[2]},p=function(t){return t},m=/^[\-=#$:\/\\.]/,O=_t(["-","=","#","$",":","/","\\","."],!1,!1),v=function(t){return t},b="[",N=$t("[",!1),w="se",y=$t("se",!1),S="as",x=$t("as",!1),A="]",F=$t("]",!1),R=function(t){return{isotope:t[1],element:t[2],chirality:t[3],hcount:t[4],charge:t[5],class:t[6]}},k="B",M=$t("B",!1),E="r",T=$t("r",!1),I="C",B=$t("C",!1),L="l",P=$t("l",!1),D=/^[NOPSFI]/,H=_t(["N","O","P","S","F","I"],!1,!1),z=function(t){return t.length>1?t.join(""):t},$=/^[bcnops]/,_=_t(["b","c","n","o","p","s"],!1,!1),V="*",W=$t("*",!1),X=function(t){return t},U=/^[A-Z]/,Y=_t([["A","Z"]],!1,!1),q=/^[a-z]/,G=_t([["a","z"]],!1,!1),j=function(t){return t.join("")},K="%",Z=$t("%",!1),J=/^[1-9]/,Q=_t([["1","9"]],!1,!1),tt=/^[0-9]/,et=_t([["0","9"]],!1,!1),ct=function(t){return 1==t.length?Number(t):Number(t.join("").replace("%",""))},rt="@",nt=$t("@",!1),it="TH",Ct=$t("TH",!1),st=/^[12]/,at=_t(["1","2"],!1,!1),ot="AL",lt=$t("AL",!1),ht="SP",ut=$t("SP",!1),gt=/^[1-3]/,dt=_t([["1","3"]],!1,!1),ft="TB",pt=$t("TB",!1),mt="OH",Ot=$t("OH",!1),vt=function(t){return t[1]?"@"==t[1]?"@@":t[1].join("").replace(",",""):"@"},bt=function(t){return t},Nt="+",wt=$t("+",!1),yt=function(t){return t[1]?"+"!=t[1]?Number(t[1].join("")):2:1},St="-",xt=$t("-",!1),At=function(t){return t[1]?"-"!=t[1]?-Number(t[1].join("")):-2:-1},Ft="H",Rt=$t("H",!1),kt=function(t){return t[1]?Number(t[1]):1},Mt=":",Et=$t(":",!1),Tt=/^[0]/,It=_t(["0"],!1,!1),Bt=function(t){return Number(t[1][0]+t[1][1].join(""))},Lt=function(t){return Number(t.join(""))},Pt=0,Dt=[{line:1,column:1}],Ht=0,zt=[];if("startRule"in c){if(!(c.startRule in a))throw new Error("Can't start parsing from rule \""+c.startRule+'".');o=a[c.startRule]}function $t(t,e){return{type:"literal",text:t,ignoreCase:e}}function _t(t,e,c){return{type:"class",parts:t,inverted:e,ignoreCase:c}}function Vt(t){var c,r=Dt[t];if(r)return r;for(c=t-1;!Dt[c];)c--;for(r={line:(r=Dt[c]).line,column:r.column};c<t;)10===e.charCodeAt(c)?(r.line++,r.column=1):r.column++,c++;return Dt[t]=r,r}function Wt(t,e){var c=Vt(t),r=Vt(e);return{start:{offset:t,line:c.line,column:c.column},end:{offset:e,line:r.line,column:r.column}}}function Xt(t){Pt<Ht||(Pt>Ht&&(Ht=Pt,zt=[]),zt.push(t))}function Ut(e,c){return new t(e,null,null,c)}function Yt(){var t,c,r,n,i,C,a,o,h;if(Pt,t=Pt,c=function(){var t,c;t=Pt,c=function(){var t,c,r,n;t=Pt,c=Pt,66===e.charCodeAt(Pt)?(r=k,Pt++):(r=s,Xt(M));r!==s?(114===e.charCodeAt(Pt)?(n=E,Pt++):(n=s,Xt(T)),n===s&&(n=null),n!==s?c=r=[r,n]:(Pt=c,c=s)):(Pt=c,c=s);c===s&&(c=Pt,67===e.charCodeAt(Pt)?(r=I,Pt++):(r=s,Xt(B)),r!==s?(108===e.charCodeAt(Pt)?(n=L,Pt++):(n=s,Xt(P)),n===s&&(n=null),n!==s?c=r=[r,n]:(Pt=c,c=s)):(Pt=c,c=s),c===s&&(D.test(e.charAt(Pt))?(c=e.charAt(Pt),Pt++):(c=s,Xt(H))));c!==s&&(c=z(c));return t=c,t}(),c===s&&(c=jt())===s&&(c=function(){var t,c,r,n,i,C,a,o,l,h;t=Pt,c=Pt,91===e.charCodeAt(Pt)?(r=b,Pt++):(r=s,Xt(N));r!==s?(n=function(){var t,c,r,n,i;t=Pt,c=Pt,J.test(e.charAt(Pt))?(r=e.charAt(Pt),Pt++):(r=s,Xt(Q));r!==s?(tt.test(e.charAt(Pt))?(n=e.charAt(Pt),Pt++):(n=s,Xt(et)),n===s&&(n=null),n!==s?(tt.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=s,Xt(et)),i===s&&(i=null),i!==s?c=r=[r,n,i]:(Pt=c,c=s)):(Pt=c,c=s)):(Pt=c,c=s);c!==s&&(c=Lt(c));return t=c,t}(),n===s&&(n=null),n!==s?(e.substr(Pt,2)===w?(i=w,Pt+=2):(i=s,Xt(y)),i===s&&(e.substr(Pt,2)===S?(i=S,Pt+=2):(i=s,Xt(x)),i===s&&(i=jt())===s&&(i=function(){var t,c,r,n;t=Pt,c=Pt,U.test(e.charAt(Pt))?(r=e.charAt(Pt),Pt++):(r=s,Xt(Y));r!==s?(q.test(e.charAt(Pt))?(n=e.charAt(Pt),Pt++):(n=s,Xt(G)),n===s&&(n=null),n!==s?c=r=[r,n]:(Pt=c,c=s)):(Pt=c,c=s);c!==s&&(c=j(c));return t=c,t}(),i===s&&(i=Kt()))),i!==s?(C=function(){var t,c,r,n,i,C,a;t=Pt,c=Pt,64===e.charCodeAt(Pt)?(r=rt,Pt++):(r=s,Xt(nt));r!==s?(64===e.charCodeAt(Pt)?(n=rt,Pt++):(n=s,Xt(nt)),n===s&&(n=Pt,e.substr(Pt,2)===it?(i=it,Pt+=2):(i=s,Xt(Ct)),i!==s?(st.test(e.charAt(Pt))?(C=e.charAt(Pt),Pt++):(C=s,Xt(at)),C!==s?n=i=[i,C]:(Pt=n,n=s)):(Pt=n,n=s),n===s&&(n=Pt,e.substr(Pt,2)===ot?(i=ot,Pt+=2):(i=s,Xt(lt)),i!==s?(st.test(e.charAt(Pt))?(C=e.charAt(Pt),Pt++):(C=s,Xt(at)),C!==s?n=i=[i,C]:(Pt=n,n=s)):(Pt=n,n=s),n===s&&(n=Pt,e.substr(Pt,2)===ht?(i=ht,Pt+=2):(i=s,Xt(ut)),i!==s?(gt.test(e.charAt(Pt))?(C=e.charAt(Pt),Pt++):(C=s,Xt(dt)),C!==s?n=i=[i,C]:(Pt=n,n=s)):(Pt=n,n=s),n===s&&(n=Pt,e.substr(Pt,2)===ft?(i=ft,Pt+=2):(i=s,Xt(pt)),i!==s?(J.test(e.charAt(Pt))?(C=e.charAt(Pt),Pt++):(C=s,Xt(Q)),C!==s?(tt.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=s,Xt(et)),a===s&&(a=null),a!==s?n=i=[i,C,a]:(Pt=n,n=s)):(Pt=n,n=s)):(Pt=n,n=s),n===s&&(n=Pt,e.substr(Pt,2)===mt?(i=mt,Pt+=2):(i=s,Xt(Ot)),i!==s?(J.test(e.charAt(Pt))?(C=e.charAt(Pt),Pt++):(C=s,Xt(Q)),C!==s?(tt.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=s,Xt(et)),a===s&&(a=null),a!==s?n=i=[i,C,a]:(Pt=n,n=s)):(Pt=n,n=s)):(Pt=n,n=s)))))),n===s&&(n=null),n!==s?c=r=[r,n]:(Pt=c,c=s)):(Pt=c,c=s);c!==s&&(c=vt(c));return t=c,t}(),C===s&&(C=null),C!==s?(a=function(){var t,c,r,n;t=Pt,c=Pt,72===e.charCodeAt(Pt)?(r=Ft,Pt++):(r=s,Xt(Rt));r!==s?(tt.test(e.charAt(Pt))?(n=e.charAt(Pt),Pt++):(n=s,Xt(et)),n===s&&(n=null),n!==s?c=r=[r,n]:(Pt=c,c=s)):(Pt=c,c=s);c!==s&&(c=kt(c));return t=c,t}(),a===s&&(a=null),a!==s?(o=function(){var t,c;t=Pt,c=function(){var t,c,r,n,i,C;t=Pt,c=Pt,43===e.charCodeAt(Pt)?(r=Nt,Pt++):(r=s,Xt(wt));r!==s?(43===e.charCodeAt(Pt)?(n=Nt,Pt++):(n=s,Xt(wt)),n===s&&(n=Pt,J.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=s,Xt(Q)),i!==s?(tt.test(e.charAt(Pt))?(C=e.charAt(Pt),Pt++):(C=s,Xt(et)),C===s&&(C=null),C!==s?n=i=[i,C]:(Pt=n,n=s)):(Pt=n,n=s)),n===s&&(n=null),n!==s?c=r=[r,n]:(Pt=c,c=s)):(Pt=c,c=s);c!==s&&(c=yt(c));return t=c,t}(),c===s&&(c=function(){var t,c,r,n,i,C;t=Pt,c=Pt,45===e.charCodeAt(Pt)?(r=St,Pt++):(r=s,Xt(xt));r!==s?(45===e.charCodeAt(Pt)?(n=St,Pt++):(n=s,Xt(xt)),n===s&&(n=Pt,J.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=s,Xt(Q)),i!==s?(tt.test(e.charAt(Pt))?(C=e.charAt(Pt),Pt++):(C=s,Xt(et)),C===s&&(C=null),C!==s?n=i=[i,C]:(Pt=n,n=s)):(Pt=n,n=s)),n===s&&(n=null),n!==s?c=r=[r,n]:(Pt=c,c=s)):(Pt=c,c=s);c!==s&&(c=At(c));return t=c,t}());c!==s&&(c=bt(c));return t=c,t}(),o===s&&(o=null),o!==s?(l=function(){var t,c,r,n,i,C,a;t=Pt,c=Pt,58===e.charCodeAt(Pt)?(r=Mt,Pt++):(r=s,Xt(Et));if(r!==s){if(n=Pt,J.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=s,Xt(Q)),i!==s){for(C=[],tt.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=s,Xt(et));a!==s;)C.push(a),tt.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=s,Xt(et));C!==s?n=i=[i,C]:(Pt=n,n=s)}else Pt=n,n=s;n===s&&(Tt.test(e.charAt(Pt))?(n=e.charAt(Pt),Pt++):(n=s,Xt(It))),n!==s?c=r=[r,n]:(Pt=c,c=s)}else Pt=c,c=s;c!==s&&(c=Bt(c));return t=c,t}(),l===s&&(l=null),l!==s?(93===e.charCodeAt(Pt)?(h=A,Pt++):(h=s,Xt(F)),h!==s?c=r=[r,n,i,C,a,o,l,h]:(Pt=c,c=s)):(Pt=c,c=s)):(Pt=c,c=s)):(Pt=c,c=s)):(Pt=c,c=s)):(Pt=c,c=s)):(Pt=c,c=s)):(Pt=c,c=s);c!==s&&(c=R(c));return t=c,t}(),c===s&&(c=Kt()));c!==s&&(c=p(c));return t=c,t}(),c!==s){for(r=[],n=qt();n!==s;)r.push(n),n=qt();if(r!==s){for(n=[],i=Pt,(C=Gt())===s&&(C=null),C!==s&&(a=Zt())!==s?i=C=[C,a]:(Pt=i,i=s);i!==s;)n.push(i),i=Pt,(C=Gt())===s&&(C=null),C!==s&&(a=Zt())!==s?i=C=[C,a]:(Pt=i,i=s);if(n!==s){for(i=[],C=qt();C!==s;)i.push(C),C=qt();if(i!==s)if((C=Gt())===s&&(C=null),C!==s)if((a=Yt())===s&&(a=null),a!==s){for(o=[],h=qt();h!==s;)o.push(h),h=qt();o!==s?t=c=[c,r,n,i,C,a,o]:(Pt=t,t=s)}else Pt=t,t=s;else Pt=t,t=s;else Pt=t,t=s}else Pt=t,t=s}else Pt=t,t=s}else Pt=t,t=s;return t!==s&&(t=l(t)),t}function qt(){var t,c,r,n,i;return Pt,t=Pt,40===e.charCodeAt(Pt)?(c=h,Pt++):(c=s,Xt(u)),c!==s?((r=Gt())===s&&(r=null),r!==s&&(n=Yt())!==s?(41===e.charCodeAt(Pt)?(i=g,Pt++):(i=s,Xt(d)),i!==s?t=c=[c,r,n,i]:(Pt=t,t=s)):(Pt=t,t=s)):(Pt=t,t=s),t!==s&&(t=f(t)),t}function Gt(){var t;if(Pt,m.test(e.charAt(Pt))){if((t=e.charAt(Pt))===e.charAt(Pt+1))throw t=s,Ut("The parser encountered a bond repetition.",Pt+1);Pt++}else t=s,Xt(O);return t!==s&&(t=v(t)),t}function jt(){var t;return Pt,$.test(e.charAt(Pt))?(t=e.charAt(Pt),Pt++):(t=s,Xt(_)),t!==s&&(t=p(t)),t}function Kt(){var t;return Pt,42===e.charCodeAt(Pt)?(t=V,Pt++):(t=s,Xt(W)),t!==s&&(t=X(t)),t}function Zt(){var t,c,r,n;return Pt,t=Pt,37===e.charCodeAt(Pt)?(c=K,Pt++):(c=s,Xt(Z)),c!==s?(J.test(e.charAt(Pt))?(r=e.charAt(Pt),Pt++):(r=s,Xt(Q)),r!==s?(tt.test(e.charAt(Pt))?(n=e.charAt(Pt),Pt++):(n=s,Xt(et)),n!==s?t=c=[c,r,n]:(Pt=t,t=s)):(Pt=t,t=s)):(Pt=t,t=s),t===s&&(tt.test(e.charAt(Pt))?(t=e.charAt(Pt),Pt++):(t=s,Xt(et))),t!==s&&(t=ct(t)),t}if((r=o())!==s&&Pt===e.length)return r;throw r!==s&&Pt<e.length&&Xt({type:"end"}),n=zt,i=Ht<e.length?e.charAt(Ht):null,C=Ht<e.length?Wt(Ht,Ht+1):Wt(Ht,Ht),new t(t.buildMessage(n,i),n,i,C)}}}();const ne=re;const ie=class{constructor(t){this.reactantsSmiles=[],this.reagentsSmiles=[],this.productsSmiles=[],this.reactantsWeights=[],this.reagentsWeights=[],this.productsWeights=[],this.reactants=[],this.reagents=[],this.products=[];let e=t.split(">");if(3!==e.length)throw new Error("Invalid reaction SMILES. Did you add fewer than or more than two '>'?");""!==e[0]&&(this.reactantsSmiles=e[0].split(".")),""!==e[1]&&(this.reagentsSmiles=e[1].split(".")),""!==e[2]&&(this.productsSmiles=e[2].split("."));for(var c=0;c<this.reactantsSmiles.length;c++)this.reactants.push(ne.parse(this.reactantsSmiles[c]));for(c=0;c<this.reagentsSmiles.length;c++)this.reagents.push(ne.parse(this.reagentsSmiles[c]));for(c=0;c<this.productsSmiles.length;c++)this.products.push(ne.parse(this.productsSmiles[c]))}};var Ce=class{static parse(t){return new ie(t)}};const se=te,ae=zt,oe=Nt,le=bt,he={C2H4O2:"acetic acid",C3H6O:"acetone",C2H3N:"acetonitrile",C6H6:"benzene",CCl4:"carbon tetrachloride",C6H5Cl:"chlorobenzene",CHCl3:"chloroform",C6H12:"cyclohexane",C2H4Cl2:"1,2-dichloroethane",C4H10O3:"diethylene glycol",C6H14O3:"diglyme",C4H10O2:"DME",C3H7NO:"DMF",C2H6OS:"DMSO",C2H6O:"ethanol",C2H6O2:"ethylene glycol",C3H8O3:"glycerin",C7H16:"heptane",C6H18N3OP:"HMPA",C6H18N3P:"HMPT",C6H14:"hexane",CH4O:"methanol",C5H12O:"MTBE",CH2Cl2:"methylene chloride",CH5H9NO:"NMP",CH3NO2:"nitromethane",C5H12:"pentane",C5H5N:"pyridine",C7H8:"toluene",C6H15N:"triethyl amine",H2O:"water"};var ue=class{constructor(t,e){this.defaultOptions={scale:e.scale>0?e.scale:1,fontSize:.8*e.fontSizeLarge,fontFamily:"Arial, Helvetica, sans-serif",spacing:10,plus:{size:9,thickness:1},arrow:{length:4*e.bondLength,headSize:6,thickness:1,margin:3},weights:{normalize:!1}},this.opts=oe.extend(!0,this.defaultOptions,t),this.drawer=new se(e),this.molOpts=this.drawer.opts}draw(t,e,c="light",r=null,n="{reagents}",i="",C=!1){if(this.themeManager=new le(this.molOpts.themes,c),this.opts.weights.normalize){let t=-Number.MAX_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER;if(r.hasOwnProperty("reactants"))for(let c=0;c<r.reactants.length;c++)for(let n=0;n<r.reactants[c].length;n++)r.reactants[c][n]<e&&(e=r.reactants[c][n]),r.reactants[c][n]>t&&(t=r.reactants[c][n]);if(r.hasOwnProperty("reagents"))for(let c=0;c<r.reagents.length;c++)for(let n=0;n<r.reagents[c].length;n++)r.reagents[c][n]<e&&(e=r.reagents[c][n]),r.reagents[c][n]>t&&(t=r.reagents[c][n]);if(r.hasOwnProperty("products"))for(let c=0;c<r.products.length;c++)for(let n=0;n<r.products[c].length;n++)r.products[c][n]<e&&(e=r.products[c][n]),r.products[c][n]>t&&(t=r.products[c][n]);let c=Math.max(Math.abs(e),Math.abs(t));if(0===c&&(c=1),r.hasOwnProperty("reactants"))for(let t=0;t<r.reactants.length;t++)for(let e=0;e<r.reactants[t].length;e++)r.reactants[t][e]/=c;if(r.hasOwnProperty("reagents"))for(let t=0;t<r.reagents.length;t++)for(let e=0;e<r.reagents[t].length;e++)r.reagents[t][e]/=c;if(r.hasOwnProperty("products"))for(let t=0;t<r.products.length;t++)for(let e=0;e<r.products[t].length;e++)r.products[t][e]/=c}let s=null;for(null===e||"svg"===e?(s=document.createElementNS("http://www.w3.org/2000/svg","svg"),s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttributeNS(null,"width","500"),s.setAttributeNS(null,"height","500")):s="string"==typeof e||e instanceof String?document.getElementById(e):e;s.firstChild;)s.removeChild(s.firstChild);let a=[],o=0;for(var l=0;l<t.reactants.length;l++){l>0&&a.push({width:this.opts.plus.size*this.opts.scale,height:this.opts.plus.size*this.opts.scale,svg:this.getPlus()});let e=null;r&&r.hasOwnProperty("reactants")&&r.reactants.length>l&&(e=r.reactants[l]);let n=document.createElementNS("http://www.w3.org/2000/svg","svg");this.drawer.draw(t.reactants[l],n,c,e,C,[],this.opts.weights.normalize);let i={width:n.viewBox.baseVal.width*this.opts.scale,height:n.viewBox.baseVal.height*this.opts.scale,svg:n};a.push(i),i.height>o&&(o=i.height)}a.push({width:this.opts.arrow.length*this.opts.scale,height:2*this.opts.arrow.headSize*this.opts.scale,svg:this.getArrow()});let h="";for(l=0;l<t.reagents.length;l++){l>0&&(h+=", ");let e=this.drawer.getMolecularFormula(t.reagents[l]);e in he&&(e=he[e]),h+=ae.replaceNumbersWithSubscript(e)}n=n.replace("{reagents}",h);const u=ae.writeText(n,this.themeManager,this.opts.fontSize*this.opts.scale,this.opts.fontFamily,this.opts.arrow.length*this.opts.scale);let g=(this.opts.arrow.length*this.opts.scale-u.width)/2;a.push({svg:u.svg,height:u.height,width:this.opts.arrow.length*this.opts.scale,offsetX:-(this.opts.arrow.length*this.opts.scale+this.opts.spacing)+g,offsetY:-u.height/2-this.opts.arrow.margin,position:"relative"});const d=ae.writeText(i,this.themeManager,this.opts.fontSize*this.opts.scale,this.opts.fontFamily,this.opts.arrow.length*this.opts.scale);g=(this.opts.arrow.length*this.opts.scale-d.width)/2,a.push({svg:d.svg,height:d.height,width:this.opts.arrow.length*this.opts.scale,offsetX:-(this.opts.arrow.length*this.opts.scale+this.opts.spacing)+g,offsetY:d.height/2+this.opts.arrow.margin,position:"relative"});for(l=0;l<t.products.length;l++){l>0&&a.push({width:this.opts.plus.size*this.opts.scale,height:this.opts.plus.size*this.opts.scale,svg:this.getPlus()});let e=null;r&&r.hasOwnProperty("products")&&r.products.length>l&&(e=r.products[l]);let n=document.createElementNS("http://www.w3.org/2000/svg","svg");this.drawer.draw(t.products[l],n,c,e,C,[],this.opts.weights.normalize);let i={width:n.viewBox.baseVal.width*this.opts.scale,height:n.viewBox.baseVal.height*this.opts.scale,svg:n};a.push(i),i.height>o&&(o=i.height)}let f=0;return a.forEach((t=>{let e=t.offsetX??0,c=t.offsetY??0;t.svg.setAttributeNS(null,"x",Math.round(f+e)),t.svg.setAttributeNS(null,"y",Math.round((o-t.height)/2+c)),t.svg.setAttributeNS(null,"width",Math.round(t.width)),t.svg.setAttributeNS(null,"height",Math.round(t.height)),s.appendChild(t.svg),"relative"!==t.position&&(f+=Math.round(t.width+this.opts.spacing+e))})),s.setAttributeNS(null,"viewBox",`0 0 ${f} ${o}`),s.style.width=f+"px",s.style.height=o+"px",s}getPlus(){let t=this.opts.plus.size,e=this.opts.plus.thickness,c=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=document.createElementNS("http://www.w3.org/2000/svg","rect");return c.setAttributeNS(null,"id","plus"),r.setAttributeNS(null,"x",0),r.setAttributeNS(null,"y",t/2-e/2),r.setAttributeNS(null,"width",t),r.setAttributeNS(null,"height",e),r.setAttributeNS(null,"fill",this.themeManager.getColor("C")),n.setAttributeNS(null,"x",t/2-e/2),n.setAttributeNS(null,"y",0),n.setAttributeNS(null,"width",e),n.setAttributeNS(null,"height",t),n.setAttributeNS(null,"fill",this.themeManager.getColor("C")),c.appendChild(r),c.appendChild(n),c.setAttributeNS(null,"viewBox",`0 0 ${t} ${t}`),c}getArrowhead(){let t=this.opts.arrow.headSize,e=document.createElementNS("http://www.w3.org/2000/svg","marker"),c=document.createElementNS("http://www.w3.org/2000/svg","polygon");return e.setAttributeNS(null,"id","arrowhead"),e.setAttributeNS(null,"viewBox",`0 0 ${t} ${t}`),e.setAttributeNS(null,"markerUnits","userSpaceOnUse"),e.setAttributeNS(null,"markerWidth",t),e.setAttributeNS(null,"markerHeight",t),e.setAttributeNS(null,"refX",0),e.setAttributeNS(null,"refY",t/2),e.setAttributeNS(null,"orient","auto"),e.setAttributeNS(null,"fill",this.themeManager.getColor("C")),c.setAttributeNS(null,"points",`0 0, ${t} ${t/2}, 0 ${t}`),e.appendChild(c),e}getCDArrowhead(){let t=this.opts.arrow.headSize,e=t*(7/4.5),c=document.createElementNS("http://www.w3.org/2000/svg","marker"),r=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttributeNS(null,"id","arrowhead"),c.setAttributeNS(null,"viewBox",`0 0 ${e} ${t}`),c.setAttributeNS(null,"markerUnits","userSpaceOnUse"),c.setAttributeNS(null,"markerWidth",2*e),c.setAttributeNS(null,"markerHeight",2*t),c.setAttributeNS(null,"refX",2.2),c.setAttributeNS(null,"refY",2.2),c.setAttributeNS(null,"orient","auto"),c.setAttributeNS(null,"fill",this.themeManager.getColor("C")),r.setAttributeNS(null,"style","fill-rule:nonzero;"),r.setAttributeNS(null,"d","m 0 0 l 7 2.25 l -7 2.25 c 0 0 0.735 -1.084 0.735 -2.28 c 0 -1.196 -0.735 -2.22 -0.735 -2.22 z"),c.appendChild(r),c}getArrow(){let t=this.opts.arrow.headSize,e=this.opts.arrow.length,c=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","defs"),n=document.createElementNS("http://www.w3.org/2000/svg","line");return r.appendChild(this.getCDArrowhead()),c.appendChild(r),c.setAttributeNS(null,"id","arrow"),n.setAttributeNS(null,"x1",0),n.setAttributeNS(null,"y1",-this.opts.arrow.thickness/2),n.setAttributeNS(null,"x2",e),n.setAttributeNS(null,"y2",-this.opts.arrow.thickness/2),n.setAttributeNS(null,"stroke-width",this.opts.arrow.thickness),n.setAttributeNS(null,"stroke",this.themeManager.getColor("C")),n.setAttributeNS(null,"marker-end","url(#arrowhead)"),c.appendChild(n),c.setAttributeNS(null,"viewBox",`0 ${-t/2} ${e+t*(7/4.5)} ${t}`),c}};const ge=re,de=Ce,fe=te,pe=ue,me=zt,Oe=Nt;var ve=class t{constructor(t={},e={}){this.drawer=new fe(t),this.reactionDrawer=new pe(e,JSON.parse(JSON.stringify(this.drawer.opts)))}static apply(e={},c={},r="data-smiles",n="light",i=null,C=null){new t(e,c).apply(r,n,i,C)}apply(e="data-smiles",c="light",r=null,n=null){document.querySelectorAll(`[${e}]`).forEach((i=>{let C=i.getAttribute(e);if(null===C)throw Error("No SMILES provided.");let s=c,a=null;if(i.hasAttribute("data-smiles-theme")&&(s=i.getAttribute("data-smiles-theme")),i.hasAttribute("data-smiles-weights")&&(a=i.getAttribute("data-smiles-weights").split(",").map(parseFloat)),(i.hasAttribute("data-smiles-reactant-weights")||i.hasAttribute("data-smiles-reagent-weights")||i.hasAttribute("data-smiles-product-weights"))&&(a={reactants:[],reagents:[],products:[]},i.hasAttribute("data-smiles-reactant-weights")&&(a.reactants=i.getAttribute("data-smiles-reactant-weights").split(";").map((t=>t.split(",").map(parseFloat)))),i.hasAttribute("data-smiles-reagent-weights")&&(a.reagents=i.getAttribute("data-smiles-reagent-weights").split(";").map((t=>t.split(",").map(parseFloat)))),i.hasAttribute("data-smiles-product-weights")&&(a.products=i.getAttribute("data-smiles-product-weights").split(";").map((t=>t.split(",").map(parseFloat))))),i.hasAttribute("data-smiles-options")||i.hasAttribute("data-smiles-reaction-options")){let e={};i.hasAttribute("data-smiles-options")&&(e=JSON.parse(i.getAttribute("data-smiles-options").replaceAll("'",'"')));let c={};i.hasAttribute("data-smiles-reaction-options")&&(c=JSON.parse(i.getAttribute("data-smiles-reaction-options").replaceAll("'",'"'))),new t(e,c).draw(C,i,s,r,n,a)}else this.draw(C,i,s,r,n,a)}))}draw(t,e,c="light",r=null,n=null,i=null){let C=[];[t,...C]=t.split(" ");let s=C.join(" "),a={};if(s.includes("__")){let t=s.substring(s.indexOf("__")+2,s.lastIndexOf("__"));a=JSON.parse(t.replaceAll("'",'"'))}if(a=Oe.extend(!0,{textAboveArrow:"{reagents}",textBelowArrow:""},a),t.includes(">"))try{this.drawReaction(t,e,c,a,i,r)}catch(t){n?n(t):console.error(t)}else try{this.drawMolecule(t,e,c,i,r)}catch(t){n?n(t):console.error(t)}}drawMolecule(t,e,c,r,n){let i=ge.parse(t);if(null===e||"svg"===e){let t=this.drawer.draw(i,null,c,r),e=this.getDimensions(t);t.setAttributeNS(null,"width",""+e.w),t.setAttributeNS(null,"height",""+e.h),n&&n(t)}else if("canvas"===e){let t=this.svgToCanvas(this.drawer.draw(i,null,c,r));n&&n(t)}else if("img"===e){let t=this.svgToImg(this.drawer.draw(i,null,c,r));n&&n(t)}else if(e instanceof HTMLImageElement)this.svgToImg(this.drawer.draw(i,null,c,r),e),n&&n(e);else if(e instanceof SVGElement)this.drawer.draw(i,e,c,r),n&&n(e);else{document.querySelectorAll(e).forEach((t=>{let e=t.nodeName.toLowerCase();"svg"===e?(this.drawer.draw(i,t,c,r),n&&n(t)):"canvas"===e?(this.svgToCanvas(this.drawer.draw(i,null,c,r),t),n&&n(t)):"img"===e&&(this.svgToImg(this.drawer.draw(i,null,c,r),t),n&&n(t))}))}}drawReaction(t,e,c,r,n,i){let C=de.parse(t);if(null===e||"svg"===e){let t=this.reactionDrawer.draw(C,null,c),e=this.getDimensions(t);t.setAttributeNS(null,"width",""+e.w),t.setAttributeNS(null,"height",""+e.h),i&&i(t)}else if("canvas"===e){let t=this.svgToCanvas(this.reactionDrawer.draw(C,null,c,n,r.textAboveArrow,r.textBelowArrow));i&&i(t)}else if("img"===e){let t=this.svgToImg(this.reactionDrawer.draw(C,null,c,n,r.textAboveArrow,r.textBelowArrow));i&&i(t)}else if(e instanceof HTMLImageElement)this.svgToImg(this.reactionDrawer.draw(C,null,c,n,r.textAboveArrow,r.textBelowArrow),e),i&&i(e);else if(e instanceof SVGElement)this.reactionDrawer.draw(C,e,c,n,r.textAboveArrow,r.textBelowArrow),i&&i(e);else{document.querySelectorAll(e).forEach((t=>{let e=t.nodeName.toLowerCase();"svg"===e?(this.reactionDrawer.draw(C,t,c,n,r.textAboveArrow,r.textBelowArrow),this.reactionDrawer.opts.scale<=0&&(t.style.width=null,t.style.height=null),i&&i(t)):"canvas"===e?(this.svgToCanvas(this.reactionDrawer.draw(C,null,c,n,r.textAboveArrow,r.textBelowArrow),t),i&&i(t)):"img"===e&&(this.svgToImg(this.reactionDrawer.draw(C,null,c,n,r.textAboveArrow,r.textBelowArrow),t),i&&i(t))}))}}svgToCanvas(t,e=null){null===e&&(e=document.createElement("canvas"));let c=this.getDimensions(e,t);return me.svgToCanvas(t,e,c.w,c.h),e}svgToImg(t,e=null){null===e&&(e=document.createElement("img"));let c=this.getDimensions(e,t);return me.svgToImg(t,e,c.w,c.h),e}getDimensions(t,e=null){let c=this.drawer.opts.width,r=this.drawer.opts.height;return this.drawer.opts.scale<=0?(null===c&&(c=t.width),null===r&&(r=t.height),""!==t.style.width&&(c=parseInt(t.style.width)),""!==t.style.height&&(r=parseInt(t.style.height))):e&&(c=parseFloat(e.style.width),r=parseFloat(e.style.height)),{w:c,h:r}}};const be=ce,Ne=re,we=Ce,ye=te,Se=ue,xe=ve,Ae=Ut;var Fe=!("undefined"==typeof window||!window.document||!window.document.createElement),Re={Version:"1.0.0"};Re.Drawer=be,Re.Parser=Ne,Re.SvgDrawer=ye,Re.ReactionDrawer=Se,Re.ReactionParser=we,Re.GaussDrawer=Ae,Re.clean=function(t){return t.replace(/[^A-Za-z0-9@\.\+\-\?!\(\)\[\]\{\}/\\=#\$:\*]/g,"")},Re.apply=function(t,e="canvas[data-smiles]",c="light",r=null){let n=new be(t),i=document.querySelectorAll(e);for(var C=0;C<i.length;C++){let t=i[C];Re.parse(t.getAttribute("data-smiles"),(function(e){n.draw(e,t,c,!1)}),(function(t){r&&r(t)}))}},Re.parse=function(t,e,c){try{e&&e(Ne.parse(t))}catch(t){c&&c(t)}},Re.parseReaction=function(t,e,c){try{e&&e(we.parse(t))}catch(t){c&&c(t)}},Fe&&(window.SmilesDrawer=Re,window.SmiDrawer=xe),Re.SmiDrawer=xe,Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),c=e.length>>>0,r=arguments[1]>>0,n=r<0?Math.max(c+r,0):Math.min(r,c),i=arguments[2],C=void 0===i?c:i>>0,s=C<0?Math.max(c+C,0):Math.min(C,c);n<s;)e[n]=t,n++;return e}});var ke=Re;function Me(e){let c,r;return{c(){var t;c=l("div"),t="svg",r=document.createElementNS("http://www.w3.org/2000/svg",t),d(r,"data-smiles",e[0]),d(r,"class","svelte-7bs7sp"),m(r,"small",e[1])},m(t,n){s(t,c,n),C(c,r),e[3](r)},p(t,[e]){1&e&&d(r,"data-smiles",t[0]),2&e&&m(r,"small",t[1])},i:t,o:t,d(t){t&&a(c),e[3](null)}}}function Ee(t,e,c){let{smiles:r="CCCCCCC"}=e,{small:n=!1}=e;const i={width:n?200:400,height:300};let C,s=new ke.SvgDrawer(i);return b((()=>{c(2,C.innerHTML="",C),ke.parse(r,(function(t){s.draw(t,C,"dark")}))})),t.$$set=t=>{"smiles"in t&&c(0,r=t.smiles),"small"in t&&c(1,n=t.small)},[r,n,C,function(t){w[t?"unshift":"push"]((()=>{C=t,c(2,C)}))}]}class Te extends W{constructor(t){super(),V(this,t,Ee,Me,i,{smiles:0,small:1})}}function Ie(t,e,c){const r=t.slice();return r[6]=e[c],r}function Be(t){let e,c,r,n,i,o=t[5][t[3]]+"";return n=new Te({props:{smiles:t[1]}}),{c(){e=l("div"),c=h(o),r=u(),H(n.$$.fragment),d(e,"class","plus svelte-s7kr30")},m(t,a){s(t,e,a),C(e,c),s(t,r,a),z(n,t,a),i=!0},p(t,e){(!i||8&e)&&o!==(o=t[5][t[3]]+"")&&f(c,o);const r={};2&e&&(r.smiles=t[1]),n.$set(r)},i(t){i||(P(n.$$.fragment,t),i=!0)},o(t){D(n.$$.fragment,t),i=!1},d(t){t&&a(e),t&&a(r),$(n,t)}}}function Le(t){let e,c;return e=new Te({props:{smiles:t[2]}}),{c(){H(e.$$.fragment)},m(t,r){z(e,t,r),c=!0},p(t,c){const r={};4&c&&(r.smiles=t[2]),e.$set(r)},i(t){c||(P(e.$$.fragment,t),c=!0)},o(t){D(e.$$.fragment,t),c=!1},d(t){$(e,t)}}}function Pe(t){let e,c,r=t[2],n=[];for(let e=0;e<r.length;e+=1)n[e]=De(Ie(t,r,e));const i=t=>D(n[t],1,1,(()=>{n[t]=null}));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=h("")},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);s(t,e,r),c=!0},p(t,c){if(4&c){let C;for(r=t[2],C=0;C<r.length;C+=1){const i=Ie(t,r,C);n[C]?(n[C].p(i,c),P(n[C],1)):(n[C]=De(i),n[C].c(),P(n[C],1),n[C].m(e.parentNode,e))}for(B(),C=r.length;C<n.length;C+=1)i(C);L()}},i(t){if(!c){for(let t=0;t<r.length;t+=1)P(n[t]);c=!0}},o(t){n=n.filter(Boolean);for(let t=0;t<n.length;t+=1)D(n[t]);c=!1},d(t){o(n,t),t&&a(e)}}}function De(t){let e,c;return e=new Te({props:{smiles:t[6],small:!0}}),{c(){H(e.$$.fragment)},m(t,r){z(e,t,r),c=!0},p(t,c){const r={};4&c&&(r.smiles=t[6]),e.$set(r)},i(t){c||(P(e.$$.fragment,t),c=!0)},o(t){D(e.$$.fragment,t),c=!1},d(t){$(e,t)}}}function He(t){let e,c,r,n,i,o,h,g,f;c=new Te({props:{smiles:t[0]}});let p=t[1]&&Be(t);const m=[Pe,Le],O=[];function v(t,e){return t[4]?0:1}return h=v(t),g=O[h]=m[h](t),{c(){e=l("div"),H(c.$$.fragment),r=u(),p&&p.c(),n=u(),i=l("div"),i.innerHTML='<span class="text svelte-s7kr30"></span>',o=u(),g.c(),d(i,"class","arrow svelte-s7kr30"),d(e,"class","equation svelte-s7kr30")},m(t,a){s(t,e,a),z(c,e,null),C(e,r),p&&p.m(e,null),C(e,n),C(e,i),C(e,o),O[h].m(e,null),f=!0},p(t,[r]){const i={};1&r&&(i.smiles=t[0]),c.$set(i),t[1]?p?(p.p(t,r),2&r&&P(p,1)):(p=Be(t),p.c(),P(p,1),p.m(e,n)):p&&(B(),D(p,1,1,(()=>{p=null})),L());let C=h;h=v(t),h===C?O[h].p(t,r):(B(),D(O[C],1,1,(()=>{O[C]=null})),L(),g=O[h],g?g.p(t,r):(g=O[h]=m[h](t),g.c()),P(g,1),g.m(e,null))},i(t){f||(P(c.$$.fragment,t),P(p),P(g),f=!0)},o(t){D(c.$$.fragment,t),D(p),D(g),f=!1},d(t){t&&a(e),$(c),p&&p.d(),O[h].d()}}}function ze(t,e,c){let r,{left:n}=e,{right:i}=e,{result:C}=e,{type:s}=e;return t.$$set=t=>{"left"in t&&c(0,n=t.left),"right"in t&&c(1,i=t.right),"result"in t&&c(2,C=t.result),"type"in t&&c(3,s=t.type)},t.$$.update=()=>{4&t.$$.dirty&&c(4,r=Array.isArray(C))},[n,i,C,s,r,{add:"+",sub:"-"}]}class $e extends W{constructor(t){super(),V(this,t,ze,He,i,{left:0,right:1,result:2,type:3})}}var _e=[{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CC(C)(C)c1ccc(C(=O)Nc2ccccc2O)c(c1)C(C)(C)","CC(C)(C)c1ccc(OCCN(C)C)c(c1)C(C)(C)","CC(C)(C)c1ccc(OCCNC(=O)c2ccccc2F)c(c1)C(C)(C)","CC(C)(C)c1ccc(O)nc1N(C)C(=O)CC2CC2","CC(C)(C)c1ccc(O)c(c1)NC(=O)C(C)(C)C"],model:"gpt-3.5-turbo",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["Cc1ccccc1C=C","Cc1cccc(C#N)c1","Cc1cccc(C=O)c1","Cc1cccc(C=CCN)c1","Cc1ccccc1C(CC)C"],model:"gpt-3.5-turbo",type:"mutate"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:["CCOC(=O)N1CCC(CC1)c2cccnc2","CCNC(=O)c1ccc(cc1)Nc2nccc(n2)c3cccnc3","CC(C)Nc1ccccc1Nc2nccc(n2)c3cccnc3","CC(C)NC(=O)c1ccc(cc1)Nc2nccc(n2)c3cccnc3","CC(C)Nc1ccc(cc1)Nc2nccc(n2)c3cccnc3"],model:"gpt-3.5-turbo",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["O=C(C)Oc1ccccc1C(=O)N","O=C(C)Oc1ccccc1C(=O)N(C)C","O=C(C)Oc1ccccc1C(=O)OC","O=C(C)Oc1ccc(Cl)cc1C(=O)O","O=C(C)Oc1ccccc1C#N"],model:"gpt-3.5-turbo",type:"mutate"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:["C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12","CC1=C(OCCOCCN=C2C3=CC=CC=C3C(OCCOCC)=C2)C=CC(=C1)[N+]([O-])=O","CCCC(C)(C)C(=O)NC1=NN=C(C2=C1C=CC=C2)C(F)(F)F","COP(=O)(CC)OC1C2=CC=CC=C2C(=O)NC2=NC=C(N=C12)N","CC(=O)N[C@@H](CC1=CC=C(O)C=C1)C(=O)NC1=CN=C(N=C1)C1=CC=CC=C1"],model:"gpt-3.5-turbo",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C\\C=C\\c1ccccc1",type:"add",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)C/C=C/c2ccccc2)c1",right:"Cc1cccc(C=C)c1",result:"CCCC1=CC=C(C=C1)C",type:"sub",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C can be combined to form CC(C)(C)c1ccc(O)c(c1)C(C)(C)CNc2cccnc2NC(=O)c3ccc(cc3)CN4CCN(CC4)C",type:"add",model:"gpt-3.5-turbo"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CCC1=CC=C(NC(=O)C2=CC=C(CN3CCN(C)CC3)C=C2)C=C1N1C=CC=C2C(NC3=NC=C(N3)C3=CC=CC=N3)=NC=CN12",type:"sub",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)COC(=O)c1ccccc1C(=O)O",type:"add",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)COC(=O)c2ccccc2C(=O)O)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1C(=O)O - CC(C)(C)c1ccc(O)c(C(C)(C)COC(=O)c2ccccc2C(=O)O)c1  O=C(C)Oc1ccccc1C(=O)OCC(C)(C)c1ccc(O)c(C(C)(C)COC(=O)c2ccccc2C(=O)O)c1",type:"sub",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"  [Si]1(C)(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]1(C)(C))C2N=C(F)C(F)=NC12",type:"add",model:"gpt-3.5-turbo"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"c1ccc(C=C)c(C)c1Nc2nccc(n2)c3cccnc3NC(=O)c4ccc(CN5CCN(CC5)C)c(c4)C",type:"add",model:"gpt-3.5-turbo"},{left:"C=Cc1cccc(Nc2nccc(-c3cccnc3NC(=O)c3ccc(CN4CCN(C)CC4)c(C)c3)n2)c1C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CCc1ccc(C(=O)N2CCN(CC2)c2cccc(NC(=O)c3ccc(cc3)N3CCN(CC3)C)c2)c(C)c1",type:"sub",model:"gpt-3.5-turbo"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"",type:"add",model:"gpt-3.5-turbo"},{left:"",right:"O=C(C)Oc1ccccc1C(=O)O",result:"OC(=O)c1ccccc1C(=O)O",type:"sub",model:"gpt-3.5-turbo"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"gpt-3.5-turbo"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"",type:"sub",model:"gpt-3.5-turbo"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1C(=O)O",type:"add",model:"gpt-3.5-turbo"},{left:"CC(=O)Oc1ccccc1C(=O)O",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(=O)O",type:"sub",model:"gpt-3.5-turbo"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"gpt-3.5-turbo"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"",type:"sub",model:"gpt-3.5-turbo"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"[Si]12(CC(OC(C)=O)cccc1)C(C)(C)C(OCCOC1=CC=CC=C1C(OC(C)=O)=C1C=CC=C(C2=C3OCCOC3=C(F)C(F)=NC13)C1)=O",type:"add",model:"gpt-3.5-turbo"},{left:"C[Si]1C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"",type:"sub",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CC(C)(C)c1ccc(O)c(N)c1C(C)(C)C","CC(C)(c1ccc(O)c(N)c1C(C)(C)C)C1CC1","CCc1ccc(O)cc1C(C)(C)C","C1CC1C(c2ccc(O)cc2C)C(C)(C)C","C1=CCCCC1c2ccc(O)c(c2)C(C)(C)C"],model:"gpt-4",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["CC1=CCCC=C1","Cc1ccc(C)cc1","CC1=CCC=CC1","CCCC1=CC=CC=C1","CC1=CCCCC1"],model:"gpt-4",type:"mutate"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:["Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)CCCCCC","Cc1ccc(cc1Nc2ncc(c(n2)c3ccc(nc3)C#N)N(=O)=O)NC(=O)c4ccc(cc4)CN5CCN(CC5)CC","Cc1ccc(cc1Nc2nccc(n2)c3ccc(nc3)C(=O)O)NC(=O)c4ccc(cc4)CN5CCN(CC5)COC","Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)N6CCOCC6","Cc1ccc(cc1Nc2nccc(n2)c3cc(ccn3)C)NC(=O)c4ccc(cc4)CN5CCN(CC5)CS"],model:"gpt-4",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["C1=CC(=O)C2C(=O)C=C(OC2=C1)O","OC(=O)C1=C(CC=O)C(O)=CC=C1","O=C(O)C1=CC(OC2=CC=CC=C2)=CC=C1O","C1=CC(=O)OC(C(=O)O)C=C1","O=C(C(=O)O)c1ccc(OC2=CC=CC=C2C=O)cc1"],model:"gpt-4",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CCc2cccc(C=C)c2",type:"add",model:"gpt-4"},{left:"C=Cc1cccc(CCC(C)(C)c2cc(C(C)(C)C)ccc2O)c1",right:"Cc1cccc(C=C)c1",result:"Cc1cccc(C)c1",type:"sub",model:"gpt-4"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CCc2ccc(cc2Nc3nccc(n3)c4cccnc4)NC(=O)c5ccc(cc5)CN6CCN(CC6)C",type:"add",model:"gpt-4"},{left:"CN1CCN(Cc2ccc(C(=O)Nc3ccc(CCC(C)(C)c4cc(C(C)(C)C)ccc4O)c(Nc4nccc(-c5cccnc5)n4)c3)cc2)CC1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)C",type:"sub",model:"gpt-4"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)c1ccc(OCC(=O)Oc2ccccc2C(=O)O)c(c1)C(C)(C)C",type:"add",model:"gpt-4"},{left:"CC(C)(C)c1ccc(OCC(=O)Oc2ccccc2C(=O)O)c(C(C)(C)C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)c1ccc(Oc2ccccc2C(=O)O)c(C(C)(C)C)c1",type:"sub",model:"gpt-4"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si](C)(C)c1ccc(-c2ccc3c(c2)[SiH2]C(=C3OCCO1)C1=CC=C(-c3c4OCCOc4cc4N=C(F)C(F)=NC34)C2N=C(F)C(F)=NC12)C(C)(C)C",type:"add",model:"gpt-4"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1cccc(C=CCc2ccc(cc2Nc3nccc(n3)c4cccnc4)NC(=O)c5ccc(cc5)CN6CCN(CC6)C)c1",type:"add",model:"gpt-4"},{left:"Cc1cccc(C=CCc2ccc(NC(=O)c3ccc(CN4CCN(C)CC4)cc3)cc2Nc2nccc(-c3cccnc3)n2)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc1nccc(n1)c1cccnc1)NC(=O)c1ccc(cc1)CN1CCN(CC1)C",type:"sub",model:"gpt-4"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(=O)Oc1ccccc1C(=O)OCCc1cccc(C=C)c1",type:"add",model:"gpt-4"},{left:"C=Cc1cccc(CCOC(=O)c2ccccc2OC(C)=O)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1",type:"sub",model:"gpt-4"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C=CC1=CC=C(C2=C(Si(C)C=C2C)C2=CC=C(C3=C(Si(C)C=C3C)C3N=C(F)C(F)=NC3=N2)C2N=C(F)C(F)=NC12)C=C1",type:"add",model:"gpt-4"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(=O)Nc1ccc(cc1Nc2nccc(n2)c3cccnc3)CN4CCN(CC4)COC(=O)C(=O)c5ccccc5",type:"add",model:"gpt-4"},{left:"CC(=O)Nc1ccc(CN2CCN(COC(=O)C(=O)c3ccccc3)CC2)cc1Nc1nccc(-c2cccnc2)n1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1C(=O)OC(C(=O)Nc1ccc(CN2CCN(COC(=O)C(=O)c3ccccc3)CC2)cc1Nc1nccc(-c2cccnc2)n1)Nc1ccc(-c2cccnc2)nccc1N",type:"sub",model:"gpt-4"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"gpt-4"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C)C2N=C(F)C(F)=NC12",type:"sub",model:"gpt-4"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(C)Oc1ccccc1C(=O)OCC2=C(O[Si]1(C)C=C1C)C1=CC=C(C3=C4OCCOC4=[Si]C3(C)C)C3N=C(F)C(F)=NC123",type:"add",model:"gpt-4"},{left:"CC(=O)Oc1ccccc1C(=O)OCC1=C(O[Si]2(C)C=C2C)C2=CC=C(C3=C4OCCOC4=[Si]C3(C)C)C3N=C(F)C(F)=NC213",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si](C)(C=C(O1CCOC1))C1=Cc2cc(C3NC(F)=NC(F)=C3)ncc2C(Cc2ccc(O1CCOC1)cc2)=[Si]C1CCC1",type:"sub",model:"gpt-4"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["C(=O)c1ccc(O)c(c1)C(C)(C)C"],model:"text-curie-001",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["Cc1ccccc1","C=C","c1ccccc1","Cc1ccccc1","Cc1ccccc1","Cc1ccccc1","C=C","c1ccccc1","Cs1cccs1","Cc1ccccc1"],model:"text-curie-001",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O"],model:"text-curie-001",type:"mutate"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:["C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12"],model:"text-curie-001",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC=C",type:"add",model:"text-curie-001"},{left:"C=C",right:"Cc1cccc(C=C)c1",result:"",type:"sub",model:"text-curie-001"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"text-curie-001"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C6",type:"sub",model:"text-curie-001"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1C(=O)O",type:"add",model:"text-curie-001"},{left:"CC(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC-C-O-C-C-O-O",type:"sub",model:"text-curie-001"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"",type:"add",model:"text-curie-001"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"c1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"text-curie-001"},{left:"C=Cc1ccccc1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C6",type:"sub",model:"text-curie-001"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"Cc1cccc(C=C)c1C(=O)O",type:"add",model:"text-curie-001"},{left:"C=Cc1cccc(C)c1C(=O)O",right:"O=C(C)Oc1ccccc1C(=O)O",result:"c1ccccc1C(=O)O",type:"sub",model:"text-curie-001"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CCCCCCCCC1=C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"text-curie-001"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"text-curie-001"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O-C1CCCCC1-C=O",type:"sub",model:"text-curie-001"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"text-curie-001"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"sub",model:"text-curie-001"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C=C(C)Oc1ccccc1C(=O)O",type:"add",model:"text-curie-001"},{left:"C=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Subtract C=C(C)Oc1ccccc1C(=O)O from C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"sub",model:"text-curie-001"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CC1(C)C2(C)C3(C)C=C(C3C(C)(C)C2C1C)c4ccc(O)c(c4)C(C)(C)C","CC1(C)C2(C)C3(C)C=C(C3C(C)(C)C2C1C)c4ccc(N)c(c4)C(C)(C)C","CC1(C)C2(C)C3(C)C=C(C3C(C)(C)C2C1C)c4ccc(S)c(c4)C(C)(C)C","CC1(C)C2(C)C3(C)C=C(C3C(C)(C)C2C1C)c4ccc(F)c(c4)C(C)(C)C"],model:"text-davinci-003",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["CC1=C(C(C(C(C1)O)O)O)C","CC1=C(C(C(C(C1)O)O)N)C","CC1=C(C(C(C(C1)N)N)N)C","CC1=C(C(C(C(C1)S)S)S)C","CC1=C(C(C(C(C1)F)F)F)C"],model:"text-davinci-003",type:"mutate"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:["Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CNC(=O)C6CCN(CC6)C","Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CNC(=O)C6CCC(=O)N(CC6)C","Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CNC(=O)C6CC=CC(=O)N(C6)C","Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CNC(=O)C6C=CC(=O)N(CC6)C"],model:"text-davinci-003",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["CC(C)(C)Oc1ccc(O)cc1C(=O)O","CC(=O)Oc1cc(O)ccc1C(C)(C)O","O=C(C)Oc1ccc(C(=O)O)cc1","CC(C)(C)Oc1ccc(C(=O)O)cc1","CC(=O)Oc1ccc(C)cc1C(C)(C)O"],model:"text-davinci-003",type:"mutate"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:["[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12","[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12","[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12","[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12"],model:"text-davinci-003",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CC=Cc1ccccc1",type:"add",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)CC=Cc2ccccc2)c1",right:"Cc1cccc(C=C)c1",result:"CC(=Cc1ccccc1)C(C)(C)CC(C)C",type:"sub",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CNC(=O)c1ccc(cc1Nc2nccc(n2)c3cccnc3)CN5CCN(CC5)C",type:"add",model:"text-davinci-003"},{left:"CN1CCN(Cc2ccc(C(=O)NCC(C)(C)c3cc(C(C)(C)C)ccc3O)c(Nc3nccc(-c4cccnc4)n3)c2)CC1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)Cc2ccc(C(=O)NCC(C)(C)c3cc(C(C)(C)C)ccc3O)c(Nc3nccc(-c4cccnc4)n3)c2",type:"sub",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C(=O)Oc1ccccc1C(=O)O",type:"add",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)C(=O)Oc2ccccc2C(=O)O)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)C(=O)Oc1ccccc1",type:"sub",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C1=C(C[Si]2(C)C=C3OCCOC3=C2C2=CC=C(C3=C4OCCOC4=C[Si]3(C)C)C4N=C(F)C(F)=NC24)C=CC=C1",type:"add",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)c2ccccc2C[Si]2(C)C=C3OCCOC3=C2C2=CC=C(C3=C4OCCOC4=C[Si]3(C)C)C3N=C(F)C(F)=NC23)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC(C)(C)c1ccc(O)c(C(C)(C)c2ccccc2C[Si]2(C)C=C3OCCOC3=C2C2=CC=CN2C3=C4OCCOC4=C[Si]3(C)C)c1",type:"sub",model:"text-davinci-003"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc2c(cc1C=C)c3ccc(Nc4nccc(n4)c5cccnc5)ccc23NC(=O)c6ccc(cc6)CN7CCN(CC7)C",type:"add",model:"text-davinci-003"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"Cc1cccc(C=C)c1O=C(C)Oc1ccccc1C(=O)O",type:"add",model:"text-davinci-003"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Cc1ccc(C=C)cc1C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"text-davinci-003"},{left:"C=Cc1ccc(C)c(C[Si]2(C)C=C3OCCOC3=C2C2=CC=C(C3=C4OCCOC4=C[Si]3(C)C)C3N=C(F)C(F)=NC23)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C1[Si]2(C)C=C3OCCOC3=C2C2=CC=C(C3=C4OCCOC4=C[Si]3(C)C2N=C(F)C(F)=NC13)C1",type:"sub",model:"text-davinci-003"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC1=C(C(=O)Nc2ccc(cc2Nc3nccc(n3)c4cccnc4)C1)N(Cc5ccc(cc5)CN6CCN(CC6)C)C(=O)C7CCCCC7",type:"add",model:"text-davinci-003"},{left:"CC1=C(N(Cc2ccc(CN3CCN(C)CC3)cc2)C(=O)C2CCCCC2)C(=O)Nc2ccc(cc2Nc2nccc(-c3cccnc3)n2)C1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC1=CN(Cc2ccc(CN3CCN(C)CC3)cc2)C(=O)C2CCCCC2Nc2ccc(cc2Nc2nccc(-c3cccnc3)n2)C1",type:"sub",model:"text-davinci-003"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"text-davinci-003"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C[Si]4(C)C=C5OCCOC5=C4C4=CC=C(C5=C6OCCOC6=C[Si]5(C)C)C5N=C(F)C(F)=NC45)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C[Si]4(C)C=C5OCCOC5=C4C4=CC=C(C5=C6OCCOC6=C[Si]5(C)C)C5N=C(F)C(F)=NC45)CC3)cc2)cc1N",type:"sub",model:"text-davinci-003"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(C)Oc1ccccc1C(=O)OC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"text-davinci-003"},{left:"CC(=O)Oc1ccccc1C(=O)OC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC(=O)Oc1ccccc1C(=O)OC",type:"sub",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CN1C=NC2=C1C(=O)N(C(=O)N2C)C","Cc1cccc(C)c1OCc1ccc(C(C)C)cc1","CC(C)(C)c1cncc(C)c1O","Cc1ccccc1C(C)(C)CO","CC(C)(C)CCC(=O)N1CCN(CC1)C\\C=C/c1ccccc1"],model:"claude-v1.2",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["C=CCc1ccccc1","C/C(=C\\C)c1ccccc1","C=C\\C=C/c1ccccc1","CC(=C)C(C=C)c1ccccc1","C/C(=C/C)c1ccccc1"],model:"claude-v1.2",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["Cn1c(=O)c2ccccc12","COc1ccc(C(=O)O)cc1","CN1C(=O)c2ccccc12","CC(C)=C\\C(=O)O/c1ccccc1","O=Cc1ccc(C(=O)O)cc1"],model:"claude-v1.2",type:"mutate"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:["C1=C=C(CC=C2OCCOC2=NC(=NC(=O)C3CCOC(C(=O)C4=CC=CC=C4)=C3)F)SC1","C1=C=C(CC=C2OCCOC2=NC=NC(=O)C(=O)COC3=CC=CC=C3)SC1"],model:"claude-v1.2",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"C[C@]12CC[C@H]3[C@H]2C[C@](C)(C)[C@@H](OC4=CC=CC(=C4)C(C)(C)C)[C@@H](C)[C@]4(C)CC[C@@H]5[C@@H]4CC[C@@H]5C3",type:"add",model:"claude-v1.2"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CC=C",type:"add",model:"claude-v1.2"},{left:"C=CCC(C)(C)c1cc(C(C)(C)C)ccc1O",right:"Cc1cccc(C=C)c1",result:"CCCCCCCC(C)(C)c1cc(C(C)(C)C)ccc1O - Cc1cccc(C=C)c1\nCc1cccc(C)c1",type:"sub",model:"claude-v1.2"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)Cc6ccc(cc6Nc7nccc(n7)c8cccnc8)NC(=O)c9ccc(cc9)CN%10CCN(CC10)C",type:"add",model:"claude-v1.2"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(Oc1ccccc1C(=O)O)c1ccc(O)c(c1)C(C)(C)C",type:"add",model:"claude-v1.2"},{left:"CC(C)(C)c1cc(C(C)(C)Oc2ccccc2C(=O)O)ccc1O",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccc(C(C)(C)Oc2ccccc2C(=O)O)cc1",type:"sub",model:"claude-v1.2"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CNC(=O)C1=C[Si]2(C)CCOC2=C1C1=CC=C(c2oc3ccccc3c2)C2N=C(F)C(F)=NC12",type:"add",model:"claude-v1.2"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)CNC(=O)C2=C[Si]3(C)CCOC3=C2C2=CC=C(c3cc4ccccc4o3)C3N=C(F)C(F)=NC23)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C1=CC=C(C2=C3OCCOC3=C[Si](C)C2CCC(=O)NC(C)(C)C)C([Si](C)CC(O)(C(C)(C)CNC(=O)C2=C[Si](C)CCOC2=C3C=CC=C3c2cc3ccccc3o2)c1)C2N=C(F)C(F)=NC12",type:"sub",model:"claude-v1.2"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CCN1CCN(CC1)C(=O)Nc2ccc(cc2)c3nccc(n3)Nc4ccc(cc4=C)C=C",type:"add",model:"claude-v1.2"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(=O)Oc1cccc(C=CCc2ccccc2)c1C(=O)O",type:"add",model:"claude-v1.2"},{left:"CC(=O)Oc1cccc(C=CCc2ccccc2)c1C(=O)O",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccc(/C=CCc2ccccc2)cc1C(=O)O",type:"sub",model:"claude-v1.2"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Nc1c(F)c(NC2=C(C=CC=C1C3OCCOC3=CC=C2C)C4OCCOC4=CC=CC(C)=C)C(F)=N",type:"add",model:"claude-v1.2"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CN1CCN(CC1)c2ccccc2NC(=O)c3cccc(c3)Nc4nccc(n4)c5ccc(NC)cc5",type:"add",model:"claude-v1.2"},{left:"CNc1ccc(-c2ccnc(Nc3cccc(C(=O)Nc4ccccc4N4CCN(C)CC4)c3)n2)cc1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CNc1ccc(c2ccnc(Nc3cccc(N4CCN(C)CC4)c3)n2)cc1",type:"sub",model:"claude-v1.2"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC1=C[C+]([C+]([OC]([C+]([OC]([C+]([OC]([C+]1C)C)(CC2=C3NC(=O)C(=C4N=C(F)C(=C4)C)CC(C3CCC2)N(C)C)CC3=C([Si]([C]([C#N]4CC(C4)C)(C)[C]3=C(C)C)C)C)C)C)C",type:"add",model:"claude-v1.2"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(C)Oc1ccccc1C(=O)OCC1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"claude-v1.2"},{left:"CC(=O)Oc1ccccc1C(=O)OCC1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CN1C=NC(=C1F)C1=CC=C(C2=C3OCCOC3=CC2)",type:"sub",model:"claude-v1.2"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CC(C)(C)CCC(C)(C)C","C(CCC)(CCC)C","CCC(=O)CN(C)C(C)(C)C","O=CCC(NC(C)=O)Nc1ccc(Cl)cc1","CCC(F)C","CC(F)C"],model:"claude-instant-v1",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["Cc1ccc(F)cc1","CCCCC=C","CC(O)=NC1=CNC=N1","CCCN(CCC(C)C)Cl","CCCN(CCC(C)C)CCC"],model:"claude-instant-v1",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["CCCc1ccccc1CCC"],model:"claude-instant-v1",type:"mutate"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:["C[Si]1(C)C=C2OCCOC2=C1C1=CC=CCC1","OCCC1=CN=C(F)C(F)=NCCC1","C[Si]2(C=CC3OCCOC3=C2C=C)C3N=C(F)C(F)=NCCC3","CCCNC1=NC2=C(OCCO)C(CC3C)C=C3C=CCC=C12","CCC1SCOCSC1N=C(F)C(Cl)F","COC1=CC=C(C=CC=N)CN(C)CC1C1=CNC=C2OCCOC2=C1","OCCOC1=CNC2C3CCOCCOC3C2=C1C1=NC2=C(OCCO)SC2=CNC1"],model:"claude-instant-v1",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"Cc1ccc(cc1)C(C)(C)c1ccc(O)c(c1)C(C)(C)c2c[nH+]c3ccc4c[nH+]c(C)(C)([O-])=NC5=C(N5)c6ccccc6",type:"add",model:"claude-instant-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"c1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C \nCCCc1ccc(O)c(c1)C(C)(C)CCCNC(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"claude-instant-v1"},{left:"CN1CCN(Cc2ccc(C(=O)Nc3cccc(Nc4nccc(-c5cccnc5)n4)c3)cc2)CC1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C \nNC(=O)c1ccc(cc1CN2CCCN(Cc3ccc(C(=O)Nc4cccc(Nc5ccccn5)c4)cc3)CC2)C",type:"sub",model:"claude-instant-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"C1CCC2C(CCC1C)(CCC[O])OC(O)C \nCC3CC4C5C7C8O7C7CCC5C4CCC3C1CCC2C(CCC1C)(CCC[O])OC(O)C",type:"add",model:"claude-instant-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C \nCCC(C)(C)c1ccc(O)c(c1)C(C)(C)CC1=NSiC2=NC3=CC=C(C=O)O3C=C2NC1=O \nC1=CCC=C2C(O)=C3OCCOC3=C[Si](C)(C)C2=C1",type:"add",model:"claude-instant-v1"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(CO)Cc1ccccc1c2ccccc2 \nC1CCCCC1SCC1(OC)CCCC1",type:"sub",model:"claude-instant-v1"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1cccc(C=C)c1Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"claude-instant-v1"},{left:"C=Cc1cccc(C)c1Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(C)CC5 \nCc1ccc(cc1NC(=O)c2ccc(cnc3CCCO)cc2)Nc1nccc(-c2cccnc2)n1",type:"sub",model:"claude-instant-v1"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CN(CCC)CCC1CCC(O)OC(=O)c1COC(=O)O",type:"add",model:"claude-instant-v1"},{left:"CCCN(C)CCC1CCC(O)OC(=O)C1COC(=O)O",right:"O=C(C)Oc1ccccc1C(=O)O",result:"  CC=CNC1N(C2CCC(O)OC(=O)C3COC(=O)O)CCC2CCC3",type:"sub",model:"claude-instant-v1"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C1cccc(C=C)c1 \nC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12 \n\nCCC1COCCC1C([Si](C)(C)CC)C2NC(=O)C(F)FCN2",type:"add",model:"claude-instant-v1"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)CO1CCOC(=O)c2ccccc12",type:"add",model:"claude-instant-v1"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C \nCNC(=O)c1ccc(cc1Nc2nccc(n2)c3cccnc3)C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12 \nCNC1=NC(=O)C2=C1C=CC=C3CCN(CCC3)CCOC2c4ccc(cc4)Cl1ccc2c(c(c12)NC(F)=NF)NC23CNc4c5cc(OC)cc5c4CN23",type:"add",model:"claude-instant-v1"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12 \nCc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1 \n\nC[Si]1(OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)]=NC12 Fc1nccc2nc(CN3CCN(C)CC3)=cc(-c2cccnc2)c1",type:"sub",model:"claude-instant-v1"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(C)Oc1ccccc1C(=O)OC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"claude-instant-v1"},{left:"CC(=O)Oc1ccccc1C(=O)OC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CCOC(=O)CCC1c2ccccc2ccc1(CN)NC",type:"sub",model:"claude-instant-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CC(C)(O)O"],model:"cohere-command-xlarge",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["O=C(C)Oc1ccccc1C(=O)Oc2ccccc2"],model:"cohere-command-xlarge",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"",type:"add",model:"cohere-command-xlarge"},{left:"",right:"Cc1cccc(C=C)c1",result:"",type:"sub",model:"cohere-command-xlarge"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"",type:"add",model:"cohere-command-xlarge"},{left:"",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"\nThe result is\nCCC(NCNC(C(=O))C3=O)O",type:"sub",model:"cohere-command-xlarge"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"",type:"add",model:"cohere-command-xlarge"},{left:"",right:"O=C(C)Oc1ccccc1C(=O)O",result:"c2ccccc2C(=O)Oc3ccccc3C(=O)Oc4ccccc4C(=O)Oc5ccccc5C(=O)Oc6ccccc6C(=O)Oc7ccccc7C(=O)O",type:"sub",model:"cohere-command-xlarge"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"",type:"add",model:"cohere-command-xlarge"},{left:"",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"from H3C-N(C(F)(C(F)(C(F)(C(F)(F)C(F)(F)(C(F)O)C2F)O)F)C-N(C2=C3C=C3O)O)(O)CH2CH2 from",type:"sub",model:"cohere-command-xlarge"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"",type:"add",model:"cohere-command-xlarge"},{left:"",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"",type:"sub",model:"cohere-command-xlarge"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"",type:"add",model:"cohere-command-xlarge"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["C(C)(C)c1ccc(O)c(c1)C(C)(C)C","OCC(C)(C)C1CCCC(c2ccc(O)cc2)1","c1cc(OC[C@H](C)C)ccc1CC(C)(C)C","C(C)CC(Cc1ccc(OC)c(c1)C(C)(C)C)OC(C)(C)C"],model:"claude-v1.3",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["N1CCC2=CC=CC=C12","Cc1cccc(C(=C)c2nccc(C)c2)c1","CCC=C1CCc2c(cccc2)C(C[CH2+]1CC)C","Cc1ccc(cc1C=C)N1CCOCC1"],model:"claude-v1.3",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["O=C(CC(=O)N)c1ccccc1C(=O)O","Cc1ccccc1C(=O)COC(=O)CCC(C)C","C=Cc1ccccc1C(=O)COC(=O)Cc2ccccc2","O=C(CS)c1ccccc1C(=O)COC(=O)Cc2ccccn2"],model:"claude-v1.3",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["C(C)(C)c1ccc(O)c(c1)C(C)(C)C","OCC(C)(C)C1CCCC(c2ccc(O)cc2)1","c1cc(OC[C@H](C)C)ccc1CC(C)(C)C","C(C)CC(Cc1ccc(OC)c(c1)C(C)(C)C)OC(C)(C)C"],model:"claude-v1.3",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["N1CCC2=CC=CC=C12","Cc1cccc(C(=C)c2nccc(C)c2)c1","CCC=C1CCc2c(cccc2)C(C[CH2+]1CC)C","Cc1ccc(cc1C=C)N1CCOCC1"],model:"claude-v1.3",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["O=C(CC(=O)N)c1ccccc1C(=O)O","Cc1ccccc1C(=O)COC(=O)CCC(C)C","C=Cc1ccccc1C(=O)COC(=O)Cc2ccccc2","O=C(CS)c1ccccc1C(=O)COC(=O)Cc2ccccn2"],model:"claude-v1.3",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)Cc1cccc(C=C)c1",type:"add",model:"claude-v1.3"},{left:"C=Cc1cccc(CC(C)(C)c2cc(C(C)(C)C)ccc2O)c1",right:"Cc1cccc(C=C)c1",result:"Cc1cccc(Cc2ccc(O)cc2)c1",type:"sub",model:"claude-v1.3"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C\nCC1=CC=C(C=C1)N2N=C(C=c2nc2ccccc2C3=CC=CC=N3)C(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"claude-v1.3"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CN1C=NC2=C1NC(=O)c3ccccc31Cc4ccc(cc4Nc5ncccc5)NC(=O)c6ccccc16",type:"sub",model:"claude-v1.3"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)c1ccc(OC(=O)c2ccccc2C(=O)O)c(c1)C(C)(C)C",type:"add",model:"claude-v1.3"},{left:"CC(C)(C)c1ccc(OC(=O)c2ccccc2C(=O)O)c(C(C)(C)C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(COC(=O)c1ccc(OC(=O)c2ccccc2C(=O)O)c(C(C)(C)C)c1)c1ccccc1C(=O)O",type:"sub",model:"claude-v1.3"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CCCC(C)c1ccc(O)c(c1)CCC(C)C[Si]1(C)C=C2OCCOC2=C1C1=CC=CC2=C3OCCOC[C](C)(C)C3=C[Si]2(C)c1ccc(O)c(c1)CCC",type:"add",model:"claude-v1.3"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)N(Cc4ccc(C=C)c4)C(=O)c5ccc(cc5)CN6CCN(CC6)C",type:"add",model:"claude-v1.3"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1C(=O)OCCc2cccc(C=C)cc2",type:"add",model:"claude-v1.3"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Cc1cccc(C=C)c1C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2=CC(=O)NF2",type:"add",model:"claude-v1.3"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)CC(=O)Oc6ccccc6C(=O)OCC(=O)O",type:"add",model:"claude-v1.3"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(CC(=O)Oc4ccccc4C(=O)OCC(=O)O)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CNc1cc(Cl)ccc1Br\nOc1ccc2c(CN3CCCN(c4nccc(Br)c4)CC3)cccc2c1",type:"sub",model:"claude-v1.3"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CCC(Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C)C(=O)Nc6nccc(n6)c7cccnc7)[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"claude-v1.3"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(C)Oc1ccccc1C(=O)OC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"claude-v1.3"},{left:"CC(=O)Oc1ccccc1C(=O)OC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C=CC=C1OCCOC1=C1OCCOC1-C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"sub",model:"claude-v1.3"}];function Ve(t,e,c){const r=t.slice();return r[10]=e[c].left,r[11]=e[c].right,r[12]=e[c].result,r[13]=e[c].type,r}function We(t,e,c){const r=t.slice();return r[16]=e[c],r}function Xe(t){let e,c,r,n=t[16]+"";return{c(){e=l("option"),c=h(n),e.__value=r=t[16],e.value=e.__value},m(t,r){s(t,e,r),C(e,c)},p(t,i){4&i&&n!==(n=t[16]+"")&&f(c,n),4&i&&r!==(r=t[16])&&(e.__value=r,e.value=e.__value)},d(t){t&&a(e)}}}function Ue(t){let e,c,r,n=t[4][t[1]]+"";return{c(){e=l("div"),c=h("Prompt: [omitted prefix] "),r=h(n),d(e,"class","prompt svelte-444h2t")},m(t,n){s(t,e,n),C(e,c),C(e,r)},p(t,e){2&e&&n!==(n=t[4][t[1]]+"")&&f(r,n)},d(t){t&&a(e)}}}function Ye(t){let e,c;return e=new $e({props:{left:t[10],right:t[11],result:t[12],type:t[13]}}),{c(){H(e.$$.fragment)},m(t,r){z(e,t,r),c=!0},p(t,c){const r={};3&c&&(r.left=t[10]),3&c&&(r.right=t[11]),3&c&&(r.result=t[12]),3&c&&(r.type=t[13]),e.$set(r)},i(t){c||(P(e.$$.fragment,t),c=!0)},o(t){D(e.$$.fragment,t),c=!1},d(t){$(e,t)}}}function qe(t){let e,c,n,i,h,f,m,O,v,b,N,w,y,S,x,A,R,k,M=[...t[2]],E=[];for(let e=0;e<M.length;e+=1)E[e]=Xe(We(t,M,e));let T=t[0]&&t[1]&&Ue(t),I=t[3].filter(t[9]),H=[];for(let e=0;e<I.length;e+=1)H[e]=Ye(Ve(t,I,e));const z=t=>D(H[t],1,1,(()=>{H[t]=null}));return{c(){e=l("main"),c=l("h1"),c.textContent="mol_algebra",n=u(),i=l("select");for(let t=0;t<E.length;t+=1)E[t].c();h=u(),f=l("div"),m=l("button"),m.textContent="mutate",O=u(),v=l("button"),v.textContent="add",b=u(),N=l("button"),N.textContent="sub",w=u(),T&&T.c(),y=u(),S=l("div"),S.textContent="author: andrew",x=u();for(let t=0;t<H.length;t+=1)H[t].c();d(c,"class","hero svelte-444h2t"),void 0===t[0]&&F((()=>t[5].call(i))),d(e,"class","svelte-444h2t")},m(r,a){s(r,e,a),C(e,c),C(e,n),C(e,i);for(let t=0;t<E.length;t+=1)E[t]&&E[t].m(i,null);p(i,t[0],!0),C(e,h),C(e,f),C(f,m),C(f,O),C(f,v),C(f,b),C(f,N),C(e,w),T&&T.m(e,null),C(e,y),C(e,S),C(e,x);for(let t=0;t<H.length;t+=1)H[t]&&H[t].m(e,null);A=!0,R||(k=[g(i,"change",t[5]),g(m,"click",t[6]),g(v,"click",t[7]),g(N,"click",t[8])],R=!0)},p(t,[c]){if(4&c){let e;for(M=[...t[2]],e=0;e<M.length;e+=1){const r=We(t,M,e);E[e]?E[e].p(r,c):(E[e]=Xe(r),E[e].c(),E[e].m(i,null))}for(;e<E.length;e+=1)E[e].d(1);E.length=M.length}if(5&c&&p(i,t[0]),t[0]&&t[1]?T?T.p(t,c):(T=Ue(t),T.c(),T.m(e,y)):T&&(T.d(1),T=null),11&c){let r;for(I=t[3].filter(t[9]),r=0;r<I.length;r+=1){const n=Ve(t,I,r);H[r]?(H[r].p(n,c),P(H[r],1)):(H[r]=Ye(n),H[r].c(),P(H[r],1),H[r].m(e,null))}for(B(),r=I.length;r<H.length;r+=1)z(r);L()}},i(t){if(!A){for(let t=0;t<I.length;t+=1)P(H[t]);A=!0}},o(t){H=H.filter(Boolean);for(let t=0;t<H.length;t+=1)D(H[t]);A=!1},d(t){t&&a(e),o(E,t),T&&T.d(),o(H,t),R=!1,r(k)}}}function Ge(t,e,c){let r=_e,n="gpt-4",i="mutate",C=new Set(r.map((t=>t.model)));C=[...C].sort(((t,e)=>t.length-e.length));return[n,i,C,r,{mutate:"Generate 5 diverse molecules that are similar to {mol}",add:"Add {left} and {right} into a single molecule",sub:"Subtract {left} from {right}"},function(){n=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),c(0,n),c(2,C)},()=>c(1,i="mutate"),()=>c(1,i="add"),()=>c(1,i="sub"),t=>t.type===i&&(!n||t.model===n)]}return new class extends W{constructor(t){super(),V(this,t,Ge,qe,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
