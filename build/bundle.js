var app=function(){"use strict";function t(){}function e(t){return t()}function r(){return Object.create(null)}function c(t){t.forEach(e)}function n(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function C(t,e,r){t.insertBefore(e,r||null)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function o(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function l(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function u(){return h(" ")}function g(t,e,r,c){return t.addEventListener(e,r,c),()=>t.removeEventListener(e,r,c)}function d(t,e,r){null==r?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function f(t,e){e=""+e,t.data!==e&&(t.data=e)}function p(t,e,r){for(let r=0;r<t.options.length;r+=1){const c=t.options[r];if(c.__value===e)return void(c.selected=!0)}r&&void 0===e||(t.selectedIndex=-1)}function m(t,e,r){t.classList[r?"add":"remove"](e)}let v;function b(t){v=t}function O(t){(function(){if(!v)throw new Error("Function called outside component initialization");return v})().$$.after_update.push(t)}const N=[],w=[];let y=[];const S=[],x=Promise.resolve();let A=!1;function F(t){y.push(t)}const R=new Set;let k=0;function M(){if(0!==k)return;const t=v;do{try{for(;k<N.length;){const t=N[k];k++,b(t),E(t.$$)}}catch(t){throw N.length=0,k=0,t}for(b(null),N.length=0,k=0;w.length;)w.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];R.has(e)||(R.add(e),e())}y.length=0}while(N.length);for(;S.length;)S.pop()();A=!1,R.clear(),b(t)}function E(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}const T=new Set;let I;function B(){I={r:0,c:[],p:I}}function L(){I.r||c(I.c),I=I.p}function P(t,e){t&&t.i&&(T.delete(t),t.i(e))}function D(t,e,r,c){if(t&&t.o){if(T.has(t))return;T.add(t),I.c.push((()=>{T.delete(t),c&&(r&&t.d(1),c())})),t.o(e)}else c&&c()}function H(t){t&&t.c()}function z(t,r,i,s){const{fragment:C,after_update:a}=t.$$;C&&C.m(r,i),s||F((()=>{const r=t.$$.on_mount.map(e).filter(n);t.$$.on_destroy?t.$$.on_destroy.push(...r):c(r),t.$$.on_mount=[]})),a.forEach(F)}function $(t,e){const r=t.$$;null!==r.fragment&&(!function(t){const e=[],r=[];y.forEach((c=>-1===t.indexOf(c)?e.push(c):r.push(c))),r.forEach((t=>t())),y=e}(r.after_update),c(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function _(t,e){-1===t.$$.dirty[0]&&(N.push(t),A||(A=!0,x.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(e,n,i,s,C,o,l,h=[-1]){const u=v;b(e);const g=e.$$={fragment:null,ctx:[],props:o,update:t,not_equal:C,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:r(),dirty:h,skip_bound:!1,root:n.target||u.$$.root};l&&l(g.root);let d=!1;if(g.ctx=i?i(e,n.props||{},((t,r,...c)=>{const n=c.length?c[0]:r;return g.ctx&&C(g.ctx[t],g.ctx[t]=n)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](n),d&&_(e,t)),r})):[],g.update(),d=!0,c(g.before_update),g.fragment=!!s&&s(g.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);g.fragment&&g.fragment.l(t),t.forEach(a)}else g.fragment&&g.fragment.c();n.intro&&P(e.$$.fragment),z(e,n.target,n.anchor,n.customElement),M()}b(u)}class W{$destroy(){$(this,1),this.$destroy=t}$on(e,r){if(!n(r))return t;const c=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return c.push(r),()=>{const t=c.indexOf(r);-1!==t&&c.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var X=class t{static clone(e){let r=Array.isArray(e)?Array():{};for(let c in e){let n=e[c];"function"==typeof n.clone?r[c]=n.clone():r[c]="object"==typeof n?t.clone(n):n}return r}static equals(t,e){if(t.length!==e.length)return!1;let r=t.slice().sort(),c=e.slice().sort();for(var n=0;n<r.length;n++)if(r[n]!==c[n])return!1;return!0}static print(t){if(0==t.length)return"";let e="(";for(let r=0;r<t.length;r++)e+=t[r].id?t[r].id+", ":t[r]+", ";return e=e.substring(0,e.length-2),e+")"}static each(t,e){for(let r=0;r<t.length;r++)e(t[r])}static get(t,e,r){for(let c=0;c<t.length;c++)if(t[c][e]==r)return t[c]}static contains(t,e){if(e.property||e.func){if(e.func){for(let r=0;r<t.length;r++)if(e.func(t[r]))return!0}else for(let r=0;r<t.length;r++)if(t[r][e.property]==e.value)return!0}else for(let r=0;r<t.length;r++)if(t[r]==e.value)return!0;return!1}static intersection(t,e){let r=new Array;for(let c=0;c<t.length;c++)for(let n=0;n<e.length;n++)t[c]===e[n]&&r.push(t[c]);return r}static unique(t){let e={};return t.filter((function(t){return void 0===e[t]&&(e[t]=!0)}))}static count(t,e){let r=0;for(let c=0;c<t.length;c++)t[c]===e&&r++;return r}static toggle(t,e){let r=Array(),c=!1;for(let n=0;n<t.length;n++)t[n]!==e?r.push(t[n]):c=!0;return c||r.push(e),r}static remove(t,e){let r=Array();for(let c=0;c<t.length;c++)t[c]!==e&&r.push(t[c]);return r}static removeUnique(t,e){let r=t.indexOf(e);return r>-1&&t.splice(r,1),t}static removeAll(t,e){return t.filter((function(t){return-1===e.indexOf(t)}))}static merge(t,e){let r=new Array(t.length+e.length);for(let e=0;e<t.length;e++)r[e]=t[e];for(let c=0;c<e.length;c++)r[t.length+c]=e[c];return r}static containsAll(t,e){let r=0;for(let c=0;c<t.length;c++)for(let n=0;n<e.length;n++)t[c]===e[n]&&r++;return r===e.length}static sortByAtomicNumberDesc(t){let e=t.map((function(t,e){return{index:e,value:t.atomicNumber.split(".").map(Number)}}));return e.sort((function(t,e){let r=Math.min(e.value.length,t.value.length),c=0;for(;c<r&&e.value[c]===t.value[c];)c++;return c===r?e.value.length-t.value.length:e.value[c]-t.value[c]})),e.map((function(e){return t[e.index]}))}static deepCopy(e){let r=Array();for(let c=0;c<e.length;c++){let n=e[c];r[c]=n instanceof Array?t.deepCopy(n):n}return r}};var U=class t{static round(t,e){return e=e||1,Number(Math.round(t+"e"+e)+"e-"+e)}static meanAngle(t){let e=0,r=0;for(var c=0;c<t.length;c++)e+=Math.sin(t[c]),r+=Math.cos(t[c]);return Math.atan2(e/t.length,r/t.length)}static innerAngle(e){return t.toRad(180*(e-2)/e)}static polyCircumradius(t,e){return t/(2*Math.sin(Math.PI/e))}static apothem(t,e){return t*Math.cos(Math.PI/e)}static apothemFromSideLength(e,r){let c=t.polyCircumradius(e,r);return t.apothem(c,r)}static centralAngle(e){return t.toRad(360/e)}static toDeg(e){return e*t.degFactor}static toRad(e){return e*t.radFactor}static parityOfPermutation(t){let e=new Uint8Array(t.length),r=0,c=function(r,n=0){return 1===e[r]?n:(n++,e[r]=1,c(t[r],n))};for(var n=0;n<t.length;n++){if(1===e[n])continue;r+=1-c(n)%2}return r%2?-1:1}static get radFactor(){return Math.PI/180}static get degFactor(){return 180/Math.PI}static get twoPI(){return 2*Math.PI}};var Y,q,G,j,K,Z,J,Q,tt=class t{constructor(t,e){0==arguments.length?(this.x=0,this.y=0):1==arguments.length?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}clone(){return new t(this.x,this.y)}toString(){return"("+this.x+","+this.y+")"}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}divide(t){return this.x/=t,this.y/=t,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}invert(){return this.x=-this.x,this.y=-this.y,this}angle(){return Math.atan2(this.y,this.x)}distance(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))}distanceSq(t){return(t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y)}clockwise(t){let e=this.y*t.x,r=this.x*t.y;return e>r?-1:e===r?0:1}relativeClockwise(t,e){let r=(this.y-t.y)*(e.x-t.x),c=(this.x-t.x)*(e.y-t.y);return r>c?-1:r===c?0:1}rotate(e){let r=new t(0,0),c=Math.cos(e),n=Math.sin(e);return r.x=this.x*c-this.y*n,r.y=this.x*n+this.y*c,this.x=r.x,this.y=r.y,this}rotateAround(t,e){let r=Math.sin(t),c=Math.cos(t);this.x-=e.x,this.y-=e.y;let n=this.x*c-this.y*r,i=this.x*r+this.y*c;return this.x=n+e.x,this.y=i+e.y,this}rotateTo(e,r,c=0){this.x+=.001,this.y-=.001;let n=t.subtract(this,r),i=t.subtract(e,r),s=t.angle(i,n);return this.rotateAround(s+c,r),this}rotateAwayFrom(t,e,r){this.rotateAround(r,e);let c=this.distanceSq(t);this.rotateAround(-2*r,e),this.distanceSq(t)<c&&this.rotateAround(2*r,e)}getRotateAwayFromAngle(t,e,r){let c=this.clone();c.rotateAround(r,e);let n=c.distanceSq(t);return c.rotateAround(-2*r,e),c.distanceSq(t)<n?r:-r}getRotateTowardsAngle(t,e,r){let c=this.clone();c.rotateAround(r,e);let n=c.distanceSq(t);return c.rotateAround(-2*r,e),c.distanceSq(t)>n?r:-r}getRotateToAngle(e,r){let c=t.subtract(this,r),n=t.subtract(e,r),i=t.angle(n,c);return Number.isNaN(i)?0:i}isInPolygon(t){let e=!1;for(let r=0,c=t.length-1;r<t.length;c=r++)t[r].y>this.y!=t[c].y>this.y&&this.x<(t[c].x-t[r].x)*(this.y-t[r].y)/(t[c].y-t[r].y)+t[r].x&&(e=!e);return e}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSq(){return this.x*this.x+this.y*this.y}normalize(){return this.divide(this.length()),this}normalized(){return t.divideScalar(this,this.length())}whichSide(t,e){return(this.x-t.x)*(e.y-t.y)-(this.y-t.y)*(e.x-t.x)}sameSideAs(t,e,r){let c=this.whichSide(t,e),n=r.whichSide(t,e);return c<0&&n<0||0==c&&0==n||c>0&&n>0}static add(e,r){return new t(e.x+r.x,e.y+r.y)}static subtract(e,r){return new t(e.x-r.x,e.y-r.y)}static multiply(e,r){return new t(e.x*r.x,e.y*r.y)}static multiplyScalar(e,r){return new t(e.x,e.y).multiplyScalar(r)}static midpoint(e,r){return new t((e.x+r.x)/2,(e.y+r.y)/2)}static normals(e,r){let c=t.subtract(r,e);return[new t(-c.y,c.x),new t(c.y,-c.x)]}static units(e,r){let c=t.subtract(r,e);return[new t(-c.y,c.x).normalize(),new t(c.y,-c.x).normalize()]}static divide(e,r){return new t(e.x/r.x,e.y/r.y)}static divideScalar(e,r){return new t(e.x/r,e.y/r)}static dot(t,e){return t.x*e.x+t.y*e.y}static angle(e,r){let c=t.dot(e,r);return Math.acos(c/(e.length()*r.length()))}static threePointangle(e,r,c){let n=t.subtract(r,e),i=t.subtract(c,r),s=e.distance(r),C=r.distance(c);return Math.acos(t.dot(n,i)/(s*C))}static scalarProjection(e,r){let c=r.normalized();return t.dot(e,c)}static averageDirection(e){let r=new t(0,0);for(var c=0;c<e.length;c++){let t=e[c];r.add(t)}return r.normalize()}};function et(){if(q)return Y;q=1;const t=U,e=X,r=tt;nt();class c{constructor(t,e=0,c=0){this.id=null,this.value=t,this.position=new r(e||0,c||0),this.previousPosition=new r(0,0),this.parentVertexId=null,this.children=Array(),this.spanningTreeChildren=Array(),this.edges=Array(),this.positioned=!1,this.angle=null,this.dir=1,this.neighbourCount=0,this.neighbours=Array(),this.neighbouringElements=Array(),this.forcePositioned=!1}setPosition(t,e){this.position.x=t,this.position.y=e}setPositionFromVector(t){this.position.x=t.x,this.position.y=t.y}addChild(t){this.children.push(t),this.neighbours.push(t),this.neighbourCount++}addRingbondChild(t,e){if(this.children.push(t),this.value.bracket){let r=1;0===this.id&&0===this.value.bracket.hcount&&(r=0),1===this.value.bracket.hcount&&0===e&&(r=2),1===this.value.bracket.hcount&&1===e&&(r=this.neighbours.length<3?2:3),null===this.value.bracket.hcount&&0===e&&(r=1),null===this.value.bracket.hcount&&1===e&&(r=this.neighbours.length<3?1:2),this.neighbours.splice(r,0,t)}else this.neighbours.push(t);this.neighbourCount++}setParentVertexId(t){this.neighbourCount++,this.parentVertexId=t,this.neighbours.push(t)}isTerminal(){return!!this.value.hasAttachedPseudoElements||(null===this.parentVertexId&&this.children.length<2||0===this.children.length)}clone(){let t=new c(this.value,this.position.x,this.position.y);return t.id=this.id,t.previousPosition=new r(this.previousPosition.x,this.previousPosition.y),t.parentVertexId=this.parentVertexId,t.children=e.clone(this.children),t.spanningTreeChildren=e.clone(this.spanningTreeChildren),t.edges=e.clone(this.edges),t.positioned=this.positioned,t.angle=this.angle,t.forcePositioned=this.forcePositioned,t}equals(t){return this.id===t.id}getAngle(e=null,c=!1){let n=null;return n=e?r.subtract(this.position,e):r.subtract(this.position,this.previousPosition),c?t.toDeg(n.angle()):n.angle()}getTextDirection(e,r=!1){let c=this.getDrawnNeighbours(e),n=Array();if(1===e.length)return"right";for(let t=0;t<c.length;t++)n.push(this.getAngle(e[c[t]].position));let i=t.meanAngle(n);if(this.isTerminal()||r)Math.round(100*i)/100==1.57&&(i-=.2),i=Math.round(Math.round(i/Math.PI)*Math.PI);else{let t=Math.PI/2;i=Math.round(Math.round(i/t)*t)}return 2===i?"down":-2===i?"up":0===i||-0===i?"right":3===i||-3===i?"left":"down"}getNeighbours(t=null){if(null===t)return this.neighbours.slice();let e=Array();for(let r=0;r<this.neighbours.length;r++)this.neighbours[r]!==t&&e.push(this.neighbours[r]);return e}getDrawnNeighbours(t){let e=Array();for(let r=0;r<this.neighbours.length;r++)t[this.neighbours[r]].value.isDrawn&&e.push(this.neighbours[r]);return e}getNeighbourCount(){return this.neighbourCount}getSpanningTreeNeighbours(t=null){let e=Array();for(let r=0;r<this.spanningTreeChildren.length;r++)void 0!==t&&t==this.spanningTreeChildren[r]||e.push(this.spanningTreeChildren[r]);return null!=this.parentVertexId&&(void 0!==t&&t==this.parentVertexId||e.push(this.parentVertexId)),e}getNextInRing(t,r,c){let n=this.getNeighbours();for(let i=0;i<n.length;i++)if(e.contains(t[n[i]].value.rings,{value:r})&&n[i]!=c)return n[i];return null}}return Y=c}function rt(){if(j)return G;j=1,et(),ct();return G=class{constructor(t,e){this.id=null,this.firstRingId=t.id,this.secondRingId=e.id,this.vertices=new Set;for(var r=0;r<t.members.length;r++){let c=t.members[r];for(let t=0;t<e.members.length;t++){c===e.members[t]&&this.addVertex(c)}}}addVertex(t){this.vertices.add(t)}updateOther(t,e){this.firstRingId===e?this.secondRingId=t:this.firstRingId=t}containsRing(t){return this.firstRingId===t||this.secondRingId===t}isBridge(t){if(this.vertices.size>2)return!0;for(let e of this.vertices)if(t[e].value.rings.length>2)return!0;return!1}static isBridge(t,e,r,c){let n=null;for(let i=0;i<t.length;i++)if(n=t[i],n.firstRingId===r&&n.secondRingId===c||n.firstRingId===c&&n.secondRingId===r)return n.isBridge(e);return!1}static getNeighbours(t,e){let r=[];for(let c=0;c<t.length;c++){let n=t[c];n.firstRingId===e?r.push(n.secondRingId):n.secondRingId===e&&r.push(n.firstRingId)}return r}static getVertices(t,e,r){for(let c=0;c<t.length;c++){let n=t[c];if(n.firstRingId===e&&n.secondRingId===r||n.firstRingId===r&&n.secondRingId===e)return[...n.vertices]}}}}function ct(){if(Z)return K;Z=1;const t=X,e=tt;et();const r=rt();class c{constructor(t){this.id=null,this.members=t,this.edges=[],this.insiders=[],this.neighbours=[],this.positioned=!1,this.center=new e(0,0),this.rings=[],this.isBridged=!1,this.isPartOfBridged=!1,this.isSpiro=!1,this.isFused=!1,this.centralAngle=0,this.canFlip=!0}clone(){let e=new c(this.members);return e.id=this.id,e.insiders=t.clone(this.insiders),e.neighbours=t.clone(this.neighbours),e.positioned=this.positioned,e.center=this.center.clone(),e.rings=t.clone(this.rings),e.isBridged=this.isBridged,e.isPartOfBridged=this.isPartOfBridged,e.isSpiro=this.isSpiro,e.isFused=this.isFused,e.centralAngle=this.centralAngle,e.canFlip=this.canFlip,e}getSize(){return this.members.length}getPolygon(t){let e=[];for(let r=0;r<this.members.length;r++)e.push(t[this.members[r]].position);return e}getAngle(){return Math.PI-this.centralAngle}eachMember(t,e,r,c){let n=r=r||0===r?r:this.members[0],i=0;for(;null!=n&&i<100;){let s=n;e(s),n=t[n].getNextInRing(t,this.id,c),c=s,n==r&&(n=null),i++}}getOrderedNeighbours(t){let e=Array(this.neighbours.length);for(let c=0;c<this.neighbours.length;c++){let n=r.getVertices(t,this.id,this.neighbours[c]);e[c]={n:n.length,neighbour:this.neighbours[c]}}return e.sort((function(t,e){return e.n-t.n})),e}isBenzeneLike(t){let e=this.getDoubleBondCount(t),r=this.members.length;return 3===e&&6===r||2===e&&5===r}getDoubleBondCount(t){let e=0;for(let r=0;r<this.members.length;r++){let c=t[this.members[r]].value;"="!==c.bondType&&"="!==c.branchBond||e++}return e}contains(t){for(let e=0;e<this.members.length;e++)if(this.members[e]==t)return!0;return!1}}return K=c}function nt(){if(Q)return J;Q=1;const t=X;et(),ct();class e{constructor(t,e="-"){this.idx=null,this.element=1===t.length?t.toUpperCase():t,this.drawExplicit=!1,this.ringbonds=Array(),this.rings=Array(),this.bondType=e,this.branchBond=null,this.isBridge=!1,this.isBridgeNode=!1,this.originalRings=Array(),this.bridgedRing=null,this.anchoredRings=Array(),this.bracket=null,this.plane=0,this.attachedPseudoElements={},this.hasAttachedPseudoElements=!1,this.isDrawn=!0,this.isConnectedToRing=!1,this.neighbouringElements=Array(),this.isPartOfAromaticRing=t!==this.element,this.bondCount=0,this.chirality="",this.isStereoCenter=!1,this.priority=0,this.mainChain=!1,this.hydrogenDirection="down",this.subtreeDepth=1,this.hasHydrogen=!1,this.class=void 0}addNeighbouringElement(t){this.neighbouringElements.push(t)}attachPseudoElement(t,e,r=0,c=0){null===r&&(r=0),null===c&&(c=0);let n=r+t+c;this.attachedPseudoElements[n]?this.attachedPseudoElements[n].count+=1:this.attachedPseudoElements[n]={element:t,count:1,hydrogenCount:r,previousElement:e,charge:c},this.hasAttachedPseudoElements=!0}getAttachedPseudoElements(){let t={},e=this;return Object.keys(this.attachedPseudoElements).sort().forEach((function(r){t[r]=e.attachedPseudoElements[r]})),t}getAttachedPseudoElementsCount(){return Object.keys(this.attachedPseudoElements).length}isHeteroAtom(){return"C"!==this.element&&"H"!==this.element}addAnchoredRing(e){t.contains(this.anchoredRings,{value:e})||this.anchoredRings.push(e)}getRingbondCount(){return this.ringbonds.length}backupRings(){this.originalRings=Array(this.rings.length);for(let t=0;t<this.rings.length;t++)this.originalRings[t]=this.rings[t]}restoreRings(){this.rings=Array(this.originalRings.length);for(let t=0;t<this.originalRings.length;t++)this.rings[t]=this.originalRings[t]}haveCommonRingbond(t,e){for(let r=0;r<t.ringbonds.length;r++)for(let c=0;c<e.ringbonds.length;c++)if(t.ringbonds[r].id==e.ringbonds[c].id)return!0;return!1}neighbouringElementsEqual(t){if(t.length!==this.neighbouringElements.length)return!1;t.sort(),this.neighbouringElements.sort();for(var e=0;e<this.neighbouringElements.length;e++)if(t[e]!==this.neighbouringElements[e])return!1;return!0}getAtomicNumber(){return e.atomicNumbers[this.element]}getMaxBonds(){return e.maxBonds[this.element]}static get maxBonds(){return{H:1,C:4,N:3,O:2,P:3,S:2,B:3,F:1,I:1,Cl:1,Br:1}}static get atomicNumbers(){return{H:1,He:2,Li:3,Be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,p:15,S:16,s:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Uut:113,Uuq:114,Uup:115,Uuh:116,Uus:117,Uuo:118}}static get mass(){return{H:1,He:2,Li:3,Be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,p:15,S:16,s:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Uut:113,Uuq:114,Uup:115,Uuh:116,Uus:117,Uuo:118}}}return J=e}const it=tt;var st=class t{constructor(t=new it(0,0),e=new it(0,0),r=null,c=null,n=!1,i=!1){this.from=t,this.to=e,this.elementFrom=r,this.elementTo=c,this.chiralFrom=n,this.chiralTo=i}clone(){return new t(this.from.clone(),this.to.clone(),this.elementFrom,this.elementTo)}getLength(){return Math.sqrt(Math.pow(this.to.x-this.from.x,2)+Math.pow(this.to.y-this.from.y,2))}getAngle(){return it.subtract(this.getRightVector(),this.getLeftVector()).angle()}getRightVector(){return this.from.x<this.to.x?this.to:this.from}getLeftVector(){return this.from.x<this.to.x?this.from:this.to}getRightElement(){return this.from.x<this.to.x?this.elementTo:this.elementFrom}getLeftElement(){return this.from.x<this.to.x?this.elementFrom:this.elementTo}getRightChiral(){return this.from.x<this.to.x?this.chiralTo:this.chiralFrom}getLeftChiral(){return this.from.x<this.to.x?this.chiralFrom:this.chiralTo}setRightVector(t,e){return this.from.x<this.to.x?(this.to.x=t,this.to.y=e):(this.from.x=t,this.from.y=e),this}setLeftVector(t,e){return this.from.x<this.to.x?(this.from.x=t,this.from.y=e):(this.to.x=t,this.to.y=e),this}rotateToXAxis(){let t=this.getLeftVector();return this.setRightVector(t.x+this.getLength(),t.y),this}rotate(t){let e=this.getLeftVector(),r=this.getRightVector(),c=Math.sin(t),n=Math.cos(t),i=n*(r.x-e.x)-c*(r.y-e.y)+e.x,s=c*(r.x-e.x)-n*(r.y-e.y)+e.y;return this.setRightVector(i,s),this}shortenFrom(t){let e=it.subtract(this.to,this.from);return e.normalize(),e.multiplyScalar(t),this.from.add(e),this}shortenTo(t){let e=it.subtract(this.from,this.to);return e.normalize(),e.multiplyScalar(t),this.to.add(e),this}shortenRight(t){return this.from.x<this.to.x?this.shortenTo(t):this.shortenFrom(t),this}shortenLeft(t){return this.from.x<this.to.x?this.shortenFrom(t):this.shortenTo(t),this}shorten(t){let e=it.subtract(this.from,this.to);return e.normalize(),e.multiplyScalar(t/2),this.to.add(e),this.from.subtract(e),this}};var Ct=class t{constructor(t,e,r=1){this.id=null,this.sourceId=t,this.targetId=e,this.weight=r,this.bondType="-",this.isPartOfAromaticRing=!1,this.center=!1,this.wedge=""}setBondType(e){this.bondType=e,this.weight=t.bonds[e]}static get bonds(){return{"-":1,"/":1,"\\":1,"=":2,"#":3,$:4}}};var at={getChargeText:function(t){return 1===t?"+":2===t?"2+":-1===t?"-":-2===t?"2-":""}};const ot=U,lt=tt;et(),ct();const{getChargeText:ht}=at;var ut=class{constructor(t,e,r){this.canvas="string"==typeof t||t instanceof String?document.getElementById(t):t,this.ctx=this.canvas.getContext("2d"),this.themeManager=e,this.opts=r,this.drawingWidth=0,this.drawingHeight=0,this.offsetX=0,this.offsetY=0,this.fontLarge=this.opts.fontSizeLarge+"pt Helvetica, Arial, sans-serif",this.fontSmall=this.opts.fontSizeSmall+"pt Helvetica, Arial, sans-serif",this.updateSize(this.opts.width,this.opts.height),this.ctx.font=this.fontLarge,this.hydrogenWidth=this.ctx.measureText("H").width,this.halfHydrogenWidth=this.hydrogenWidth/2,this.halfBondThickness=this.opts.bondThickness/2}updateSize(t,e){this.devicePixelRatio=window.devicePixelRatio||1,this.backingStoreRatio=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,this.ratio=this.devicePixelRatio/this.backingStoreRatio,1!==this.ratio?(this.canvas.width=t*this.ratio,this.canvas.height=e*this.ratio,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.ctx.setTransform(this.ratio,0,0,this.ratio,0,0)):(this.canvas.width=t*this.ratio,this.canvas.height=e*this.ratio)}setTheme(t){this.colors=t}scale(t){let e=-Number.MAX_VALUE,r=-Number.MAX_VALUE,c=Number.MAX_VALUE,n=Number.MAX_VALUE;for(var i=0;i<t.length;i++){if(!t[i].value.isDrawn)continue;let s=t[i].position;e<s.x&&(e=s.x),r<s.y&&(r=s.y),c>s.x&&(c=s.x),n>s.y&&(n=s.y)}var s=this.opts.padding;e+=s,r+=s,c-=s,n-=s,this.drawingWidth=e-c,this.drawingHeight=r-n;var C=this.canvas.offsetWidth/this.drawingWidth,a=this.canvas.offsetHeight/this.drawingHeight,o=C<a?C:a;this.ctx.scale(o,o),this.offsetX=-c,this.offsetY=-n,C<a?this.offsetY+=this.canvas.offsetHeight/(2*o)-this.drawingHeight/2:this.offsetX+=this.canvas.offsetWidth/(2*o)-this.drawingWidth/2}reset(){this.ctx.setTransform(1,0,0,1,0,0)}getColor(t){return(t=t.toUpperCase())in this.colors?this.colors[t]:this.colors.C}drawCircle(t,e,r,c,n=!0,i=!1,s=""){let C=this.ctx,a=this.offsetX,o=this.offsetY;C.save(),C.lineWidth=1.5,C.beginPath(),C.arc(t+a,e+o,r,0,ot.twoPI,!0),C.closePath(),i?(n?(C.fillStyle="#f00",C.fill()):(C.strokeStyle="#f00",C.stroke()),this.drawDebugText(t,e,s)):n?(C.fillStyle=c,C.fill()):(C.strokeStyle=c,C.stroke()),C.restore()}drawLine(t,e=!1,r=1){let c=this.ctx,n=this.offsetX,i=this.offsetY,s=t.clone().shorten(4),C=s.getLeftVector().clone(),a=s.getRightVector().clone();C.x+=n,C.y+=i,a.x+=n,a.y+=i,e||(c.save(),c.globalCompositeOperation="destination-out",c.beginPath(),c.moveTo(C.x,C.y),c.lineTo(a.x,a.y),c.lineCap="round",c.lineWidth=this.opts.bondThickness+1.2,c.strokeStyle=this.themeManager.getColor("BACKGROUND"),c.stroke(),c.globalCompositeOperation="source-over",c.restore()),C=t.getLeftVector().clone(),a=t.getRightVector().clone(),C.x+=n,C.y+=i,a.x+=n,a.y+=i,c.save(),c.beginPath(),c.moveTo(C.x,C.y),c.lineTo(a.x,a.y),c.lineCap="round",c.lineWidth=this.opts.bondThickness;let o=this.ctx.createLinearGradient(C.x,C.y,a.x,a.y);o.addColorStop(.4,this.themeManager.getColor(t.getLeftElement())||this.themeManager.getColor("C")),o.addColorStop(.6,this.themeManager.getColor(t.getRightElement())||this.themeManager.getColor("C")),e&&(c.setLineDash([1,1.5]),c.lineWidth=this.opts.bondThickness/1.5),r<1&&(c.globalAlpha=r),c.strokeStyle=o,c.stroke(),c.restore()}drawWedge(t,e=1){if(isNaN(t.from.x)||isNaN(t.from.y)||isNaN(t.to.x)||isNaN(t.to.y))return;let r=this.ctx,c=this.offsetX,n=this.offsetY,i=t.clone().shorten(5),s=i.getLeftVector().clone(),C=i.getRightVector().clone();s.x+=c,s.y+=n,C.x+=c,C.y+=n,s=t.getLeftVector().clone(),C=t.getRightVector().clone(),s.x+=c,s.y+=n,C.x+=c,C.y+=n,r.save();let a=lt.normals(s,C);a[0].normalize(),a[1].normalize();let o=s,l=C;t.getRightChiral()&&(o=C,l=s);let h=lt.add(o,lt.multiplyScalar(a[0],this.halfBondThickness)),u=lt.add(l,lt.multiplyScalar(a[0],1.5+this.halfBondThickness)),g=lt.add(l,lt.multiplyScalar(a[1],1.5+this.halfBondThickness)),d=lt.add(o,lt.multiplyScalar(a[1],this.halfBondThickness));r.beginPath(),r.moveTo(h.x,h.y),r.lineTo(u.x,u.y),r.lineTo(g.x,g.y),r.lineTo(d.x,d.y);let f=this.ctx.createRadialGradient(C.x,C.y,this.opts.bondLength,C.x,C.y,0);f.addColorStop(.4,this.themeManager.getColor(t.getLeftElement())||this.themeManager.getColor("C")),f.addColorStop(.6,this.themeManager.getColor(t.getRightElement())||this.themeManager.getColor("C")),r.fillStyle=f,r.fill(),r.restore()}drawDashedWedge(t){if(isNaN(t.from.x)||isNaN(t.from.y)||isNaN(t.to.x)||isNaN(t.to.y))return;let e=this.ctx,r=this.offsetX,c=this.offsetY,n=t.getLeftVector().clone(),i=t.getRightVector().clone();n.x+=r,n.y+=c,i.x+=r,i.y+=c,e.save();let s=lt.normals(n,i);s[0].normalize(),s[1].normalize();let C,a,o,l,h=t.getRightChiral(),u=t.clone();h?(C=i,a=n,u.shortenRight(1),o=u.getRightVector().clone(),l=u.getLeftVector().clone()):(C=n,a=i,u.shortenLeft(1),o=u.getLeftVector().clone(),l=u.getRightVector().clone()),o.x+=r,o.y+=c,l.x+=r,l.y+=c;let g=lt.subtract(a,C).normalize();e.strokeStyle=this.themeManager.getColor("C"),e.lineCap="round",e.lineWidth=this.opts.bondThickness,e.beginPath();let d=t.getLength(),f=1.25/(d/(3*this.opts.bondThickness)),p=!1;for(var m=0;m<1;m+=f){let r=lt.multiplyScalar(g,m*d),c=lt.add(C,r),n=1.5*m,i=lt.multiplyScalar(s[0],n);!p&&m>.5&&(e.stroke(),e.beginPath(),e.strokeStyle=this.themeManager.getColor(t.getRightElement())||this.themeManager.getColor("C"),p=!0),c.subtract(i),e.moveTo(c.x,c.y),c.add(lt.multiplyScalar(i,2)),e.lineTo(c.x,c.y)}e.stroke(),e.restore()}drawDebugText(t,e,r){let c=this.ctx;c.save(),c.font="5px Droid Sans, sans-serif",c.textAlign="start",c.textBaseline="top",c.fillStyle="#ff0000",c.fillText(r,t+this.offsetX,e+this.offsetY),c.restore()}drawBall(t,e,r){let c=this.ctx;c.save(),c.beginPath(),c.arc(t+this.offsetX,e+this.offsetY,this.opts.bondLength/4.5,0,ot.twoPI,!1),c.fillStyle=this.themeManager.getColor(r),c.fill(),c.restore()}drawPoint(t,e,r){let c=this.ctx,n=this.offsetX,i=this.offsetY;c.save(),c.globalCompositeOperation="destination-out",c.beginPath(),c.arc(t+n,e+i,1.5,0,ot.twoPI,!0),c.closePath(),c.fill(),c.globalCompositeOperation="source-over",c.beginPath(),c.arc(t+this.offsetX,e+this.offsetY,.75,0,ot.twoPI,!1),c.fillStyle=this.themeManager.getColor(r),c.fill(),c.restore()}drawText(t,e,r,c,n,i,s,C,a,o={}){let l=this.ctx,h=this.offsetX,u=this.offsetY;l.save(),l.textAlign="start",l.textBaseline="alphabetic";let g="",d=0;s&&(g=ht(s),l.font=this.fontSmall,d=l.measureText(g).width);let f="0",p=0;C>0&&(f=C.toString(),l.font=this.fontSmall,p=l.measureText(f).width),1===s&&"N"===r&&o.hasOwnProperty("0O")&&o.hasOwnProperty("0O-1")&&(o={"0O":{element:"O",count:2,hydrogenCount:0,previousElement:"C",charge:""}},s=0),l.font=this.fontLarge,l.fillStyle=this.themeManager.getColor("BACKGROUND");let m=l.measureText(r);m.totalWidth=m.width+d,m.height=parseInt(this.fontLarge,10);let v=m.width>this.opts.fontSizeLarge?m.width:this.opts.fontSizeLarge;v/=1.5,l.globalCompositeOperation="destination-out",l.beginPath(),l.arc(t+h,e+u,v,0,ot.twoPI,!0),l.closePath(),l.fill(),l.globalCompositeOperation="source-over";let b=-m.width/2,O=-m.width/2;l.fillStyle=this.themeManager.getColor(r),l.fillText(r,t+h+b,e+this.opts.halfFontSizeLarge+u),b+=m.width,s&&(l.font=this.fontSmall,l.fillText(g,t+h+b,e-this.opts.fifthFontSizeSmall+u),b+=d),C>0&&(l.font=this.fontSmall,l.fillText(f,t+h+O-p,e-this.opts.fifthFontSizeSmall+u),O-=p),l.font=this.fontLarge;let N=0,w=0;if(1===c){let r=t+h,c=e+u+this.opts.halfFontSizeLarge;N=this.hydrogenWidth,O-=N,"left"===n?r+=O:"right"===n||"up"===n&&i||"down"===n&&i?r+=b:"up"!==n||i?"down"!==n||i||(c+=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,r-=this.halfHydrogenWidth):(c-=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,r-=this.halfHydrogenWidth),l.fillText("H",r,c),b+=N}else if(c>1){let r=t+h,s=e+u+this.opts.halfFontSizeLarge;N=this.hydrogenWidth,l.font=this.fontSmall,w=l.measureText(c).width,O-=N+w,"left"===n?r+=O:"right"===n||"up"===n&&i||"down"===n&&i?r+=b:"up"!==n||i?"down"!==n||i||(s+=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,r-=this.halfHydrogenWidth):(s-=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,r-=this.halfHydrogenWidth),l.font=this.fontLarge,l.fillText("H",r,s),l.font=this.fontSmall,l.fillText(c,r+this.halfHydrogenWidth+w,s+this.opts.fifthFontSizeSmall),b+=N+this.halfHydrogenWidth+w}for(let r in o){if(!o.hasOwnProperty(r))continue;let c=0,i=0,s=o[r].element,C=o[r].count,a=o[r].hydrogenCount,g=o[r].charge;l.font=this.fontLarge,C>1&&a>0&&(c=l.measureText("(").width,i=l.measureText(")").width);let d=l.measureText(s).width,f=0,p="",m=0;N=0,a>0&&(N=this.hydrogenWidth),l.font=this.fontSmall,C>1&&(f=l.measureText(C).width),0!==g&&(p=ht(g),m=l.measureText(p).width),w=0,a>1&&(w=l.measureText(a).width),l.font=this.fontLarge;let v=t+h,y=e+u+this.opts.halfFontSizeLarge;l.fillStyle=this.themeManager.getColor(s),C>0&&(O-=f),C>1&&a>0&&("left"===n?(O-=i,l.fillText(")",v+O,y)):(l.fillText("(",v+b,y),b+=c)),"left"===n?(O-=d,l.fillText(s,v+O,y)):(l.fillText(s,v+b,y),b+=d),a>0&&("left"===n?(O-=N+w,l.fillText("H",v+O,y),a>1&&(l.font=this.fontSmall,l.fillText(a,v+O+N,y+this.opts.fifthFontSizeSmall))):(l.fillText("H",v+b,y),b+=N,a>1&&(l.font=this.fontSmall,l.fillText(a,v+b,y+this.opts.fifthFontSizeSmall),b+=w))),l.font=this.fontLarge,C>1&&a>0&&("left"===n?(O-=c,l.fillText("(",v+O,y)):(l.fillText(")",v+b,y),b+=i)),l.font=this.fontSmall,C>1&&("left"===n?l.fillText(C,v+O+c+i+N+w+d,y+this.opts.fifthFontSizeSmall):(l.fillText(C,v+b,y+this.opts.fifthFontSizeSmall),b+=f)),0!==g&&("left"===n?l.fillText(p,v+O+c+i+N+w+d,e-this.opts.fifthFontSizeSmall+u):(l.fillText(p,v+b,e-this.opts.fifthFontSizeSmall+u),b+=m))}l.restore()}getChargeText(t){return 1===t?"+":2===t?"2+":-1===t?"-":-2===t?"2-":""}drawDebugPoint(t,e,r="",c="#f00"){this.drawCircle(t,e,2,c,!0,!0,r)}drawAromaticityRing(t){let e=this.ctx,r=ot.apothemFromSideLength(this.opts.bondLength,t.getSize());e.save(),e.strokeStyle=this.themeManager.getColor("C"),e.lineWidth=this.opts.bondThickness,e.beginPath(),e.arc(t.center.x+this.offsetX,t.center.y+this.offsetY,r-this.opts.bondSpacing,0,2*Math.PI,!0),e.closePath(),e.stroke(),e.restore()}clear(){this.ctx.clearRect(0,0,this.canvas.offsetWidth,this.canvas.offsetHeight)}};const gt=U,dt=et(),ft=Ct;ct();const pt=nt();var mt=class t{constructor(t,e=!1){this.vertices=Array(),this.edges=Array(),this.atomIdxToVertexId=Array(),this.vertexIdsToEdgeId={},this.isomeric=e,this._atomIdx=0,this._time=0,this._init(t)}_init(t,e=0,r=null,c=!1){const n=t.atom.element?t.atom.element:t.atom;let i=new pt(n,t.bond);("H"!==n||!t.hasNext&&null===r)&&(i.idx=this._atomIdx,this._atomIdx++),i.branchBond=t.branchBond,i.ringbonds=t.ringbonds,i.bracket=t.atom.element?t.atom:null,i.class=t.atom.class;let s=new dt(i),C=this.vertices[r];if(this.addVertex(s),null!==i.idx&&this.atomIdxToVertexId.push(s.id),null!==r){s.setParentVertexId(r),s.value.addNeighbouringElement(C.value.element),C.addChild(s.id),C.value.addNeighbouringElement(i.element),C.spanningTreeChildren.push(s.id);let t=new ft(r,s.id,1);c?(t.setBondType(s.value.branchBond||"-"),s.id,t.setBondType(s.value.branchBond||"-"),s.id):(t.setBondType(C.value.bondType||"-"),C.id),this.addEdge(t)}let a=t.ringbondCount+1;i.bracket&&(a+=i.bracket.hcount);let o=0;if(i.bracket&&i.bracket.chirality){i.isStereoCenter=!0,o=i.bracket.hcount;for(var l=0;l<o;l++)this._init({atom:"H",isBracket:"false",branches:Array(),branchCount:0,ringbonds:Array(),ringbondCount:!1,next:null,hasNext:!1,bond:"-"},l,s.id,!0)}for(l=0;l<t.branchCount;l++)this._init(t.branches[l],l+a,s.id,!0);t.hasNext&&this._init(t.next,t.branchCount+a,s.id)}clear(){this.vertices=Array(),this.edges=Array(),this.vertexIdsToEdgeId={}}addVertex(t){return t.id=this.vertices.length,this.vertices.push(t),t.id}addEdge(t){let e=this.vertices[t.sourceId],r=this.vertices[t.targetId];return t.id=this.edges.length,this.edges.push(t),this.vertexIdsToEdgeId[t.sourceId+"_"+t.targetId]=t.id,this.vertexIdsToEdgeId[t.targetId+"_"+t.sourceId]=t.id,t.isPartOfAromaticRing=e.value.isPartOfAromaticRing&&r.value.isPartOfAromaticRing,e.value.bondCount+=t.weight,r.value.bondCount+=t.weight,e.edges.push(t.id),r.edges.push(t.id),t.id}getEdge(t,e){let r=this.vertexIdsToEdgeId[t+"_"+e];return void 0===r?null:this.edges[r]}getEdges(t){let e=Array(),r=this.vertices[t];for(var c=0;c<r.neighbours.length;c++)e.push(this.vertexIdsToEdgeId[t+"_"+r.neighbours[c]]);return e}hasEdge(t,e){return void 0!==this.vertexIdsToEdgeId[t+"_"+e]}getVertexList(){let t=[this.vertices.length];for(var e=0;e<this.vertices.length;e++)t[e]=this.vertices[e].id;return t}getEdgeList(){let t=Array(this.edges.length);for(var e=0;e<this.edges.length;e++)t[e]=[this.edges[e].sourceId,this.edges[e].targetId];return t}getAdjacencyMatrix(){let t=this.vertices.length,e=Array(t);for(var r=0;r<t;r++)e[r]=new Array(t),e[r].fill(0);for(r=0;r<this.edges.length;r++){let t=this.edges[r];e[t.sourceId][t.targetId]=1,e[t.targetId][t.sourceId]=1}return e}getComponentsAdjacencyMatrix(){let t=this.vertices.length,e=Array(t),r=this.getBridges();for(var c=0;c<t;c++)e[c]=new Array(t),e[c].fill(0);for(c=0;c<this.edges.length;c++){let t=this.edges[c];e[t.sourceId][t.targetId]=1,e[t.targetId][t.sourceId]=1}for(c=0;c<r.length;c++)e[r[c][0]][r[c][1]]=0,e[r[c][1]][r[c][0]]=0;return e}getSubgraphAdjacencyMatrix(t){let e=t.length,r=Array(e);for(var c=0;c<e;c++){r[c]=new Array(e),r[c].fill(0);for(var n=0;n<e;n++)c!==n&&this.hasEdge(t[c],t[n])&&(r[c][n]=1)}return r}getDistanceMatrix(){let t=this.vertices.length,e=this.getAdjacencyMatrix(),r=Array(t);for(var c=0;c<t;c++)r[c]=Array(t),r[c].fill(1/0);for(c=0;c<t;c++)for(var n=0;n<t;n++)1===e[c][n]&&(r[c][n]=1);for(var i=0;i<t;i++)for(c=0;c<t;c++)for(n=0;n<t;n++)r[c][n]>r[c][i]+r[i][n]&&(r[c][n]=r[c][i]+r[i][n]);return r}getSubgraphDistanceMatrix(t){let e=t.length,r=this.getSubgraphAdjacencyMatrix(t),c=Array(e);for(var n=0;n<e;n++)c[n]=Array(e),c[n].fill(1/0);for(n=0;n<e;n++)for(var i=0;i<e;i++)1===r[n][i]&&(c[n][i]=1);for(var s=0;s<e;s++)for(n=0;n<e;n++)for(i=0;i<e;i++)c[n][i]>c[n][s]+c[s][i]&&(c[n][i]=c[n][s]+c[s][i]);return c}getAdjacencyList(){let t=this.vertices.length,e=Array(t);for(var r=0;r<t;r++){e[r]=[];for(var c=0;c<t;c++)r!==c&&this.hasEdge(this.vertices[r].id,this.vertices[c].id)&&e[r].push(c)}return e}getSubgraphAdjacencyList(t){let e=t.length,r=Array(e);for(var c=0;c<e;c++){r[c]=Array();for(var n=0;n<e;n++)c!==n&&this.hasEdge(t[c],t[n])&&r[c].push(n)}return r}getBridges(){let t=this.vertices.length,e=new Array(t),r=new Array(t),c=new Array(t),n=new Array(t),i=this.getAdjacencyList(),s=Array();e.fill(!1),n.fill(null),this._time=0;for(var C=0;C<t;C++)e[C]||this._bridgeDfs(C,e,r,c,n,i,s);return s}traverseBF(t,e){let r=this.vertices.length,c=new Array(r);c.fill(!1);for(var n=[t];n.length>0;){let t=n.shift(),r=this.vertices[t];e(r);for(var i=0;i<r.neighbours.length;i++){let t=r.neighbours[i];c[t]||(c[t]=!0,n.push(t))}}}getTreeDepth(t,e){if(null===t||null===e)return 0;let r=this.vertices[t].getSpanningTreeNeighbours(e),c=0;for(var n=0;n<r.length;n++){let e=r[n],i=this.getTreeDepth(e,t);i>c&&(c=i)}return c+1}traverseTree(t,e,r,c=999999,n=!1,i=1,s=null){if(null===s&&(s=new Uint8Array(this.vertices.length)),i>c+1||1===s[t])return;s[t]=1;let C=this.vertices[t],a=C.getNeighbours(e);(!n||i>1)&&r(C);for(var o=0;o<a.length;o++)this.traverseTree(a[o],t,r,c,n,i+1,s)}kkLayout(t,e,r,c,n,i=.1,s=.1,C=2e3,a=50,o=1e9){let l=n;for(var h=t.length;h--;){var u=this.vertices[t[h]].neighbours.length}let g=this.getSubgraphDistanceMatrix(t),d=t.length,f=gt.polyCircumradius(500,d),p=gt.centralAngle(d),m=0,v=new Float32Array(d),b=new Float32Array(d),O=Array(d);for(h=d;h--;){let r=this.vertices[t[h]];r.positioned?(v[h]=r.position.x,b[h]=r.position.y):(v[h]=e.x+Math.cos(m)*f,b[h]=e.y+Math.sin(m)*f),O[h]=r.positioned,m+=p}let N=Array(d);for(h=d;h--;){N[h]=new Array(d);for(u=d;u--;)N[h][u]=n*g[h][u]}let w=Array(d);for(h=d;h--;){w[h]=Array(d);for(u=d;u--;)w[h][u]=l*Math.pow(g[h][u],-2)}let y,S,x,A,F,R,k,M=Array(d),E=new Float32Array(d),T=new Float32Array(d);for(h=d;h--;)M[h]=Array(d);for(h=d;h--;){y=v[h],S=b[h],x=0,A=0;let t=d;for(;t--;)h!==t&&(F=v[t],R=b[t],k=1/Math.sqrt((y-F)*(y-F)+(S-R)*(S-R)),M[h][t]=[w[h][t]*(y-F-N[h][t]*(y-F)*k),w[h][t]*(S-R-N[h][t]*(S-R)*k)],M[t][h]=M[h][t],x+=M[h][t][0],A+=M[h][t][1]);E[h]=x,T[h]=A}let I=function(t){return[E[t]*E[t]+T[t]*T[t],E[t],T[t]]},B=function(){let t=0,e=0,r=0,c=0;for(h=d;h--;){let[n,i,s]=I(h);n>t&&!1===O[h]&&(t=n,e=h,r=i,c=s)}return[e,t,r,c]},L=function(t,e,r){let c=0,n=0,i=0,s=v[t],C=b[t],a=N[t],o=w[t];for(h=d;h--;){if(h===t)continue;let e=v[h],r=b[h],l=a[h],u=o[h],g=(s-e)*(s-e),d=1/Math.pow(g+(C-r)*(C-r),1.5);c+=u*(1-l*(C-r)*(C-r)*d),n+=u*(1-l*g*d),i+=u*(l*(s-e)*(C-r)*d)}0===c&&(c=.1),0===n&&(n=.1),0===i&&(i=.1);let l=e/c+r/i;l/=i/c-n/i;let u=-(i*l+e)/c;v[t]+=u,b[t]+=l;let g,f,p,m,O,y=M[t];for(e=0,r=0,s=v[t],C=b[t],h=d;h--;)t!==h&&(g=v[h],f=b[h],p=y[h][0],m=y[h][1],O=1/Math.sqrt((s-g)*(s-g)+(C-f)*(C-f)),u=o[h]*(s-g-a[h]*(s-g)*O),l=o[h]*(C-f-a[h]*(C-f)*O),y[h]=[u,l],e+=u,r+=l,E[h]+=u-p,T[h]+=l-m);E[t]=e,T[t]=r},P=0,D=0,H=0,z=0,$=0,_=0;for(;o>i&&C>$;)for($++,[P,o,D,H]=B(),z=o,_=0;z>s&&a>_;)_++,L(P,D,H),[z,D,H]=I(P);for(h=d;h--;){let e=t[h],r=this.vertices[e];r.position.x=v[h],r.position.y=b[h],r.positioned=!0,r.forcePositioned=!0}}_bridgeDfs(t,e,r,c,n,i,s){e[t]=!0,r[t]=c[t]=++this._time;for(var C=0;C<i[t].length;C++){let a=i[t][C];e[a]?a!==n[t]&&(c[t]=Math.min(c[t],r[a])):(n[a]=t,this._bridgeDfs(a,e,r,c,n,i,s),c[t]=Math.min(c[t],c[a]),c[a]>r[t]&&s.push([t,a]))}}static getConnectedComponents(e){let r=e.length,c=new Array(r),n=new Array;c.fill(!1);for(var i=0;i<r;i++)if(!c[i]){let r=Array();c[i]=!0,r.push(i),t._ccGetDfs(i,c,e,r),r.length>1&&n.push(r)}return n}static getConnectedComponentCount(e){let r=e.length,c=new Array(r),n=0;c.fill(!1);for(var i=0;i<r;i++)c[i]||(c[i]=!0,n++,t._ccCountDfs(i,c,e));return n}static _ccCountDfs(e,r,c){for(var n=0;n<c[e].length;n++){c[e][n]&&!r[n]&&e!==n&&(r[n]=!0,t._ccCountDfs(n,r,c))}}static _ccGetDfs(e,r,c,n){for(var i=0;i<c[e].length;i++){c[e][i]&&!r[i]&&e!==i&&(r[i]=!0,n.push(i),t._ccGetDfs(i,r,c,n))}}};const vt=mt;var bt=class t{static getRings(e,r=!1){let c=e.getComponentsAdjacencyMatrix();if(0===c.length)return null;let n=vt.getConnectedComponents(c),i=Array();for(var s=0;s<n.length;s++){let c=n[s],o=e.getSubgraphAdjacencyMatrix([...c]),l=new Uint16Array(o.length),h=new Uint16Array(o.length);for(var C=0;C<o.length;C++){h[C]=0,l[C]=0;for(var a=0;a<o[C].length;a++)l[C]+=o[C][a]}let u=0;for(C=0;C<o.length;C++)for(a=C+1;a<o.length;a++)u+=o[C][a];let g=u-o.length+1,d=!0;for(C=0;C<l.length;C++)3!==l[C]&&(d=!1);if(d&&(g=2+u-o.length),1===g){i.push([...c]);continue}r&&(g=999);let{d:f,pe:p,pe_prime:m}=t.getPathIncludedDistanceMatrices(o),v=t.getRingCandidates(f,p,m),b=t.getSSSR(v,f,o,p,m,l,h,g);for(C=0;C<b.length;C++){let t=Array(b[C].size),e=0;for(let r of b[C])t[e++]=c[r];i.push(t)}}return i}static matrixToString(t){let e="";for(var r=0;r<t.length;r++){for(var c=0;c<t[r].length;c++)e+=t[r][c]+" ";e+="\n"}return e}static getPathIncludedDistanceMatrices(t){let e=t.length,r=Array(e),c=Array(e),n=Array(e);for(var i=0,s=0,C=0,a=e;a--;){r[a]=Array(e),c[a]=Array(e),n[a]=Array(e);for(var o=e;o--;)r[a][o]=a===o||1===t[a][o]?t[a][o]:Number.POSITIVE_INFINITY,1===r[a][o]?c[a][o]=[[[a,o]]]:c[a][o]=Array(),n[a][o]=Array()}for(var l=e;l--;)for(a=e;a--;)for(o=e;o--;){const t=r[a][o],e=r[a][l]+r[l][o];if(t>e){if(t===e+1)for(n[a][o]=[c[a][o].length],i=c[a][o].length;i--;)for(n[a][o][i]=[c[a][o][i].length],s=c[a][o][i].length;s--;)for(n[a][o][i][s]=[c[a][o][i][s].length],C=c[a][o][i][s].length;C--;)n[a][o][i][s][C]=[c[a][o][i][s][0],c[a][o][i][s][1]];else n[a][o]=Array();for(r[a][o]=e,c[a][o]=[[]],i=c[a][l][0].length;i--;)c[a][o][0].push(c[a][l][0][i]);for(i=c[l][o][0].length;i--;)c[a][o][0].push(c[l][o][0][i])}else if(t===e){if(c[a][l].length&&c[l][o].length)if(c[a][o].length){let t=Array();for(i=c[a][l][0].length;i--;)t.push(c[a][l][0][i]);for(i=c[l][o][0].length;i--;)t.push(c[l][o][0][i]);c[a][o].push(t)}else{let t=Array();for(i=c[a][l][0].length;i--;)t.push(c[a][l][0][i]);for(i=c[l][o][0].length;i--;)t.push(c[l][o][0][i]);c[a][o][0]=t}}else if(t===e-1){if(n[a][o].length){let t=Array();for(i=c[a][l][0].length;i--;)t.push(c[a][l][0][i]);for(i=c[l][o][0].length;i--;)t.push(c[l][o][0][i]);n[a][o].push(t)}else{let t=Array();for(i=c[a][l][0].length;i--;)t.push(c[a][l][0][i]);for(i=c[l][o][0].length;i--;)t.push(c[l][o][0][i]);n[a][o][0]=t}}}return{d:r,pe:c,pe_prime:n}}static getRingCandidates(t,e,r){let c=t.length,n=Array(),i=0;for(let s=0;s<c;s++)for(let C=0;C<c;C++)0===t[s][C]||1===e[s][C].length&&0===r[s][C]||(i=0!==r[s][C].length?2*(t[s][C]+.5):2*t[s][C],i!==1/0&&n.push([i,e[s][C],r[s][C]]));return n.sort((function(t,e){return t[0]-e[0]})),n}static getSSSR(e,r,c,n,i,s,C,a){let o=Array(),l=Array();for(let r=0;r<e.length;r++)if(e[r][0]%2!=0)for(let n=0;n<e[r][2].length;n++){let i=e[r][1][0].concat(e[r][2][n]);for(var h=0;h<i.length;h++)i[h][0].constructor===Array&&(i[h]=i[h][0]);let u=t.bondsToAtoms(i);if(t.getBondCount(u,c)!==u.size||t.pathSetsContain(o,u,i,l,s,C)||(o.push(u),l=l.concat(i)),o.length>a)return o}else for(let n=0;n<e[r][1].length-1;n++){let i=e[r][1][n].concat(e[r][1][n+1]);for(h=0;h<i.length;h++)i[h][0].constructor===Array&&(i[h]=i[h][0]);let u=t.bondsToAtoms(i);if(t.getBondCount(u,c)!==u.size||t.pathSetsContain(o,u,i,l,s,C)||(o.push(u),l=l.concat(i)),o.length>a)return o}return o}static getEdgeCount(t){let e=0,r=t.length;for(var c=r-1;c--;)for(var n=r;n--;)1===t[c][n]&&e++;return e}static getEdgeList(t){let e=t.length,r=Array();for(var c=e-1;c--;)for(var n=e;n--;)1===t[c][n]&&r.push([c,n]);return r}static bondsToAtoms(t){let e=new Set;for(var r=t.length;r--;)e.add(t[r][0]),e.add(t[r][1]);return e}static getBondCount(t,e){let r=0;for(let c of t)for(let n of t)c!==n&&(r+=e[c][n]);return r/2}static pathSetsContain(e,r,c,n,i,s){for(var C=e.length;C--;){if(t.isSupersetOf(r,e[C]))return!0;if(e[C].size===r.size&&t.areSetsEqual(e[C],r))return!0}let a=0,o=!1;for(C=c.length;C--;)for(var l=n.length;l--;)(c[C][0]===n[l][0]&&c[C][1]===n[l][1]||c[C][1]===n[l][0]&&c[C][0]===n[l][1])&&a++,a===c.length&&(o=!0);let h=!1;if(o)for(let t of r)if(s[t]<i[t]){h=!0;break}if(o&&!h)return!0;for(let t of r)s[t]++;return!1}static areSetsEqual(t,e){if(t.size!==e.size)return!1;for(let r of t)if(!e.has(r))return!1;return!0}static isSupersetOf(t,e){for(var r of e)if(!t.has(r))return!1;return!0}};var Ot=class{constructor(t,e){this.colors=t,this.theme=this.colors[e]}getColor(t){return t&&(t=t.toUpperCase())in this.theme?this.theme[t]:this.theme.C}setTheme(t){this.colors.hasOwnProperty(t)&&(this.theme=this.colors[t])}};var Nt=class{static extend(){let t=this,e={},r=!1,c=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(r=arguments[0],c++);let i=function(c){for(var n in c)Object.prototype.hasOwnProperty.call(c,n)&&(r&&"[object Object]"===Object.prototype.toString.call(c[n])?e[n]=t.extend(!0,e[n],c[n]):e[n]=c[n])};for(;c<n;c++){i(arguments[c])}return e}};const wt=U,yt=X,St=tt,xt=st;et();const At=Ct,Ft=nt(),Rt=ct(),kt=rt(),Mt=ut,Et=mt,Tt=bt,It=Ot,Bt=Nt;var Lt=class{constructor(t){this.graph=null,this.doubleBondConfigCount=0,this.doubleBondConfig=null,this.ringIdCounter=0,this.ringConnectionIdCounter=0,this.canvasWrapper=null,this.totalOverlapScore=0,this.defaultOptions={width:500,height:500,scale:0,bondThickness:1,bondLength:30,shortBondLength:.8,bondSpacing:.17*30,atomVisualization:"default",isomeric:!0,debug:!1,terminalCarbons:!1,explicitHydrogens:!0,overlapSensitivity:.42,overlapResolutionIterations:1,compactDrawing:!0,fontFamily:"Arial, Helvetica, sans-serif",fontSizeLarge:11,fontSizeSmall:3,padding:10,experimentalSSSR:!1,kkThreshold:.1,kkInnerThreshold:.1,kkMaxIteration:2e4,kkMaxInnerIteration:50,kkMaxEnergy:1e9,weights:{colormap:null,additionalPadding:20,sigma:10,interval:0,opacity:1},themes:{dark:{C:"#fff",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#aaa",BACKGROUND:"#141414"},light:{C:"#222",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#666",BACKGROUND:"#fff"},oldschool:{C:"#000",O:"#000",N:"#000",F:"#000",CL:"#000",BR:"#000",I:"#000",P:"#000",S:"#000",B:"#000",SI:"#000",H:"#000",BACKGROUND:"#fff"},solarized:{C:"#586e75",O:"#dc322f",N:"#268bd2",F:"#859900",CL:"#16a085",BR:"#cb4b16",I:"#6c71c4",P:"#d33682",S:"#b58900",B:"#2aa198",SI:"#2aa198",H:"#657b83",BACKGROUND:"#fff"},"solarized-dark":{C:"#93a1a1",O:"#dc322f",N:"#268bd2",F:"#859900",CL:"#16a085",BR:"#cb4b16",I:"#6c71c4",P:"#d33682",S:"#b58900",B:"#2aa198",SI:"#2aa198",H:"#839496",BACKGROUND:"#fff"},matrix:{C:"#678c61",O:"#2fc079",N:"#4f7e7e",F:"#90d762",CL:"#82d967",BR:"#23755a",I:"#409931",P:"#c1ff8a",S:"#faff00",B:"#50b45a",SI:"#409931",H:"#426644",BACKGROUND:"#fff"},github:{C:"#24292f",O:"#cf222e",N:"#0969da",F:"#2da44e",CL:"#6fdd8b",BR:"#bc4c00",I:"#8250df",P:"#bf3989",S:"#d4a72c",B:"#fb8f44",SI:"#bc4c00",H:"#57606a",BACKGROUND:"#fff"},carbon:{C:"#161616",O:"#da1e28",N:"#0f62fe",F:"#198038",CL:"#007d79",BR:"#fa4d56",I:"#8a3ffc",P:"#ff832b",S:"#f1c21b",B:"#8a3800",SI:"#e67e22",H:"#525252",BACKGROUND:"#fff"},cyberpunk:{C:"#ea00d9",O:"#ff3131",N:"#0abdc6",F:"#00ff9f",CL:"#00fe00",BR:"#fe9f20",I:"#ff00ff",P:"#fe7f00",S:"#fcee0c",B:"#ff00ff",SI:"#ffffff",H:"#913cb1",BACKGROUND:"#fff"},gruvbox:{C:"#665c54",O:"#cc241d",N:"#458588",F:"#98971a",CL:"#79740e",BR:"#d65d0e",I:"#b16286",P:"#af3a03",S:"#d79921",B:"#689d6a",SI:"#427b58",H:"#7c6f64",BACKGROUND:"#fbf1c7"},"gruvbox-dark":{C:"#ebdbb2",O:"#cc241d",N:"#458588",F:"#98971a",CL:"#b8bb26",BR:"#d65d0e",I:"#b16286",P:"#fe8019",S:"#d79921",B:"#8ec07c",SI:"#83a598",H:"#bdae93",BACKGROUND:"#282828"},custom:{C:"#222",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#666",BACKGROUND:"#fff"}}},this.opts=Bt.extend(!0,this.defaultOptions,t),this.opts.halfBondSpacing=this.opts.bondSpacing/2,this.opts.bondLengthSq=this.opts.bondLength*this.opts.bondLength,this.opts.halfFontSizeLarge=this.opts.fontSizeLarge/2,this.opts.quarterFontSizeLarge=this.opts.fontSizeLarge/4,this.opts.fifthFontSizeSmall=this.opts.fontSizeSmall/5,this.theme=this.opts.themes.dark}draw(t,e,r="light",c=!1){this.initDraw(t,r,c),this.infoOnly||(this.themeManager=new It(this.opts.themes,r),this.canvasWrapper=new Mt(e,this.themeManager,this.opts)),c||(this.processGraph(),this.canvasWrapper.scale(this.graph.vertices),this.drawEdges(this.opts.debug),this.drawVertices(this.opts.debug),this.canvasWrapper.reset(),this.opts.debug&&(console.log(this.graph),console.log(this.rings),console.log(this.ringConnections)))}edgeRingCount(t){let e=this.graph.edges[t],r=this.graph.vertices[e.sourceId],c=this.graph.vertices[e.targetId];return Math.min(r.value.rings.length,c.value.rings.length)}getBridgedRings(){let t=Array();for(var e=0;e<this.rings.length;e++)this.rings[e].isBridged&&t.push(this.rings[e]);return t}getFusedRings(){let t=Array();for(var e=0;e<this.rings.length;e++)this.rings[e].isFused&&t.push(this.rings[e]);return t}getSpiros(){let t=Array();for(var e=0;e<this.rings.length;e++)this.rings[e].isSpiro&&t.push(this.rings[e]);return t}printRingInfo(){let t="";for(var e=0;e<this.rings.length;e++){const r=this.rings[e];t+=r.id+";",t+=r.members.length+";",t+=r.neighbours.length+";",t+=r.isSpiro?"true;":"false;",t+=r.isFused?"true;":"false;",t+=r.isBridged?"true;":"false;",t+=r.rings.length+";",t+="\n"}return t}rotateDrawing(){let t=0,e=0,r=0;for(var c=0;c<this.graph.vertices.length;c++){let i=this.graph.vertices[c];if(i.value.isDrawn)for(var n=c+1;n<this.graph.vertices.length;n++){let s=this.graph.vertices[n];if(!s.value.isDrawn)continue;let C=i.position.distanceSq(s.position);C>r&&(r=C,t=c,e=n)}}let i=-St.subtract(this.graph.vertices[t].position,this.graph.vertices[e].position).angle();if(!isNaN(i)){let t=i%.523599;t<.2617995?i-=t:i+=.523599-t;for(c=0;c<this.graph.vertices.length;c++)c!==e&&this.graph.vertices[c].position.rotateAround(i,this.graph.vertices[e].position);for(c=0;c<this.rings.length;c++)this.rings[c].center.rotateAround(i,this.graph.vertices[e].position)}}getTotalOverlapScore(){return this.totalOverlapScore}getRingCount(){return this.rings.length}hasBridgedRing(){return this.bridgedRing}getHeavyAtomCount(){let t=0;for(var e=0;e<this.graph.vertices.length;e++)"H"!==this.graph.vertices[e].value.element&&t++;return t}getMolecularFormula(t=null){let e="",r=new Map,c=null===t?this.graph:new Et(t,this.opts.isomeric);for(var n=0;n<c.vertices.length;n++){let t=c.vertices[n].value;if(r.has(t.element)?r.set(t.element,r.get(t.element)+1):r.set(t.element,1),t.bracket&&!t.bracket.chirality&&(r.has("H")?r.set("H",r.get("H")+t.bracket.hcount):r.set("H",t.bracket.hcount)),!t.bracket){let e=Ft.maxBonds[t.element]-t.bondCount;t.isPartOfAromaticRing&&e--,r.has("H")?r.set("H",r.get("H")+e):r.set("H",e)}}if(r.has("C")){let t=r.get("C");e+="C"+(t>1?t:""),r.delete("C")}if(r.has("H")){let t=r.get("H");e+="H"+(t>1?t:""),r.delete("H")}return Object.keys(Ft.atomicNumbers).sort().map((t=>{if(r.has(t)){let c=r.get(t);e+=t+(c>1?c:"")}})),e}getRingbondType(t,e){if(t.value.getRingbondCount()<1||e.value.getRingbondCount()<1)return null;for(var r=0;r<t.value.ringbonds.length;r++)for(var c=0;c<e.value.ringbonds.length;c++)if(t.value.ringbonds[r].id===e.value.ringbonds[c].id)return"-"===t.value.ringbonds[r].bondType?e.value.ringbonds[c].bond:t.value.ringbonds[r].bond;return null}initDraw(t,e,r,c){this.data=t,this.infoOnly=r,this.ringIdCounter=0,this.ringConnectionIdCounter=0,this.graph=new Et(t,this.opts.isomeric),this.rings=Array(),this.ringConnections=Array(),this.originalRings=Array(),this.originalRingConnections=Array(),this.bridgedRing=!1,this.doubleBondConfigCount=null,this.doubleBondConfig=null,this.highlight_atoms=c,this.initRings(),this.initHydrogens()}processGraph(){this.position(),this.restoreRingInformation(),this.resolvePrimaryOverlaps();let t=this.getOverlapScore();this.totalOverlapScore=this.getOverlapScore().total;for(var e=0;e<this.opts.overlapResolutionIterations;e++)for(var r=0;r<this.graph.edges.length;r++){let e=this.graph.edges[r];if(this.isEdgeRotatable(e)){let r=this.graph.getTreeDepth(e.sourceId,e.targetId),c=this.graph.getTreeDepth(e.targetId,e.sourceId),n=e.targetId,i=e.sourceId;if(r>c&&(n=e.sourceId,i=e.targetId),this.getSubtreeOverlapScore(i,n,t.vertexScores).value>this.opts.overlapSensitivity){let e=this.graph.vertices[n],r=this.graph.vertices[i],c=r.getNeighbours(n);if(1===c.length){let t=this.graph.vertices[c[0]],n=t.position.getRotateAwayFromAngle(e.position,r.position,wt.toRad(120));this.rotateSubtree(t.id,r.id,n,r.position);let i=this.getOverlapScore().total;i>this.totalOverlapScore?this.rotateSubtree(t.id,r.id,-n,r.position):this.totalOverlapScore=i}else if(2===c.length){if(0!==r.value.rings.length&&0!==e.value.rings.length)continue;let t=this.graph.vertices[c[0]],n=this.graph.vertices[c[1]];if(1===t.value.rings.length&&1===n.value.rings.length){if(t.value.rings[0]!==n.value.rings[0])continue}else{if(0!==t.value.rings.length||0!==n.value.rings.length)continue;{let c=t.position.getRotateAwayFromAngle(e.position,r.position,wt.toRad(120)),i=n.position.getRotateAwayFromAngle(e.position,r.position,wt.toRad(120));this.rotateSubtree(t.id,r.id,c,r.position),this.rotateSubtree(n.id,r.id,i,r.position);let s=this.getOverlapScore().total;s>this.totalOverlapScore?(this.rotateSubtree(t.id,r.id,-c,r.position),this.rotateSubtree(n.id,r.id,-i,r.position)):this.totalOverlapScore=s}}}t=this.getOverlapScore()}}}this.resolveSecondaryOverlaps(t.scores),this.opts.isomeric&&this.annotateStereochemistry(),this.opts.compactDrawing&&"default"===this.opts.atomVisualization&&this.initPseudoElements(),this.rotateDrawing()}initRings(){let t=new Map;for(var e=this.graph.vertices.length-1;e>=0;e--){let c=this.graph.vertices[e];if(0!==c.value.ringbonds.length)for(var r=0;r<c.value.ringbonds.length;r++){let e=c.value.ringbonds[r].id,n=c.value.ringbonds[r].bond;if(t.has(e)){let i=c.id,s=t.get(e)[0],C=t.get(e)[1],a=new At(i,s,1);a.setBondType(C||n||"-");let o=this.graph.addEdge(a),l=this.graph.vertices[s];c.addRingbondChild(s,r),c.value.addNeighbouringElement(l.value.element),l.addRingbondChild(i,r),l.value.addNeighbouringElement(c.value.element),c.edges.push(o),l.edges.push(o),t.delete(e)}else t.set(e,[c.id,n])}}let c=Tt.getRings(this.graph,this.opts.experimentalSSSR);if(null!==c){for(e=0;e<c.length;e++){let t=[...c[e]],n=this.addRing(new Rt(t));for(r=0;r<t.length;r++)this.graph.vertices[t[r]].value.rings.push(n)}for(e=0;e<this.rings.length-1;e++)for(r=e+1;r<this.rings.length;r++){let t=this.rings[e],c=this.rings[r],n=new kt(t,c);n.vertices.size>0&&this.addRingConnection(n)}for(e=0;e<this.rings.length;e++){let t=this.rings[e];t.neighbours=kt.getNeighbours(this.ringConnections,t.id)}for(e=0;e<this.rings.length;e++){let t=this.rings[e];this.graph.vertices[t.members[0]].value.addAnchoredRing(t.id)}for(this.backupRingInformation();this.rings.length>0;){let t=-1;for(e=0;e<this.rings.length;e++){let r=this.rings[e];this.isPartOfBridgedRing(r.id)&&!r.isBridged&&(t=r.id)}if(-1===t)break;let r=this.getRing(t),c=this.getBridgedRingRings(r.id);this.bridgedRing=!0,this.createBridgedRing(c,r.members[0]);for(e=0;e<c.length;e++)this.removeRing(c[e])}}}initHydrogens(){if(!this.opts.explicitHydrogens)for(var t=0;t<this.graph.vertices.length;t++){let e=this.graph.vertices[t];if("H"!==e.value.element)continue;let r=this.graph.vertices[e.neighbours[0]];r.value.hasHydrogen=!0,(!r.value.isStereoCenter||r.value.rings.length<2&&!r.value.bridgedRing||r.value.bridgedRing&&r.value.originalRings.length<2)&&(e.value.isDrawn=!1)}}getBridgedRingRings(t){let e=Array(),r=this,c=function(t){let n=r.getRing(t);e.push(t);for(var i=0;i<n.neighbours.length;i++){let s=n.neighbours[i];-1===e.indexOf(s)&&s!==t&&kt.isBridge(r.ringConnections,r.graph.vertices,t,s)&&c(s)}};return c(t),yt.unique(e)}isPartOfBridgedRing(t){for(var e=0;e<this.ringConnections.length;e++)if(this.ringConnections[e].containsRing(t)&&this.ringConnections[e].isBridge(this.graph.vertices))return!0;return!1}createBridgedRing(t,e){let r=new Set,c=new Set,n=new Set;for(var i=0;i<t.length;i++){let e=this.getRing(t[i]);e.isPartOfBridged=!0;for(var s=0;s<e.members.length;s++)c.add(e.members[s]);for(s=0;s<e.neighbours.length;s++){let r=e.neighbours[s];-1===t.indexOf(r)&&n.add(e.neighbours[s])}}let C=new Set;for(let e of c){let c=this.graph.vertices[e],n=yt.intersection(t,c.value.rings);1===c.value.rings.length||1===n.length?r.add(c.id):C.add(c.id)}Array();let a=Array();for(let t of C){let e=this.graph.vertices[t],c=!1;for(let t=0;t<e.edges.length;t++)1===this.edgeRingCount(e.edges[t])&&(c=!0);c?(e.value.isBridgeNode=!0,r.add(e.id)):(e.value.isBridge=!0,r.add(e.id))}let o=new Rt([...r]);this.addRing(o),o.isBridged=!0,o.neighbours=[...n];for(i=0;i<t.length;i++)o.rings.push(this.getRing(t[i]).clone());for(i=0;i<o.members.length;i++)this.graph.vertices[o.members[i]].value.bridgedRing=o.id;for(i=0;i<a.length;i++){this.graph.vertices[a[i]].value.rings=Array()}for(let e of r){let r=this.graph.vertices[e];r.value.rings=yt.removeAll(r.value.rings,t),r.value.rings.push(o.id)}for(i=0;i<t.length;i++)for(s=i+1;s<t.length;s++)this.removeRingConnectionsBetween(t[i],t[s]);for(let e of n){let r=this.getRingConnections(e,t);for(s=0;s<r.length;s++)this.getRingConnection(r[s]).updateOther(o.id,e);this.getRing(e).neighbours.push(o.id)}return o}areVerticesInSameRing(t,e){for(var r=0;r<t.value.rings.length;r++)for(var c=0;c<e.value.rings.length;c++)if(t.value.rings[r]===e.value.rings[c])return!0;return!1}getCommonRings(t,e){let r=Array();for(var c=0;c<t.value.rings.length;c++)for(var n=0;n<e.value.rings.length;n++)t.value.rings[c]==e.value.rings[n]&&r.push(t.value.rings[c]);return r}getLargestOrAromaticCommonRing(t,e){let r=this.getCommonRings(t,e),c=0,n=null;for(var i=0;i<r.length;i++){let t=this.getRing(r[i]),e=t.getSize();if(t.isBenzeneLike(this.graph.vertices))return t;e>c&&(c=e,n=t)}return n}getVerticesAt(t,e,r){let c=Array();for(var n=0;n<this.graph.vertices.length;n++){let i=this.graph.vertices[n];i.id!==r&&i.positioned&&(t.distanceSq(i.position)<=e*e&&c.push(i.id))}return c}getClosestVertex(t){let e=99999,r=null;for(var c=0;c<this.graph.vertices.length;c++){let n=this.graph.vertices[c];if(n.id===t.id)continue;let i=t.position.distanceSq(n.position);i<e&&(e=i,r=n)}return r}addRing(t){return t.id=this.ringIdCounter++,this.rings.push(t),t.id}removeRing(t){this.rings=this.rings.filter((function(e){return e.id!==t})),this.ringConnections=this.ringConnections.filter((function(e){return e.firstRingId!==t&&e.secondRingId!==t}));for(var e=0;e<this.rings.length;e++){let r=this.rings[e];r.neighbours=r.neighbours.filter((function(e){return e!==t}))}}getRing(t){for(var e=0;e<this.rings.length;e++)if(this.rings[e].id==t)return this.rings[e]}addRingConnection(t){return t.id=this.ringConnectionIdCounter++,this.ringConnections.push(t),t.id}removeRingConnection(t){this.ringConnections=this.ringConnections.filter((function(e){return e.id!==t}))}removeRingConnectionsBetween(t,e){let r=Array();for(var c=0;c<this.ringConnections.length;c++){let n=this.ringConnections[c];(n.firstRingId===t&&n.secondRingId===e||n.firstRingId===e&&n.secondRingId===t)&&r.push(n.id)}for(c=0;c<r.length;c++)this.removeRingConnection(r[c])}getRingConnection(t){for(var e=0;e<this.ringConnections.length;e++)if(this.ringConnections[e].id==t)return this.ringConnections[e]}getRingConnections(t,e){let r=Array();for(var c=0;c<this.ringConnections.length;c++){let i=this.ringConnections[c];for(var n=0;n<e.length;n++){let c=e[n];(i.firstRingId===t&&i.secondRingId===c||i.firstRingId===c&&i.secondRingId===t)&&r.push(i.id)}}return r}getOverlapScore(){let t=0,e=new Float32Array(this.graph.vertices.length);for(var r=0;r<this.graph.vertices.length;r++)e[r]=0;for(r=0;r<this.graph.vertices.length;r++)for(var c=this.graph.vertices.length;--c>r;){let n=this.graph.vertices[r],i=this.graph.vertices[c];if(!n.value.isDrawn||!i.value.isDrawn)continue;let s=St.subtract(n.position,i.position).lengthSq();if(s<this.opts.bondLengthSq){let n=(this.opts.bondLength-Math.sqrt(s))/this.opts.bondLength;t+=n,e[r]+=n,e[c]+=n}}let n=Array();for(r=0;r<this.graph.vertices.length;r++)n.push({id:r,score:e[r]});return n.sort((function(t,e){return e.score-t.score})),{total:t,scores:n,vertexScores:e}}chooseSide(t,e,r){let c=t.getNeighbours(e.id),n=e.getNeighbours(t.id),i=c.length,s=n.length,C=yt.merge(c,n),a=[0,0];for(var o=0;o<C.length;o++){this.graph.vertices[C[o]].position.sameSideAs(t.position,e.position,r[0])?a[0]++:a[1]++}let l=[0,0];for(o=0;o<this.graph.vertices.length;o++){this.graph.vertices[o].position.sameSideAs(t.position,e.position,r[0])?l[0]++:l[1]++}return{totalSideCount:l,totalPosition:l[0]>l[1]?0:1,sideCount:a,position:a[0]>a[1]?0:1,anCount:i,bnCount:s}}setRingCenter(t){let e=t.getSize(),r=new St(0,0);for(var c=0;c<e;c++)r.add(this.graph.vertices[t.members[c]].position);t.center=r.divide(e)}getSubringCenter(t,e){let r=e.value.originalRings,c=t.center,n=Number.MAX_VALUE;for(var i=0;i<r.length;i++)for(var s=0;s<t.rings.length;s++)r[i]===t.rings[s].id&&t.rings[s].getSize()<n&&(c=t.rings[s].center,n=t.rings[s].getSize());return c}drawEdges(t){let e=this,r=Array(this.graph.edges.length);if(r.fill(!1),this.graph.traverseBF(0,(function(c){let n=e.graph.getEdges(c.id);for(var i=0;i<n.length;i++){let c=n[i];r[c]||(r[c]=!0,e.drawEdge(c,t))}})),!this.bridgedRing)for(var c=0;c<this.rings.length;c++){let t=this.rings[c];this.isRingAromatic(t)&&this.canvasWrapper.drawAromaticityRing(t)}}drawEdge(t,e){let r=this,c=this.graph.edges[t],n=this.graph.vertices[c.sourceId],i=this.graph.vertices[c.targetId],s=n.value.element,C=i.value.element;if(!(n.value.isDrawn&&i.value.isDrawn||"default"!==this.opts.atomVisualization))return;let a=n.position,o=i.position,l=this.getEdgeNormals(c),h=yt.clone(l);if(h[0].multiplyScalar(10).add(a),h[1].multiplyScalar(10).add(a),"="===c.bondType||"="===this.getRingbondType(n,i)||c.isPartOfAromaticRing&&this.bridgedRing){let t=this.areVerticesInSameRing(n,i),e=this.chooseSide(n,i,h);if(t){let t=this.getLargestOrAromaticCommonRing(n,i).center;l[0].multiplyScalar(r.opts.bondSpacing),l[1].multiplyScalar(r.opts.bondSpacing);let e=null;e=t.sameSideAs(n.position,i.position,St.add(a,l[0]))?new xt(St.add(a,l[0]),St.add(o,l[0]),s,C):new xt(St.add(a,l[1]),St.add(o,l[1]),s,C),e.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),c.isPartOfAromaticRing?this.canvasWrapper.drawLine(e,!0):this.canvasWrapper.drawLine(e),this.canvasWrapper.drawLine(new xt(a,o,s,C))}else if(c.center||n.isTerminal()&&i.isTerminal()){l[0].multiplyScalar(r.opts.halfBondSpacing),l[1].multiplyScalar(r.opts.halfBondSpacing);let t=new xt(St.add(a,l[0]),St.add(o,l[0]),s,C),e=new xt(St.add(a,l[1]),St.add(o,l[1]),s,C);this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(e)}else if(0==e.anCount&&e.bnCount>1||0==e.bnCount&&e.anCount>1){l[0].multiplyScalar(r.opts.halfBondSpacing),l[1].multiplyScalar(r.opts.halfBondSpacing);let t=new xt(St.add(a,l[0]),St.add(o,l[0]),s,C),e=new xt(St.add(a,l[1]),St.add(o,l[1]),s,C);this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(e)}else if(e.sideCount[0]>e.sideCount[1]){l[0].multiplyScalar(r.opts.bondSpacing),l[1].multiplyScalar(r.opts.bondSpacing);let t=new xt(St.add(a,l[0]),St.add(o,l[0]),s,C);t.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(new xt(a,o,s,C))}else if(e.sideCount[0]<e.sideCount[1]){l[0].multiplyScalar(r.opts.bondSpacing),l[1].multiplyScalar(r.opts.bondSpacing);let t=new xt(St.add(a,l[1]),St.add(o,l[1]),s,C);t.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(new xt(a,o,s,C))}else if(e.totalSideCount[0]>e.totalSideCount[1]){l[0].multiplyScalar(r.opts.bondSpacing),l[1].multiplyScalar(r.opts.bondSpacing);let t=new xt(St.add(a,l[0]),St.add(o,l[0]),s,C);t.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(new xt(a,o,s,C))}else if(e.totalSideCount[0]<=e.totalSideCount[1]){l[0].multiplyScalar(r.opts.bondSpacing),l[1].multiplyScalar(r.opts.bondSpacing);let t=new xt(St.add(a,l[1]),St.add(o,l[1]),s,C);t.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(new xt(a,o,s,C))}}else if("#"===c.bondType){l[0].multiplyScalar(r.opts.bondSpacing/1.5),l[1].multiplyScalar(r.opts.bondSpacing/1.5);let t=new xt(St.add(a,l[0]),St.add(o,l[0]),s,C),e=new xt(St.add(a,l[1]),St.add(o,l[1]),s,C);this.canvasWrapper.drawLine(t),this.canvasWrapper.drawLine(e),this.canvasWrapper.drawLine(new xt(a,o,s,C))}else if("."===c.bondType);else{let t=n.value.isStereoCenter,e=i.value.isStereoCenter;"up"===c.wedge?this.canvasWrapper.drawWedge(new xt(a,o,s,C,t,e)):"down"===c.wedge?this.canvasWrapper.drawDashedWedge(new xt(a,o,s,C,t,e)):this.canvasWrapper.drawLine(new xt(a,o,s,C,t,e))}if(e){let e=St.midpoint(a,o);this.canvasWrapper.drawDebugText(e.x,e.y,"e: "+t)}}drawVertices(t){var e=this.graph.vertices.length;for(e=0;e<this.graph.vertices.length;e++){let r=this.graph.vertices[e],c=r.value,n=0,i=0,s=r.value.bondCount,C=c.element,a=Ft.maxBonds[C]-s,o=r.getTextDirection(this.graph.vertices),l=!(!this.opts.terminalCarbons&&"C"===C&&!c.hasAttachedPseudoElements)&&r.isTerminal(),h="C"===c.element;if("N"===c.element&&c.isPartOfAromaticRing&&(a=0),c.bracket&&(a=c.bracket.hcount,n=c.bracket.charge,i=c.bracket.isotope),"allballs"===this.opts.atomVisualization)this.canvasWrapper.drawBall(r.position.x,r.position.y,C);else if(c.isDrawn&&(!h||c.drawExplicit||l||c.hasAttachedPseudoElements)||1===this.graph.vertices.length)"default"===this.opts.atomVisualization?this.canvasWrapper.drawText(r.position.x,r.position.y,C,a,o,l,n,i,this.graph.vertices.length,c.getAttachedPseudoElements()):"balls"===this.opts.atomVisualization&&this.canvasWrapper.drawBall(r.position.x,r.position.y,C);else if(2===r.getNeighbourCount()&&1==r.forcePositioned){let t=this.graph.vertices[r.neighbours[0]].position,e=this.graph.vertices[r.neighbours[1]].position,c=St.threePointangle(r.position,t,e);Math.abs(Math.PI-c)<.1&&this.canvasWrapper.drawPoint(r.position.x,r.position.y,C)}if(t){let t="v: "+r.id+" "+yt.print(c.ringbonds);this.canvasWrapper.drawDebugText(r.position.x,r.position.y,t)}}if(this.opts.debug)for(e=0;e<this.rings.length;e++){let t=this.rings[e].center;this.canvasWrapper.drawDebugPoint(t.x,t.y,"r: "+this.rings[e].id)}}position(){let t=null;for(var e=0;e<this.graph.vertices.length;e++)if(null!==this.graph.vertices[e].value.bridgedRing){t=this.graph.vertices[e];break}for(e=0;e<this.rings.length;e++)this.rings[e].isBridged&&(t=this.graph.vertices[this.rings[e].members[0]]);this.rings.length>0&&null===t&&(t=this.graph.vertices[this.rings[0].members[0]]),null===t&&(t=this.graph.vertices[0]),this.createNextBond(t,null,0)}backupRingInformation(){this.originalRings=Array(),this.originalRingConnections=Array();for(var t=0;t<this.rings.length;t++)this.originalRings.push(this.rings[t]);for(t=0;t<this.ringConnections.length;t++)this.originalRingConnections.push(this.ringConnections[t]);for(t=0;t<this.graph.vertices.length;t++)this.graph.vertices[t].value.backupRings()}restoreRingInformation(){let t=this.getBridgedRings();this.rings=Array(),this.ringConnections=Array();for(var e=0;e<t.length;e++){let c=t[e];for(var r=0;r<c.rings.length;r++){let t=c.rings[r];this.originalRings[t.id].center=t.center}}for(e=0;e<this.originalRings.length;e++)this.rings.push(this.originalRings[e]);for(e=0;e<this.originalRingConnections.length;e++)this.ringConnections.push(this.originalRingConnections[e]);for(e=0;e<this.graph.vertices.length;e++)this.graph.vertices[e].value.restoreRings()}createRing(t,e=null,r=null,c=null){if(t.positioned)return;e=e||new St(0,0);let n=t.getOrderedNeighbours(this.ringConnections),i=r?St.subtract(r.position,e).angle():0,s=wt.polyCircumradius(this.opts.bondLength,t.getSize()),C=wt.centralAngle(t.getSize());t.centralAngle=C;let a=i,o=this,l=r?r.id:null;if(-1===t.members.indexOf(l)&&(r&&(r.positioned=!1),l=t.members[0]),t.isBridged){this.graph.kkLayout(t.members.slice(),e,r.id,t,this.opts.bondLength,this.opts.kkThreshold,this.opts.kkInnerThreshold,this.opts.kkMaxIteration,this.opts.kkMaxInnerIteration,this.opts.kkMaxEnergy),t.positioned=!0,this.setRingCenter(t),e=t.center;for(var h=0;h<t.rings.length;h++)this.setRingCenter(t.rings[h])}else t.eachMember(this.graph.vertices,(function(r){let c=o.graph.vertices[r];c.positioned||c.setPosition(e.x+Math.cos(a)*s,e.y+Math.sin(a)*s),a+=C,(!t.isBridged||t.rings.length<3)&&(c.angle=a,c.positioned=!0)}),l,c?c.id:null);t.positioned=!0,t.center=e;for(h=0;h<n.length;h++){let r=this.getRing(n[h].neighbour);if(r.positioned)continue;let c=kt.getVertices(this.ringConnections,t.id,r.id);if(2===c.length){t.isFused=!0,r.isFused=!0;let n=this.graph.vertices[c[0]],i=this.graph.vertices[c[1]],s=St.midpoint(n.position,i.position),C=St.normals(n.position,i.position);C[0].normalize(),C[1].normalize();let a=wt.polyCircumradius(this.opts.bondLength,r.getSize()),o=wt.apothem(a,r.getSize());C[0].multiplyScalar(o).add(s),C[1].multiplyScalar(o).add(s);let l=C[0];St.subtract(e,C[1]).lengthSq()>St.subtract(e,C[0]).lengthSq()&&(l=C[1]);let h=St.subtract(n.position,l),u=St.subtract(i.position,l);-1===h.clockwise(u)?r.positioned||this.createRing(r,l,n,i):r.positioned||this.createRing(r,l,i,n)}else if(1===c.length){t.isSpiro=!0,r.isSpiro=!0;let n=this.graph.vertices[c[0]],i=St.subtract(e,n.position);i.invert(),i.normalize();let s=wt.polyCircumradius(this.opts.bondLength,r.getSize());i.multiplyScalar(s),i.add(n.position),r.positioned||this.createRing(r,i,n)}}for(h=0;h<t.members.length;h++){let e=this.graph.vertices[t.members[h]],r=e.neighbours;for(var u=0;u<r.length;u++){let t=this.graph.vertices[r[u]];t.positioned||(t.value.isConnectedToRing=!0,this.createNextBond(t,e,0))}}}rotateSubtree(t,e,r,c){let n=this;this.graph.traverseTree(t,e,(function(t){t.position.rotateAround(r,c);for(var e=0;e<t.value.anchoredRings.length;e++){let i=n.rings[t.value.anchoredRings[e]];i&&i.center.rotateAround(r,c)}}))}getSubtreeOverlapScore(t,e,r){let c=this,n=0,i=new St(0,0),s=0;return this.graph.traverseTree(t,e,(function(t){if(!t.value.isDrawn)return;let e=r[t.id];e>c.opts.overlapSensitivity&&(n+=e,s++);let C=c.graph.vertices[t.id].position.clone();C.multiplyScalar(e),i.add(C)})),i.divide(n),{value:n/s,center:i}}getCurrentCenterOfMass(){let t=new St(0,0),e=0;for(var r=0;r<this.graph.vertices.length;r++){let c=this.graph.vertices[r];c.positioned&&(t.add(c.position),e++)}return t.divide(e)}getCurrentCenterOfMassInNeigbourhood(t,e=2*this.opts.bondLength){let r=new St(0,0),c=0,n=e*e;for(var i=0;i<this.graph.vertices.length;i++){let e=this.graph.vertices[i];e.positioned&&t.distanceSq(e.position)<n&&(r.add(e.position),c++)}return r.divide(c)}resolvePrimaryOverlaps(){let t=Array(),e=Array(this.graph.vertices.length);for(var r=0;r<this.rings.length;r++){let i=this.rings[r];for(var c=0;c<i.members.length;c++){let r=this.graph.vertices[i.members[c]];if(e[r.id])continue;e[r.id]=!0;let s=this.getNonRingNeighbours(r.id);if(s.length>1){let e=Array();for(var n=0;n<r.value.rings.length;n++)e.push(r.value.rings[n]);t.push({common:r,rings:e,vertices:s})}else if(1===s.length&&2===r.value.rings.length){let e=Array();for(n=0;n<r.value.rings.length;n++)e.push(r.value.rings[n]);t.push({common:r,rings:e,vertices:s})}}}for(r=0;r<t.length;r++){let e=t[r];if(2===e.vertices.length){let t=e.vertices[0],r=e.vertices[1];if(!t.value.isDrawn||!r.value.isDrawn)continue;let c=(2*Math.PI-this.getRing(e.rings[0]).getAngle())/6;this.rotateSubtree(t.id,e.common.id,c,e.common.position),this.rotateSubtree(r.id,e.common.id,-c,e.common.position);let n=this.getOverlapScore(),i=this.getSubtreeOverlapScore(t.id,e.common.id,n.vertexScores),s=this.getSubtreeOverlapScore(r.id,e.common.id,n.vertexScores),C=i.value+s.value;this.rotateSubtree(t.id,e.common.id,-2*c,e.common.position),this.rotateSubtree(r.id,e.common.id,2*c,e.common.position),n=this.getOverlapScore(),i=this.getSubtreeOverlapScore(t.id,e.common.id,n.vertexScores),s=this.getSubtreeOverlapScore(r.id,e.common.id,n.vertexScores),i.value+s.value>C&&(this.rotateSubtree(t.id,e.common.id,2*c,e.common.position),this.rotateSubtree(r.id,e.common.id,-2*c,e.common.position))}else 1===e.vertices.length&&e.rings.length}}resolveSecondaryOverlaps(t){for(var e=0;e<t.length;e++)if(t[e].score>this.opts.overlapSensitivity){let r=this.graph.vertices[t[e].id];if(r.isTerminal()){let t=this.getClosestVertex(r);if(t){let e=null;e=t.isTerminal()?0===t.id?this.graph.vertices[1].position:t.previousPosition:0===t.id?this.graph.vertices[1].position:t.position;let c=0===r.id?this.graph.vertices[1].position:r.previousPosition;r.position.rotateAwayFrom(e,c,wt.toRad(20))}}}}getLastVertexWithAngle(t){let e=0,r=null;for(;!e&&t;)r=this.graph.vertices[t],e=r.angle,t=r.parentVertexId;return r}createNextBond(t,e=null,r=0,c=!1,n=!1){if(t.positioned&&!n)return;let i=!1;if(e){let r=this.graph.getEdge(t.id,e.id);"/"!==r.bondType&&"\\"!==r.bondType||++this.doubleBondConfigCount%2!=1||null===this.doubleBondConfig&&(this.doubleBondConfig=r.bondType,i=!0,null===e.parentVertexId&&t.value.branchBond&&("/"===this.doubleBondConfig?this.doubleBondConfig="\\":"\\"===this.doubleBondConfig&&(this.doubleBondConfig="/")))}if(!n)if(e)if(e.value.rings.length>0){let r=e.neighbours,c=null,n=new St(0,0);if(null===e.value.bridgedRing&&e.value.rings.length>1)for(var s=0;s<r.length;s++){let t=this.graph.vertices[r[s]];if(yt.containsAll(t.value.rings,e.value.rings)){c=t;break}}if(null===c){for(s=0;s<r.length;s++){let t=this.graph.vertices[r[s]];t.positioned&&this.areVerticesInSameRing(t,e)&&n.add(St.subtract(t.position,e.position))}n.invert().normalize().multiplyScalar(this.opts.bondLength).add(e.position)}else n=c.position.clone().rotateAround(Math.PI,e.position);t.previousPosition=e.position,t.setPositionFromVector(n),t.positioned=!0}else{let c=new St(this.opts.bondLength,0);c.rotate(r),c.add(e.position),t.setPositionFromVector(c),t.previousPosition=e.position,t.positioned=!0}else{let e=new St(this.opts.bondLength,0);e.rotate(wt.toRad(-60)),t.previousPosition=e,t.setPosition(this.opts.bondLength,0),t.angle=wt.toRad(-60),null===t.value.bridgedRing&&(t.positioned=!0)}if(null!==t.value.bridgedRing){let e=this.getRing(t.value.bridgedRing);if(!e.positioned){let r=St.subtract(t.previousPosition,t.position);r.invert(),r.normalize();let c=wt.polyCircumradius(this.opts.bondLength,e.members.length);r.multiplyScalar(c),r.add(t.position),this.createRing(e,r,t)}}else if(t.value.rings.length>0){let e=this.getRing(t.value.rings[0]);if(!e.positioned){let r=St.subtract(t.previousPosition,t.position);r.invert(),r.normalize();let c=wt.polyCircumradius(this.opts.bondLength,e.getSize());r.multiplyScalar(c),r.add(t.position),this.createRing(e,r,t)}}else{t.value.isStereoCenter;let r=t.getNeighbours(),n=Array();for(s=0;s<r.length;s++)this.graph.vertices[r[s]].value.isDrawn&&n.push(r[s]);e&&(n=yt.remove(n,e.id));let C=t.getAngle();if(1===n.length){let r=this.graph.vertices[n[0]];if("#"===t.value.bondType||e&&"#"===e.value.bondType||"="===t.value.bondType&&e&&0===e.value.rings.length&&"="===e.value.bondType&&"-"!==t.value.branchBond){if(t.value.drawExplicit=!1,e){this.graph.getEdge(t.id,e.id).center=!0}this.graph.getEdge(t.id,r.id).center=!0,("#"===t.value.bondType||e&&"#"===e.value.bondType)&&(r.angle=0),r.drawExplicit=!0,this.createNextBond(r,t,C+r.angle)}else if(e&&e.value.rings.length>0){let e=wt.toRad(60),c=-e,n=new St(this.opts.bondLength,0),i=new St(this.opts.bondLength,0);n.rotate(e).add(t.position),i.rotate(c).add(t.position);let s=this.getCurrentCenterOfMass(),a=n.distanceSq(s),o=i.distanceSq(s);r.angle=a<o?c:e,this.createNextBond(r,t,C+r.angle)}else{let n=t.angle;if(e&&e.neighbours.length>3)n=n>0?Math.min(1.0472,n):n<0?Math.max(-1.0472,n):1.0472;else if(!n){n=this.getLastVertexWithAngle(t.id).angle,n||(n=1.0472)}if(e&&!i){let e=this.graph.getEdge(t.id,r.id).bondType;"/"===e?("/"===this.doubleBondConfig||"\\"===this.doubleBondConfig&&(n=-n),this.doubleBondConfig=null):"\\"===e&&("/"===this.doubleBondConfig?n=-n:this.doubleBondConfig,this.doubleBondConfig=null)}r.angle=c?n:-n,this.createNextBond(r,t,C+r.angle)}}else if(2===n.length){let r=t.angle;r||(r=1.0472);let c=this.graph.getTreeDepth(n[0],t.id),i=this.graph.getTreeDepth(n[1],t.id),s=this.graph.vertices[n[0]],a=this.graph.vertices[n[1]];s.value.subtreeDepth=c,a.value.subtreeDepth=i;let o=this.graph.getTreeDepth(e?e.id:null,t.id);e&&(e.value.subtreeDepth=o);let l=0,h=1;"C"===a.value.element&&"C"!==s.value.element&&i>1&&c<5?(l=1,h=0):"C"!==a.value.element&&"C"===s.value.element&&c>1&&i<5?(l=0,h=1):i>c&&(l=1,h=0);let u=this.graph.vertices[n[l]],g=this.graph.vertices[n[h]];this.graph.getEdge(t.id,u.id),this.graph.getEdge(t.id,g.id);let d=!1;o<c&&o<i&&(d=!0),g.angle=r,u.angle=-r,"\\"===this.doubleBondConfig?"\\"===g.value.branchBond&&(g.angle=-r,u.angle=r):"/"===this.doubleBondConfig&&"/"===g.value.branchBond&&(g.angle=-r,u.angle=r),this.createNextBond(g,t,C+g.angle,d),this.createNextBond(u,t,C+u.angle,d)}else if(3===n.length){let r=this.graph.getTreeDepth(n[0],t.id),c=this.graph.getTreeDepth(n[1],t.id),i=this.graph.getTreeDepth(n[2],t.id),s=this.graph.vertices[n[0]],a=this.graph.vertices[n[1]],o=this.graph.vertices[n[2]];s.value.subtreeDepth=r,a.value.subtreeDepth=c,o.value.subtreeDepth=i,c>r&&c>i?(s=this.graph.vertices[n[1]],a=this.graph.vertices[n[0]],o=this.graph.vertices[n[2]]):i>r&&i>c&&(s=this.graph.vertices[n[2]],a=this.graph.vertices[n[0]],o=this.graph.vertices[n[1]]),e&&e.value.rings.length<1&&s.value.rings.length<1&&a.value.rings.length<1&&o.value.rings.length<1&&1===this.graph.getTreeDepth(a.id,t.id)&&1===this.graph.getTreeDepth(o.id,t.id)&&this.graph.getTreeDepth(s.id,t.id)>1?(s.angle=-t.angle,t.angle>=0?(a.angle=wt.toRad(30),o.angle=wt.toRad(90)):(a.angle=-wt.toRad(30),o.angle=-wt.toRad(90)),this.createNextBond(s,t,C+s.angle),this.createNextBond(a,t,C+a.angle),this.createNextBond(o,t,C+o.angle)):(s.angle=0,a.angle=wt.toRad(90),o.angle=-wt.toRad(90),this.createNextBond(s,t,C+s.angle),this.createNextBond(a,t,C+a.angle),this.createNextBond(o,t,C+o.angle))}else if(4===n.length){let e=this.graph.getTreeDepth(n[0],t.id),r=this.graph.getTreeDepth(n[1],t.id),c=this.graph.getTreeDepth(n[2],t.id),i=this.graph.getTreeDepth(n[3],t.id),s=this.graph.vertices[n[0]],a=this.graph.vertices[n[1]],o=this.graph.vertices[n[2]],l=this.graph.vertices[n[3]];s.value.subtreeDepth=e,a.value.subtreeDepth=r,o.value.subtreeDepth=c,l.value.subtreeDepth=i,r>e&&r>c&&r>i?(s=this.graph.vertices[n[1]],a=this.graph.vertices[n[0]],o=this.graph.vertices[n[2]],l=this.graph.vertices[n[3]]):c>e&&c>r&&c>i?(s=this.graph.vertices[n[2]],a=this.graph.vertices[n[0]],o=this.graph.vertices[n[1]],l=this.graph.vertices[n[3]]):i>e&&i>r&&i>c&&(s=this.graph.vertices[n[3]],a=this.graph.vertices[n[0]],o=this.graph.vertices[n[1]],l=this.graph.vertices[n[2]]),s.angle=-wt.toRad(36),a.angle=wt.toRad(36),o.angle=-wt.toRad(108),l.angle=wt.toRad(108),this.createNextBond(s,t,C+s.angle),this.createNextBond(a,t,C+a.angle),this.createNextBond(o,t,C+o.angle),this.createNextBond(l,t,C+l.angle)}}}getCommonRingbondNeighbour(t){let e=t.neighbours;for(var r=0;r<e.length;r++){let c=this.graph.vertices[e[r]];if(yt.containsAll(c.value.rings,t.value.rings))return c}return null}isPointInRing(t){for(var e=0;e<this.rings.length;e++){let r=this.rings[e];if(!r.positioned)continue;let c=wt.polyCircumradius(this.opts.bondLength,r.getSize()),n=c*c;if(t.distanceSq(r.center)<n)return!0}return!1}isEdgeInRing(t){let e=this.graph.vertices[t.sourceId],r=this.graph.vertices[t.targetId];return this.areVerticesInSameRing(e,r)}isEdgeRotatable(t){let e=this.graph.vertices[t.sourceId],r=this.graph.vertices[t.targetId];return"-"===t.bondType&&(!e.isTerminal()&&!r.isTerminal()&&!(e.value.rings.length>0&&r.value.rings.length>0&&this.areVerticesInSameRing(e,r)))}isRingAromatic(t){for(var e=0;e<t.members.length;e++){if(!this.graph.vertices[t.members[e]].value.isPartOfAromaticRing)return!1}return!0}getEdgeNormals(t){let e=this.graph.vertices[t.sourceId].position,r=this.graph.vertices[t.targetId].position;return St.units(e,r)}getNonRingNeighbours(t){let e=Array(),r=this.graph.vertices[t],c=r.neighbours;for(var n=0;n<c.length;n++){let t=this.graph.vertices[c[n]];0===yt.intersection(r.value.rings,t.value.rings).length&&0==t.value.isBridge&&e.push(t)}return e}annotateStereochemistry(){for(var t=0;t<this.graph.vertices.length;t++){let n=this.graph.vertices[t];if(!n.value.isStereoCenter)continue;let i=n.getNeighbours(),s=i.length,C=Array(s);for(var e=0;e<s;e++){let t=new Uint8Array(this.graph.vertices.length),c=Array(Array());t[n.id]=1,this.visitStereochemistry(i[e],n.id,t,c,10,0);for(var r=0;r<c.length;r++)c[r].sort((function(t,e){return e-t}));C[e]=[e,c]}let a=0,o=0;for(e=0;e<C.length;e++){C[e][1].length>a&&(a=C[e][1].length);for(r=0;r<C[e][1].length;r++)C[e][1][r].length>o&&(o=C[e][1][r].length)}for(e=0;e<C.length;e++){let t=a-C[e][1].length;for(r=0;r<t;r++)C[e][1].push([]);C[e][1].push([i[e]]);for(r=0;r<C[e][1].length;r++){let t=o-C[e][1][r].length;for(var c=0;c<t;c++)C[e][1][r].push(0)}}C.sort((function(t,e){for(var r=0;r<t[1].length;r++)for(var c=0;c<t[1][r].length;c++){if(t[1][r][c]>e[1][r][c])return-1;if(t[1][r][c]<e[1][r][c])return 1}return 0}));let l=new Uint8Array(s);for(e=0;e<s;e++)l[e]=C[e][0],n.value.priority=e;let h=this.graph.vertices[i[l[0]]].position,u=this.graph.vertices[i[l[1]]].position,g=this.graph.vertices[i[l[2]]].position,d=h.relativeClockwise(u,n.position);h.relativeClockwise(g,n.position);let f=-1===d,p="@"===n.value.bracket.chirality?-1:1,m=wt.parityOfPermutation(l)*p==1?"R":"S",v="down",b="up";(f&&"R"!==m||!f&&"S"!==m)&&(n.value.hydrogenDirection="up",v="up",b="down"),n.value.hasHydrogen&&(this.graph.getEdge(n.id,i[l[l.length-1]]).wedge=v);let O=new Array(i.length-1),N=n.value.rings.length>1&&n.value.hasHydrogen,w=n.value.hasHydrogen?1:0;for(e=0;e<l.length-w;e++){O[e]=new Uint32Array(2);let t=this.graph.vertices[i[l[e]]];O[e][0]+=t.value.isStereoCenter?0:1e5,O[e][0]+=this.areVerticesInSameRing(t,n)?0:1e4,O[e][0]+=t.value.isHeteroAtom()?1e3:0,O[e][0]-=0===t.value.subtreeDepth?1e3:0,O[e][0]+=1e3-t.value.subtreeDepth,O[e][1]=i[l[e]]}if(O.sort((function(t,e){return t[0]>e[0]?-1:t[0]<e[0]?1:0})),!N){let t=O[0][1];if(n.value.hasHydrogen)this.graph.getEdge(n.id,t).wedge=b;else{let r=b;for(e=l.length-1;e>=0&&(r=r===v?b:v,i[l[e]]!==t);e--);this.graph.getEdge(n.id,t).wedge=r}}n.value.chirality=m}}visitStereochemistry(t,e,r,c,n,i,s=0){r[t]=1;let C=this.graph.vertices[t],a=C.value.getAtomicNumber();c.length<=i&&c.push(Array());for(var o=0;o<this.graph.getEdge(t,e).weight;o++)c[i].push(1e3*s+a);let l=this.graph.vertices[t].neighbours;for(o=0;o<l.length;o++)1!==r[l[o]]&&i<n-1&&this.visitStereochemistry(l[o],t,r.slice(),c,n,i+1,a);if(i<n-1){let e=0;for(o=0;o<l.length;o++)e+=this.graph.getEdge(t,l[o]).weight;for(o=0;o<C.value.getMaxBonds()-e;o++)c.length<=i+1&&c.push(Array()),c[i+1].push(1e3*a+1)}}initPseudoElements(){for(var t=0;t<this.graph.vertices.length;t++){const r=this.graph.vertices[t],c=r.neighbours;let n=Array(c.length);for(var e=0;e<c.length;e++)n[e]=this.graph.vertices[c[e]];if(r.getNeighbourCount()<3||r.value.rings.length>0)continue;if("P"===r.value.element)continue;if("C"===r.value.element&&3===n.length&&"N"===n[0].value.element&&"N"===n[1].value.element&&"N"===n[2].value.element)continue;let i=0,s=0;for(e=0;e<n.length;e++){let t=n[e],r=t.value.element,c=t.getNeighbourCount();"C"!==r&&"H"!==r&&1===c&&i++,c>1&&s++}if(s>1||i<2)continue;let C=null;for(e=0;e<n.length;e++){let t=n[e];t.getNeighbourCount()>1&&(C=t)}for(e=0;e<n.length;e++){let t=n[e];if(t.getNeighbourCount()>1)continue;t.value.isDrawn=!1;let c=Ft.maxBonds[t.value.element]-t.value.bondCount,i="";t.value.bracket&&(c=t.value.bracket.hcount,i=t.value.bracket.charge||0),r.value.attachPseudoElement(t.value.element,C?C.value.element:null,c,i)}}for(t=0;t<this.graph.vertices.length;t++){const r=this.graph.vertices[t],c=r.value,n=c.element;if("C"===n||"H"===n||!c.isDrawn)continue;const i=r.neighbours;let s=Array(i.length);for(e=0;e<i.length;e++)s[e]=this.graph.vertices[i[e]];for(e=0;e<s.length;e++){let t=s[e].value;if(!t.hasAttachedPseudoElements||2!==t.getAttachedPseudoElementsCount())continue;const c=t.getAttachedPseudoElements();c.hasOwnProperty("0O")&&c.hasOwnProperty("3C")&&(t.isDrawn=!1,r.value.attachPseudoElement("Ac","",0))}}}};const Pt=st,Dt=tt,Ht=U;var zt=class t{constructor(t,e,r,c=!0){if(this.svg="string"==typeof e||e instanceof String?document.getElementById(e):e,this.container=null,this.opts=r,this.uid=function(t){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=r.length,n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*c));return e}(5),this.gradientId=0,this.backgroundItems=[],this.paths=[],this.vertices=[],this.gradients=[],this.highlights=[],this.drawingWidth=0,this.drawingHeight=0,this.halfBondThickness=this.opts.bondThickness/2,this.themeManager=t,this.maskElements=[],this.maxX=-Number.MAX_VALUE,this.maxY=-Number.MAX_VALUE,this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,c)for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);this.style=document.createElementNS("http://www.w3.org/2000/svg","style"),this.style.appendChild(document.createTextNode(`\n                .element {\n                    font: ${this.opts.fontSizeLarge}pt ${this.opts.fontFamily};\n                }\n                .sub {\n                    font: ${this.opts.fontSizeSmall}pt ${this.opts.fontFamily};\n                }\n            `)),this.svg?this.svg.appendChild(this.style):(this.container=document.createElementNS("http://www.w3.org/2000/svg","g"),container.appendChild(this.style))}constructSvg(){let t=document.createElementNS("http://www.w3.org/2000/svg","defs"),e=document.createElementNS("http://www.w3.org/2000/svg","mask"),r=document.createElementNS("http://www.w3.org/2000/svg","g"),c=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","g"),s=this.paths,C=document.createElementNS("http://www.w3.org/2000/svg","rect");C.setAttributeNS(null,"x",this.minX),C.setAttributeNS(null,"y",this.minY),C.setAttributeNS(null,"width",this.maxX-this.minX),C.setAttributeNS(null,"height",this.maxY-this.minY),C.setAttributeNS(null,"fill","white"),e.appendChild(C),e.setAttributeNS(null,"id",this.uid+"-text-mask");for(let t of s)n.appendChild(t);for(let t of this.backgroundItems)r.appendChild(t);for(let t of this.highlights)c.appendChild(t);for(let t of this.vertices)i.appendChild(t);for(let t of this.maskElements)e.appendChild(t);for(let e of this.gradients)t.appendChild(e);if(n.setAttributeNS(null,"mask","url(#"+this.uid+"-text-mask)"),this.updateViewbox(this.opts.scale),r.setAttributeNS(null,"style",`transform: translateX(${this.minX}px) translateY(${this.minY}px)`),!this.svg)return this.container.appendChild(t),this.container.appendChild(e),this.container.appendChild(r),this.container.appendChild(n),this.container.appendChild(i),this.container;this.svg.appendChild(t),this.svg.appendChild(e),this.svg.appendChild(r),this.svg.appendChild(c),this.svg.appendChild(n),this.svg.appendChild(i)}addLayer(t){this.backgroundItems.push(t.firstChild)}createGradient(t){let e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),r=this.uid+"-line-"+this.gradientId++,c=t.getLeftVector(),n=t.getRightVector(),i=c.x,s=c.y,C=n.x,a=n.y;e.setAttributeNS(null,"id",r),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"x1",i),e.setAttributeNS(null,"y1",s),e.setAttributeNS(null,"x2",C),e.setAttributeNS(null,"y2",a);let o=document.createElementNS("http://www.w3.org/2000/svg","stop");o.setAttributeNS(null,"stop-color",this.themeManager.getColor(t.getLeftElement())||this.themeManager.getColor("C")),o.setAttributeNS(null,"offset","20%");let l=document.createElementNS("http://www.w3.org/2000/svg","stop");return l.setAttributeNS(null,"stop-color",this.themeManager.getColor(t.getRightElement()||this.themeManager.getColor("C"))),l.setAttributeNS(null,"offset","100%"),e.appendChild(o),e.appendChild(l),this.gradients.push(e),r}createSubSuperScripts(t,e){let r=document.createElementNS("http://www.w3.org/2000/svg","tspan");return r.setAttributeNS(null,"baseline-shift",e),r.appendChild(document.createTextNode(t)),r.setAttributeNS(null,"class","sub"),r}static createUnicodeCharge(e){return 1===e?"":-1===e?"":e>1?t.createUnicodeSuperscript(e)+"":e<-1?t.createUnicodeSuperscript(e)+"":""}determineDimensions(t){for(var e=0;e<t.length;e++){if(!t[e].value.isDrawn)continue;let r=t[e].position;this.maxX<r.x&&(this.maxX=r.x),this.maxY<r.y&&(this.maxY=r.y),this.minX>r.x&&(this.minX=r.x),this.minY>r.y&&(this.minY=r.y)}let r=this.opts.padding;this.maxX+=r,this.maxY+=r,this.minX-=r,this.minY-=r,this.drawingWidth=this.maxX-this.minX,this.drawingHeight=this.maxY-this.minY}updateViewbox(t){let e=this.minX,r=this.minY,c=this.maxX-this.minX,n=this.maxY-this.minY;if(t<=0)if(c>n){let t=c-n;n=c,r-=t/2}else{let t=n-c;c=n,e-=t/2}else this.svg&&(this.svg.style.width=t*c+"px",this.svg.style.height=t*n+"px");this.svg.setAttributeNS(null,"viewBox",`${e} ${r} ${c} ${n}`)}drawBall(t,e,r){let c=this.opts.bondLength/4.5;t-c<this.minX&&(this.minX=t-c),t+c>this.maxX&&(this.maxX=t+c),e-c<this.minY&&(this.minY=e-c),e+c>this.maxY&&(this.maxY=e+c);let n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r",c),n.setAttributeNS(null,"fill",this.themeManager.getColor(r)),this.vertices.push(n)}drawWedge(t){let e=t.getLeftVector().clone(),r=t.getRightVector().clone(),c=Dt.normals(e,r);c[0].normalize(),c[1].normalize();let n=e,i=r;t.getRightChiral()&&(n=r,i=e);let s=Dt.add(n,Dt.multiplyScalar(c[0],this.halfBondThickness)),C=Dt.add(i,Dt.multiplyScalar(c[0],3+this.opts.fontSizeLarge/4)),a=Dt.add(i,Dt.multiplyScalar(c[1],3+this.opts.fontSizeLarge/4)),o=Dt.add(n,Dt.multiplyScalar(c[1],this.halfBondThickness)),l=document.createElementNS("http://www.w3.org/2000/svg","polygon"),h=this.createGradient(t,e.x,e.y,r.x,r.y);l.setAttributeNS(null,"points",`${s.x},${s.y} ${C.x},${C.y} ${a.x},${a.y} ${o.x},${o.y}`),l.setAttributeNS(null,"fill",`url('#${h}')`),this.paths.push(l)}drawAtomHighlight(t,e,r="#03fc9d"){let c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttributeNS(null,"cx",t),c.setAttributeNS(null,"cy",e),c.setAttributeNS(null,"r",this.opts.bondLength/3),c.setAttributeNS(null,"fill",r),this.highlights.push(c)}drawDashedWedge(t){if(isNaN(t.from.x)||isNaN(t.from.y)||isNaN(t.to.x)||isNaN(t.to.y))return;let e,r,c=t.getLeftVector().clone(),n=t.getRightVector().clone(),i=Dt.normals(c,n);i[0].normalize(),i[1].normalize(),t.getRightChiral()?(e=n,r=c):(e=c,r=n);let s=Dt.subtract(r,e).normalize(),C=t.getLength(),a=1.25/(C/(this.opts.bondLength/10)),o=this.createGradient(t);for(let t=0;t<1;t+=a){let r=Dt.multiplyScalar(s,t*C),c=Dt.add(e,r),n=this.opts.fontSizeLarge/2*t,a=Dt.multiplyScalar(i[0],n);c.subtract(a);let l=c.clone();l.add(Dt.multiplyScalar(a,2)),this.drawLine(new Pt(c,l),null,o)}}drawDebugPoint(t,e,r="",c="#f00"){let n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r","2"),n.setAttributeNS(null,"fill","#f00"),this.vertices.push(n),this.drawDebugText(t,e,r)}drawDebugText(t,e,r){let c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttributeNS(null,"x",t),c.setAttributeNS(null,"y",e),c.setAttributeNS(null,"class","debug"),c.setAttributeNS(null,"fill","#ff0000"),c.setAttributeNS(null,"style","\n                font: 5px Droid Sans, sans-serif;\n            "),c.appendChild(document.createTextNode(r)),this.vertices.push(c)}drawRing(t,e,r){let c=document.createElementNS("http://www.w3.org/2000/svg","circle"),n=Ht.apothemFromSideLength(this.opts.bondLength,r);c.setAttributeNS(null,"cx",t),c.setAttributeNS(null,"cy",e),c.setAttributeNS(null,"r",n-this.opts.bondSpacing),c.setAttributeNS(null,"stroke",this.themeManager.getColor("C")),c.setAttributeNS(null,"stroke-width",this.opts.bondThickness),c.setAttributeNS(null,"fill","none"),this.paths.push(c)}drawLine(t,e=!1,r=null,c="round"){this.opts;let n=[["stroke-width",this.opts.bondThickness],["stroke-linecap",c],["stroke-dasharray",e?"5, 5":"none"]],i=t.getLeftVector(),s=t.getRightVector(),C=i.x,a=i.y,o=s.x,l=s.y,h=n.map((t=>t.join(":"))).join(";"),u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttributeNS(null,"x1",C),u.setAttributeNS(null,"y1",a),u.setAttributeNS(null,"x2",o),u.setAttributeNS(null,"y2",l),u.setAttributeNS(null,"style",h),this.paths.push(u),null==r&&(r=this.createGradient(t,C,a,o,l)),u.setAttributeNS(null,"stroke",`url('#${r}')`)}drawPoint(t,e,r){let c=.75;t-c<this.minX&&(this.minX=t-c),t+c>this.maxX&&(this.maxX=t+c),e-c<this.minY&&(this.minY=e-c),e+c>this.maxY&&(this.maxY=e+c);let n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r","1.5"),n.setAttributeNS(null,"fill","black"),this.maskElements.push(n);let i=document.createElementNS("http://www.w3.org/2000/svg","circle");i.setAttributeNS(null,"cx",t),i.setAttributeNS(null,"cy",e),i.setAttributeNS(null,"r",c),i.setAttributeNS(null,"fill",this.themeManager.getColor(r)),this.vertices.push(i)}drawText(e,r,c,n,i,s,C,a,o,l={}){let h=[],u=c;0!==C&&null!==C&&(u+=t.createUnicodeCharge(C)),0!==a&&null!==a&&(u=t.createUnicodeSuperscript(a)+u),h.push([u,c]),1===n?h.push(["H","H"]):n>1&&h.push(["H"+t.createUnicodeSubscript(n),"H"]),1===C&&"N"===c&&l.hasOwnProperty("0O")&&l.hasOwnProperty("0O-1")&&(l={"0O":{element:"O",count:2,hydrogenCount:0,previousElement:"C",charge:""}},C=0);for(let e in l){if(!l.hasOwnProperty(e))continue;let r=l[e],c=r.element;r.count>1&&(c+=t.createUnicodeSubscript(r.count)),""!==r.charge&&(c+=t.createUnicodeCharge(C)),h.push([c,r.element]),1===r.hydrogenCount?h.push(["H","H"]):r.hydrogenCount>1&&h.push(["H"+t.createUnicodeSubscript(r.hydrogenCount),"H"])}this.write(h,i,e,r,1===o)}write(e,r,c,n,i){let s=t.measureText(e[0][1],this.opts.fontSizeLarge,this.opts.fontFamily);"left"===r&&e[0][0]!==e[0][1]&&(s.width*=2),i?(c+s.width*e.length>this.maxX&&(this.maxX=c+s.width*e.length),c-s.width/2<this.minX&&(this.minX=c-s.width/2),n-s.height<this.minY&&(this.minY=n-s.height),n+s.height>this.maxY&&(this.maxY=n+s.height)):("right"!==r?(c+s.width*e.length>this.maxX&&(this.maxX=c+s.width*e.length),c-s.width*e.length<this.minX&&(this.minX=c-s.width*e.length)):"left"!==r&&(c+s.width*e.length>this.maxX&&(this.maxX=c+s.width*e.length),c-s.width/2<this.minX&&(this.minX=c-s.width/2)),n-s.height<this.minY&&(this.minY=n-s.height),n+s.height>this.maxY&&(this.maxY=n+s.height),"down"===r&&n+.8*s.height*e.length>this.maxY&&(this.maxY=n+.8*s.height*e.length),"up"===r&&n-.8*s.height*e.length<this.minY&&(this.minY=n-.8*s.height*e.length));let C=c,a=n,o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttributeNS(null,"class","element");let l=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"fill","#ffffff"),"left"===r&&(e=e.reverse()),"right"!==r&&"down"!==r&&"up"!==r||(c-=s.width/2),"left"===r&&(c+=s.width/2),e.forEach(((t,e)=>{const c=t[0],n=t[1];let i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS(null,"fill",this.themeManager.getColor(n)),i.textContent=c,"up"!==r&&"down"!==r||(i.setAttributeNS(null,"x","0px"),"up"===r?i.setAttributeNS(null,"y",`-${.9*e}em`):i.setAttributeNS(null,"y",.9*e+"em")),o.appendChild(i)})),o.setAttributeNS(null,"data-direction",r),"left"===r||"right"===r?(o.setAttributeNS(null,"dominant-baseline","alphabetic"),o.setAttributeNS(null,"y","0.36em")):o.setAttributeNS(null,"dominant-baseline","central"),"left"===r&&o.setAttributeNS(null,"text-anchor","end"),l.appendChild(o),l.setAttributeNS(null,"style",`transform: translateX(${c}px) translateY(${n}px)`);let h=.75*this.opts.fontSizeLarge;e[0][1].length>1&&(h=1.1*this.opts.fontSizeLarge);let u=document.createElementNS("http://www.w3.org/2000/svg","circle");u.setAttributeNS(null,"cx",C),u.setAttributeNS(null,"cy",a),u.setAttributeNS(null,"r",h),u.setAttributeNS(null,"fill","black"),this.maskElements.push(u),this.vertices.push(l)}toCanvas(t,e,r){("string"==typeof t||t instanceof String)&&(t=document.getElementById(t));let c=new Image;c.onload=function(){t.width=e,t.height=r,t.getContext("2d").drawImage(c,0,0,e,r)},c.src="data:image/svg+xml;charset-utf-8,"+encodeURIComponent(this.svg.outerHTML)}static createUnicodeSubscript(t){let e="";return t.toString().split("").forEach((t=>{e+=["","","","","","","","","",""][parseInt(t)]})),e}static createUnicodeSuperscript(t){let e="";return t.toString().split("").forEach((t=>{parseInt(t)&&(e+=["","","","","","","","","",""][parseInt(t)])})),e}static replaceNumbersWithSubscript(t){let e={0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""};for(const[r,c]of Object.entries(e))t=t.replaceAll(r,c);return t}static measureText(t,e,r,c=.9){const n=document.createElement("canvas").getContext("2d");n.font=`${e}pt ${r}`;let i=n.measureText(t),s=Math.abs(i.actualBoundingBoxLeft)+Math.abs(i.actualBoundingBoxRight);return{width:i.width>s?i.width:s,height:(Math.abs(i.actualBoundingBoxAscent)+Math.abs(i.actualBoundingBoxAscent))*c}}static svgToCanvas(t,e,r,c,n=null){t.setAttributeNS(null,"width",r),t.setAttributeNS(null,"height",c);let i=new Image;return i.onload=function(){e.width=r,e.height=c;let t=e.getContext("2d");t.imageSmoothingEnabled=!1,t.drawImage(i,0,0,r,c),n&&n(e)},i.onerror=function(t){console.log(t)},i.src="data:image/svg+xml;charset-utf-8,"+encodeURIComponent(t.outerHTML),e}static svgToImg(t,e,r,c){let n=document.createElement("canvas");this.svgToCanvas(t,n,r,c,(t=>{e.src=n.toDataURL("image/png")}))}static writeText(e,r,c,n,i=Number.MAX_SAFE_INTEGER){let s=document.createElementNS("http://www.w3.org/2000/svg","svg"),C=document.createElementNS("http://www.w3.org/2000/svg","style");C.appendChild(document.createTextNode(`\n        .text {\n            font: ${c}pt ${n};\n            dominant-baseline: ideographic;\n        }\n    `)),s.appendChild(C);let a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttributeNS(null,"class","text");let o=0,l=0,h=[];return e.split("\n").forEach((e=>{let r=t.measureText(e,c,n,1);if(r.width>=i){let r=0,s=0,C=e.split(" "),a=0;for(let e=0;e<C.length;e++){let o=t.measureText(C[e],c,n,1);r+o.width>i&&(h.push({text:C.slice(a,e).join(" "),width:r,height:s}),r=0,s=0,a=e),o.height>s&&(s=o.height),r+=o.width}a<C.length&&h.push({text:C.slice(a,C.length).join(" "),width:r,height:s})}else h.push({text:e,width:r.width,height:r.height})})),h.forEach(((t,e)=>{l+=t.height;let c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS(null,"fill",r.getColor("C")),c.textContent=t.text,c.setAttributeNS(null,"x","0px"),c.setAttributeNS(null,"y",`${l}px`),a.appendChild(c),t.width>o&&(o=t.width)})),s.appendChild(a),{svg:s,width:o,height:l}}};var $t=function(t){function e(t,e){var r=t.length,c=0;if(0===r||r>0&&r-1 in t)for(;c<r&&!1!==e.call(t[c],c,t[c]);c++);else for(c in t)if(!1===e.call(t[c],c,t[c]))break}function r(t){var e=parseInt(t).toString(16);return 1==e.length?"0"+e:e}function c(t,e,c,n){return void 0===(n=parseInt(n))||255===n?"#"+r(t)+r(e)+r(c):0!==n&&"rgba("+t+","+e+","+c+","+n/255+")"}function n(t,e,r){return"M"+t+" "+e+"h"+r}let i=function(t){var r="";return e(t,(function(t,i){if(!1!==(t=c.apply(null,t.split(",")))){var s,C=[],a=1;e(i,(function(){s&&this[1]===s[1]&&this[0]===s[0]+a?a++:(s&&(C.push(n(s[0],s[1],a)),a=1),s=this)})),C.push(n(s[0],s[1],a)),r+=function(t,e){return'<path stroke="'+t+'" d="'+e+'" />\n'}(t,C.join(""))}})),r}(function(t){var e={},r=t.data,c=r.length,n=t.width;t.height;for(var i,s=0,C=0,a=0;a<c;a+=4)r[a+3]>0&&(e[i=r[a]+","+r[a+1]+","+r[a+2]+","+r[a+3]]=e[i]||[],s=a/4%n,C=Math.floor(a/4/n),e[i].push([s,C]));return e}(t)),s='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -0.5 '+t.width+" "+t.height+'" shape-rendering="crispEdges"><g shape-rendering="crispEdges">'+i+"</g></svg>";var C=document.createElement("div");return C.innerHTML=s,C.firstChild},_t={};({get exports(){return _t},set exports(t){_t=t}}).exports=function(){for(var t=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=1),t<e?e:t>r?r:t},e=t,r=function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var r=0;r<=3;r++)r<3?((t[r]<0||t[r]>255)&&(t._clipped=!0),t[r]=e(t[r],0,255)):3===r&&(t[r]=e(t[r],0,1));return t},c={},n=0,i=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<i.length;n+=1){var s=i[n];c["[object "+s+"]"]=s.toLowerCase()}var C=function(t){return c[Object.prototype.toString.call(t)]||"object"},a=C,o=function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==a(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},l=C,h=function(t){if(t.length<2)return null;var e=t.length-1;return"string"==l(t[e])?t[e].toLowerCase():null},u=Math.PI,g={clip_rgb:r,limit:t,type:C,unpack:o,last:h,PI:u,TWOPI:2*u,PITHIRD:u/3,DEG2RAD:u/180,RAD2DEG:180/u},d={format:{},autodetect:[]},f=g.last,p=g.clip_rgb,m=g.type,v=d,b=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=this;if("object"===m(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var c=f(t),n=!1;if(!c){n=!0,v.sorted||(v.autodetect=v.autodetect.sort((function(t,e){return e.p-t.p})),v.sorted=!0);for(var i=0,s=v.autodetect;i<s.length;i+=1){var C=s[i];if(c=C.test.apply(C,t))break}}if(!v.format[c])throw new Error("unknown format: "+t);var a=v.format[c].apply(null,n?t:t.slice(0,-1));r._rgb=p(a),3===r._rgb.length&&r._rgb.push(1)};b.prototype.toString=function(){return"function"==m(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var O=b,N=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(N.Color,[null].concat(t)))};N.Color=O,N.version="2.4.2";var w=N,y=g.unpack,S=Math.max,x=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=y(t,"rgb"),c=r[0],n=r[1],i=r[2],s=1-S(c/=255,S(n/=255,i/=255)),C=s<1?1/(1-s):0;return[(1-c-s)*C,(1-n-s)*C,(1-i-s)*C,s]},A=x,F=g.unpack,R=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=(t=F(t,"cmyk"))[0],c=t[1],n=t[2],i=t[3],s=t.length>4?t[4]:1;return 1===i?[0,0,0,s]:[r>=1?0:255*(1-r)*(1-i),c>=1?0:255*(1-c)*(1-i),n>=1?0:255*(1-n)*(1-i),s]},k=R,M=w,E=O,T=d,I=g.unpack,B=g.type,L=A;E.prototype.cmyk=function(){return L(this._rgb)},M.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(E,[null].concat(t,["cmyk"])))},T.format.cmyk=k,T.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=I(t,"cmyk"),"array"===B(t)&&4===t.length)return"cmyk"}});var P=g.unpack,D=g.last,H=function(t){return Math.round(100*t)/100},z=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=P(t,"hsla"),c=D(t)||"lsa";return r[0]=H(r[0]||0),r[1]=H(100*r[1])+"%",r[2]=H(100*r[2])+"%","hsla"===c||r.length>3&&r[3]<1?(r[3]=r.length>3?r[3]:1,c="hsla"):r.length=3,c+"("+r.join(",")+")"},$=z,_=g.unpack,V=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=(t=_(t,"rgba"))[0],c=t[1],n=t[2];r/=255,c/=255,n/=255;var i,s,C=Math.min(r,c,n),a=Math.max(r,c,n),o=(a+C)/2;return a===C?(i=0,s=Number.NaN):i=o<.5?(a-C)/(a+C):(a-C)/(2-a-C),r==a?s=(c-n)/(a-C):c==a?s=2+(n-r)/(a-C):n==a&&(s=4+(r-c)/(a-C)),(s*=60)<0&&(s+=360),t.length>3&&void 0!==t[3]?[s,i,o,t[3]]:[s,i,o]},W=V,X=g.unpack,U=g.last,Y=$,q=W,G=Math.round,j=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=X(t,"rgba"),c=U(t)||"rgb";return"hsl"==c.substr(0,3)?Y(q(r),c):(r[0]=G(r[0]),r[1]=G(r[1]),r[2]=G(r[2]),("rgba"===c||r.length>3&&r[3]<1)&&(r[3]=r.length>3?r[3]:1,c="rgba"),c+"("+r.slice(0,"rgb"===c?3:4).join(",")+")")},K=j,Z=g.unpack,J=Math.round,Q=function(){for(var t,e=[],r=arguments.length;r--;)e[r]=arguments[r];var c,n,i,s=(e=Z(e,"hsl"))[0],C=e[1],a=e[2];if(0===C)c=n=i=255*a;else{var o=[0,0,0],l=[0,0,0],h=a<.5?a*(1+C):a+C-a*C,u=2*a-h,g=s/360;o[0]=g+1/3,o[1]=g,o[2]=g-1/3;for(var d=0;d<3;d++)o[d]<0&&(o[d]+=1),o[d]>1&&(o[d]-=1),6*o[d]<1?l[d]=u+6*(h-u)*o[d]:2*o[d]<1?l[d]=h:3*o[d]<2?l[d]=u+(h-u)*(2/3-o[d])*6:l[d]=u;c=(t=[J(255*l[0]),J(255*l[1]),J(255*l[2])])[0],n=t[1],i=t[2]}return e.length>3?[c,n,i,e[3]]:[c,n,i,1]},tt=Q,et=tt,rt=d,ct=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,nt=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,it=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,st=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Ct=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,at=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,ot=Math.round,lt=function(t){var e;if(t=t.toLowerCase().trim(),rt.format.named)try{return rt.format.named(t)}catch(t){}if(e=t.match(ct)){for(var r=e.slice(1,4),c=0;c<3;c++)r[c]=+r[c];return r[3]=1,r}if(e=t.match(nt)){for(var n=e.slice(1,5),i=0;i<4;i++)n[i]=+n[i];return n}if(e=t.match(it)){for(var s=e.slice(1,4),C=0;C<3;C++)s[C]=ot(2.55*s[C]);return s[3]=1,s}if(e=t.match(st)){for(var a=e.slice(1,5),o=0;o<3;o++)a[o]=ot(2.55*a[o]);return a[3]=+a[3],a}if(e=t.match(Ct)){var l=e.slice(1,4);l[1]*=.01,l[2]*=.01;var h=et(l);return h[3]=1,h}if(e=t.match(at)){var u=e.slice(1,4);u[1]*=.01,u[2]*=.01;var g=et(u);return g[3]=+e[4],g}};lt.test=function(t){return ct.test(t)||nt.test(t)||it.test(t)||st.test(t)||Ct.test(t)||at.test(t)};var ht=lt,ut=w,gt=O,dt=d,ft=g.type,pt=K,mt=ht;gt.prototype.css=function(t){return pt(this._rgb,t)},ut.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(gt,[null].concat(t,["css"])))},dt.format.css=mt,dt.autodetect.push({p:5,test:function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(!e.length&&"string"===ft(t)&&mt.test(t))return"css"}});var vt=O,bt=w,Ot=d,Nt=g.unpack;Ot.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=Nt(t,"rgba");return r[0]*=255,r[1]*=255,r[2]*=255,r},bt.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(vt,[null].concat(t,["gl"])))},vt.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var wt=g.unpack,yt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r,c=wt(t,"rgb"),n=c[0],i=c[1],s=c[2],C=Math.min(n,i,s),a=Math.max(n,i,s),o=a-C,l=100*o/255,h=C/(255-o)*100;return 0===o?r=Number.NaN:(n===a&&(r=(i-s)/o),i===a&&(r=2+(s-n)/o),s===a&&(r=4+(n-i)/o),(r*=60)<0&&(r+=360)),[r,l,h]},St=yt,xt=g.unpack,At=Math.floor,Ft=function(){for(var t,e,r,c,n,i,s=[],C=arguments.length;C--;)s[C]=arguments[C];var a,o,l,h=(s=xt(s,"hcg"))[0],u=s[1],g=s[2];g*=255;var d=255*u;if(0===u)a=o=l=g;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var f=At(h/=60),p=h-f,m=g*(1-u),v=m+d*(1-p),b=m+d*p,O=m+d;switch(f){case 0:a=(t=[O,b,m])[0],o=t[1],l=t[2];break;case 1:a=(e=[v,O,m])[0],o=e[1],l=e[2];break;case 2:a=(r=[m,O,b])[0],o=r[1],l=r[2];break;case 3:a=(c=[m,v,O])[0],o=c[1],l=c[2];break;case 4:a=(n=[b,m,O])[0],o=n[1],l=n[2];break;case 5:a=(i=[O,m,v])[0],o=i[1],l=i[2]}}return[a,o,l,s.length>3?s[3]:1]},Rt=Ft,kt=g.unpack,Mt=g.type,Et=w,Tt=O,It=d,Bt=St;Tt.prototype.hcg=function(){return Bt(this._rgb)},Et.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Tt,[null].concat(t,["hcg"])))},It.format.hcg=Rt,It.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=kt(t,"hcg"),"array"===Mt(t)&&3===t.length)return"hcg"}});var Lt=g.unpack,Pt=g.last,Dt=Math.round,Ht=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=Lt(t,"rgba"),c=r[0],n=r[1],i=r[2],s=r[3],C=Pt(t)||"auto";void 0===s&&(s=1),"auto"===C&&(C=s<1?"rgba":"rgb");var a="000000"+((c=Dt(c))<<16|(n=Dt(n))<<8|(i=Dt(i))).toString(16);a=a.substr(a.length-6);var o="0"+Dt(255*s).toString(16);switch(o=o.substr(o.length-2),C.toLowerCase()){case"rgba":return"#"+a+o;case"argb":return"#"+o+a;default:return"#"+a}},zt=Ht,$t=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,_t=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Vt=function(t){if(t.match($t)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(_t)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var r=parseInt(t,16);return[r>>24&255,r>>16&255,r>>8&255,Math.round((255&r)/255*100)/100]}throw new Error("unknown hex color: "+t)},Wt=w,Xt=O,Ut=g.type,Yt=d,qt=zt;Xt.prototype.hex=function(t){return qt(this._rgb,t)},Wt.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Xt,[null].concat(t,["hex"])))},Yt.format.hex=Vt,Yt.autodetect.push({p:4,test:function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(!e.length&&"string"===Ut(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var Gt=g.unpack,jt=g.TWOPI,Kt=Math.min,Zt=Math.sqrt,Jt=Math.acos,Qt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r,c=Gt(t,"rgb"),n=c[0],i=c[1],s=c[2],C=Kt(n/=255,i/=255,s/=255),a=(n+i+s)/3,o=a>0?1-C/a:0;return 0===o?r=NaN:(r=(n-i+(n-s))/2,r/=Zt((n-i)*(n-i)+(n-s)*(i-s)),r=Jt(r),s>i&&(r=jt-r),r/=jt),[360*r,o,a]},te=Qt,ee=g.unpack,re=g.limit,ce=g.TWOPI,ne=g.PITHIRD,ie=Math.cos,se=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r,c,n,i=(t=ee(t,"hsi"))[0],s=t[1],C=t[2];return isNaN(i)&&(i=0),isNaN(s)&&(s=0),i>360&&(i-=360),i<0&&(i+=360),(i/=360)<1/3?c=1-((n=(1-s)/3)+(r=(1+s*ie(ce*i)/ie(ne-ce*i))/3)):i<2/3?n=1-((r=(1-s)/3)+(c=(1+s*ie(ce*(i-=1/3))/ie(ne-ce*i))/3)):r=1-((c=(1-s)/3)+(n=(1+s*ie(ce*(i-=2/3))/ie(ne-ce*i))/3)),[255*(r=re(C*r*3)),255*(c=re(C*c*3)),255*(n=re(C*n*3)),t.length>3?t[3]:1]},Ce=se,ae=g.unpack,oe=g.type,le=w,he=O,ue=d,ge=te;he.prototype.hsi=function(){return ge(this._rgb)},le.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(he,[null].concat(t,["hsi"])))},ue.format.hsi=Ce,ue.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ae(t,"hsi"),"array"===oe(t)&&3===t.length)return"hsi"}});var de=g.unpack,fe=g.type,pe=w,me=O,ve=d,be=W;me.prototype.hsl=function(){return be(this._rgb)},pe.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(me,[null].concat(t,["hsl"])))},ve.format.hsl=tt,ve.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=de(t,"hsl"),"array"===fe(t)&&3===t.length)return"hsl"}});var Oe=g.unpack,Ne=Math.min,we=Math.max,ye=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r,c,n,i=(t=Oe(t,"rgb"))[0],s=t[1],C=t[2],a=Ne(i,s,C),o=we(i,s,C),l=o-a;return n=o/255,0===o?(r=Number.NaN,c=0):(c=l/o,i===o&&(r=(s-C)/l),s===o&&(r=2+(C-i)/l),C===o&&(r=4+(i-s)/l),(r*=60)<0&&(r+=360)),[r,c,n]},Se=ye,xe=g.unpack,Ae=Math.floor,Fe=function(){for(var t,e,r,c,n,i,s=[],C=arguments.length;C--;)s[C]=arguments[C];var a,o,l,h=(s=xe(s,"hsv"))[0],u=s[1],g=s[2];if(g*=255,0===u)a=o=l=g;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var d=Ae(h/=60),f=h-d,p=g*(1-u),m=g*(1-u*f),v=g*(1-u*(1-f));switch(d){case 0:a=(t=[g,v,p])[0],o=t[1],l=t[2];break;case 1:a=(e=[m,g,p])[0],o=e[1],l=e[2];break;case 2:a=(r=[p,g,v])[0],o=r[1],l=r[2];break;case 3:a=(c=[p,m,g])[0],o=c[1],l=c[2];break;case 4:a=(n=[v,p,g])[0],o=n[1],l=n[2];break;case 5:a=(i=[g,p,m])[0],o=i[1],l=i[2]}}return[a,o,l,s.length>3?s[3]:1]},Re=Fe,ke=g.unpack,Me=g.type,Ee=w,Te=O,Ie=d,Be=Se;Te.prototype.hsv=function(){return Be(this._rgb)},Ee.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Te,[null].concat(t,["hsv"])))},Ie.format.hsv=Re,Ie.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ke(t,"hsv"),"array"===Me(t)&&3===t.length)return"hsv"}});var Le={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Pe=Le,De=g.unpack,He=Math.pow,ze=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=De(t,"rgb"),c=r[0],n=r[1],i=r[2],s=Ve(c,n,i),C=s[0],a=s[1],o=116*a-16;return[o<0?0:o,500*(C-a),200*(a-s[2])]},$e=function(t){return(t/=255)<=.04045?t/12.92:He((t+.055)/1.055,2.4)},_e=function(t){return t>Pe.t3?He(t,1/3):t/Pe.t2+Pe.t0},Ve=function(t,e,r){return t=$e(t),e=$e(e),r=$e(r),[_e((.4124564*t+.3575761*e+.1804375*r)/Pe.Xn),_e((.2126729*t+.7151522*e+.072175*r)/Pe.Yn),_e((.0193339*t+.119192*e+.9503041*r)/Pe.Zn)]},We=ze,Xe=Le,Ue=g.unpack,Ye=Math.pow,qe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r,c,n,i=(t=Ue(t,"lab"))[0],s=t[1],C=t[2];return c=(i+16)/116,r=isNaN(s)?c:c+s/500,n=isNaN(C)?c:c-C/200,c=Xe.Yn*je(c),r=Xe.Xn*je(r),n=Xe.Zn*je(n),[Ge(3.2404542*r-1.5371385*c-.4985314*n),Ge(-.969266*r+1.8760108*c+.041556*n),Ge(.0556434*r-.2040259*c+1.0572252*n),t.length>3?t[3]:1]},Ge=function(t){return 255*(t<=.00304?12.92*t:1.055*Ye(t,1/2.4)-.055)},je=function(t){return t>Xe.t1?t*t*t:Xe.t2*(t-Xe.t0)},Ke=qe,Ze=g.unpack,Je=g.type,Qe=w,tr=O,er=d,rr=We;tr.prototype.lab=function(){return rr(this._rgb)},Qe.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(tr,[null].concat(t,["lab"])))},er.format.lab=Ke,er.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Ze(t,"lab"),"array"===Je(t)&&3===t.length)return"lab"}});var cr=g.unpack,nr=g.RAD2DEG,ir=Math.sqrt,sr=Math.atan2,Cr=Math.round,ar=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=cr(t,"lab"),c=r[0],n=r[1],i=r[2],s=ir(n*n+i*i),C=(sr(i,n)*nr+360)%360;return 0===Cr(1e4*s)&&(C=Number.NaN),[c,s,C]},or=ar,lr=g.unpack,hr=We,ur=or,gr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=lr(t,"rgb"),c=r[0],n=r[1],i=r[2],s=hr(c,n,i),C=s[0],a=s[1],o=s[2];return ur(C,a,o)},dr=gr,fr=g.unpack,pr=g.DEG2RAD,mr=Math.sin,vr=Math.cos,br=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=fr(t,"lch"),c=r[0],n=r[1],i=r[2];return isNaN(i)&&(i=0),[c,vr(i*=pr)*n,mr(i)*n]},Or=br,Nr=g.unpack,wr=Or,yr=Ke,Sr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=(t=Nr(t,"lch"))[0],c=t[1],n=t[2],i=wr(r,c,n),s=i[0],C=i[1],a=i[2],o=yr(s,C,a);return[o[0],o[1],o[2],t.length>3?t[3]:1]},xr=Sr,Ar=g.unpack,Fr=xr,Rr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=Ar(t,"hcl").reverse();return Fr.apply(void 0,r)},kr=Rr,Mr=g.unpack,Er=g.type,Tr=w,Ir=O,Br=d,Lr=dr;Ir.prototype.lch=function(){return Lr(this._rgb)},Ir.prototype.hcl=function(){return Lr(this._rgb).reverse()},Tr.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Ir,[null].concat(t,["lch"])))},Tr.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Ir,[null].concat(t,["hcl"])))},Br.format.lch=xr,Br.format.hcl=kr,["lch","hcl"].forEach((function(t){return Br.autodetect.push({p:2,test:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(e=Mr(e,t),"array"===Er(e)&&3===e.length)return t}})}));var Pr={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Dr=O,Hr=d,zr=g.type,$r=Pr,_r=Vt,Vr=zt;Dr.prototype.name=function(){for(var t=Vr(this._rgb,"rgb"),e=0,r=Object.keys($r);e<r.length;e+=1){var c=r[e];if($r[c]===t)return c.toLowerCase()}return t},Hr.format.named=function(t){if(t=t.toLowerCase(),$r[t])return _r($r[t]);throw new Error("unknown color name: "+t)},Hr.autodetect.push({p:5,test:function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(!e.length&&"string"===zr(t)&&$r[t.toLowerCase()])return"named"}});var Wr=g.unpack,Xr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=Wr(t,"rgb");return(r[0]<<16)+(r[1]<<8)+r[2]},Ur=Xr,Yr=g.type,qr=function(t){if("number"==Yr(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},Gr=w,jr=O,Kr=d,Zr=g.type,Jr=Ur;jr.prototype.num=function(){return Jr(this._rgb)},Gr.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(jr,[null].concat(t,["num"])))},Kr.format.num=qr,Kr.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===Zr(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var Qr=w,tc=O,ec=d,rc=g.unpack,cc=g.type,nc=Math.round;tc.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(nc)},tc.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,r){return r<3?!1===t?e:nc(e):e}))},Qr.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(tc,[null].concat(t,["rgb"])))},ec.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=rc(t,"rgba");return void 0===r[3]&&(r[3]=1),r},ec.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=rc(t,"rgba"),"array"===cc(t)&&(3===t.length||4===t.length&&"number"==cc(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var ic=Math.log,sc=function(t){var e,r,c,n=t/100;return n<66?(e=255,r=n<6?0:-155.25485562709179-.44596950469579133*(r=n-2)+104.49216199393888*ic(r),c=n<20?0:.8274096064007395*(c=n-10)-254.76935184120902+115.67994401066147*ic(c)):(e=351.97690566805693+.114206453784165*(e=n-55)-40.25366309332127*ic(e),r=325.4494125711974+.07943456536662342*(r=n-50)-28.0852963507957*ic(r),c=255),[e,r,c,1]},Cc=sc,ac=g.unpack,oc=Math.round,lc=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var r,c=ac(t,"rgb"),n=c[0],i=c[2],s=1e3,C=4e4,a=.4;C-s>a;){var o=Cc(r=.5*(C+s));o[2]/o[0]>=i/n?C=r:s=r}return oc(r)},hc=w,uc=O,gc=d,dc=lc;uc.prototype.temp=uc.prototype.kelvin=uc.prototype.temperature=function(){return dc(this._rgb)},hc.temp=hc.kelvin=hc.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(uc,[null].concat(t,["temp"])))},gc.format.temp=gc.format.kelvin=gc.format.temperature=sc;var fc=g.unpack,pc=Math.cbrt,mc=Math.pow,vc=Math.sign,bc=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=fc(t,"rgb"),c=r[0],n=r[1],i=r[2],s=[Nc(c/255),Nc(n/255),Nc(i/255)],C=s[0],a=s[1],o=s[2],l=pc(.4122214708*C+.5363325363*a+.0514459929*o),h=pc(.2119034982*C+.6806995451*a+.1073969566*o),u=pc(.0883024619*C+.2817188376*a+.6299787005*o);return[.2104542553*l+.793617785*h-.0040720468*u,1.9779984951*l-2.428592205*h+.4505937099*u,.0259040371*l+.7827717662*h-.808675766*u]},Oc=bc;function Nc(t){var e=Math.abs(t);return e<.04045?t/12.92:(vc(t)||1)*mc((e+.055)/1.055,2.4)}var wc=g.unpack,yc=Math.pow,Sc=Math.sign,xc=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=(t=wc(t,"lab"))[0],c=t[1],n=t[2],i=yc(r+.3963377774*c+.2158037573*n,3),s=yc(r-.1055613458*c-.0638541728*n,3),C=yc(r-.0894841775*c-1.291485548*n,3);return[255*Fc(4.0767416621*i-3.3077115913*s+.2309699292*C),255*Fc(-1.2684380046*i+2.6097574011*s-.3413193965*C),255*Fc(-.0041960863*i-.7034186147*s+1.707614701*C),t.length>3?t[3]:1]},Ac=xc;function Fc(t){var e=Math.abs(t);return e>.0031308?(Sc(t)||1)*(1.055*yc(e,1/2.4)-.055):12.92*t}var Rc=g.unpack,kc=g.type,Mc=w,Ec=O,Tc=d,Ic=Oc;Ec.prototype.oklab=function(){return Ic(this._rgb)},Mc.oklab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Ec,[null].concat(t,["oklab"])))},Tc.format.oklab=Ac,Tc.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Rc(t,"oklab"),"array"===kc(t)&&3===t.length)return"oklab"}});var Bc=g.unpack,Lc=Oc,Pc=or,Dc=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=Bc(t,"rgb"),c=r[0],n=r[1],i=r[2],s=Lc(c,n,i),C=s[0],a=s[1],o=s[2];return Pc(C,a,o)},Hc=Dc,zc=g.unpack,$c=Or,_c=Ac,Vc=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=(t=zc(t,"lch"))[0],c=t[1],n=t[2],i=$c(r,c,n),s=i[0],C=i[1],a=i[2],o=_c(s,C,a);return[o[0],o[1],o[2],t.length>3?t[3]:1]},Wc=Vc,Xc=g.unpack,Uc=g.type,Yc=w,qc=O,Gc=d,jc=Hc;qc.prototype.oklch=function(){return jc(this._rgb)},Yc.oklch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(qc,[null].concat(t,["oklch"])))},Gc.format.oklch=Wc,Gc.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Xc(t,"oklch"),"array"===Uc(t)&&3===t.length)return"oklch"}});var Kc=O,Zc=g.type;Kc.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===Zc(t)?e?(this._rgb[3]=t,this):new Kc([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},O.prototype.clipped=function(){return this._rgb._clipped||!1};var Jc=O,Qc=Le;Jc.prototype.darken=function(t){void 0===t&&(t=1);var e=this,r=e.lab();return r[0]-=Qc.Kn*t,new Jc(r,"lab").alpha(e.alpha(),!0)},Jc.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},Jc.prototype.darker=Jc.prototype.darken,Jc.prototype.brighter=Jc.prototype.brighten,O.prototype.get=function(t){var e=t.split("."),r=e[0],c=e[1],n=this[r]();if(c){var i=r.indexOf(c)-("ok"===r.substr(0,2)?2:0);if(i>-1)return n[i];throw new Error("unknown channel "+c+" in mode "+r)}return n};var tn=O,en=g.type,rn=Math.pow,cn=1e-7,nn=20;tn.prototype.luminance=function(t){if(void 0!==t&&"number"===en(t)){if(0===t)return new tn([0,0,0,this._rgb[3]],"rgb");if(1===t)return new tn([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),r="rgb",c=nn,n=function(e,i){var s=e.interpolate(i,.5,r),C=s.luminance();return Math.abs(t-C)<cn||!c--?s:C>t?n(e,s):n(s,i)},i=(e>t?n(new tn([0,0,0]),this):n(this,new tn([255,255,255]))).rgb();return new tn(i.concat([this._rgb[3]]))}return sn.apply(void 0,this._rgb.slice(0,3))};var sn=function(t,e,r){return.2126*(t=Cn(t))+.7152*(e=Cn(e))+.0722*(r=Cn(r))},Cn=function(t){return(t/=255)<=.03928?t/12.92:rn((t+.055)/1.055,2.4)},an={},on=O,ln=g.type,hn=an,un=function(t,e,r){void 0===r&&(r=.5);for(var c=[],n=arguments.length-3;n-- >0;)c[n]=arguments[n+3];var i=c[0]||"lrgb";if(hn[i]||c.length||(i=Object.keys(hn)[0]),!hn[i])throw new Error("interpolation mode "+i+" is not defined");return"object"!==ln(t)&&(t=new on(t)),"object"!==ln(e)&&(e=new on(e)),hn[i](t,e,r).alpha(t.alpha()+r*(e.alpha()-t.alpha()))},gn=O,dn=un;gn.prototype.mix=gn.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var r=[],c=arguments.length-2;c-- >0;)r[c]=arguments[c+2];return dn.apply(void 0,[this,t,e].concat(r))};var fn=O;fn.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,r=e[3];return t?(this._rgb=[e[0]*r,e[1]*r,e[2]*r,r],this):new fn([e[0]*r,e[1]*r,e[2]*r,r],"rgb")};var pn=O,mn=Le;pn.prototype.saturate=function(t){void 0===t&&(t=1);var e=this,r=e.lch();return r[1]+=mn.Kn*t,r[1]<0&&(r[1]=0),new pn(r,"lch").alpha(e.alpha(),!0)},pn.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var vn=O,bn=g.type;vn.prototype.set=function(t,e,r){void 0===r&&(r=!1);var c=t.split("."),n=c[0],i=c[1],s=this[n]();if(i){var C=n.indexOf(i)-("ok"===n.substr(0,2)?2:0);if(C>-1){if("string"==bn(e))switch(e.charAt(0)){case"+":case"-":s[C]+=+e;break;case"*":s[C]*=+e.substr(1);break;case"/":s[C]/=+e.substr(1);break;default:s[C]=+e}else{if("number"!==bn(e))throw new Error("unsupported value for Color.set");s[C]=e}var a=new vn(s,n);return r?(this._rgb=a._rgb,this):a}throw new Error("unknown channel "+i+" in mode "+n)}return s};var On=O,Nn=function(t,e,r){var c=t._rgb,n=e._rgb;return new On(c[0]+r*(n[0]-c[0]),c[1]+r*(n[1]-c[1]),c[2]+r*(n[2]-c[2]),"rgb")};an.rgb=Nn;var wn=O,yn=Math.sqrt,Sn=Math.pow,xn=function(t,e,r){var c=t._rgb,n=c[0],i=c[1],s=c[2],C=e._rgb,a=C[0],o=C[1],l=C[2];return new wn(yn(Sn(n,2)*(1-r)+Sn(a,2)*r),yn(Sn(i,2)*(1-r)+Sn(o,2)*r),yn(Sn(s,2)*(1-r)+Sn(l,2)*r),"rgb")};an.lrgb=xn;var An=O,Fn=function(t,e,r){var c=t.lab(),n=e.lab();return new An(c[0]+r*(n[0]-c[0]),c[1]+r*(n[1]-c[1]),c[2]+r*(n[2]-c[2]),"lab")};an.lab=Fn;var Rn=O,kn=function(t,e,r,c){var n,i,s,C,a,o,l,h,u,g,d,f,p;return"hsl"===c?(s=t.hsl(),C=e.hsl()):"hsv"===c?(s=t.hsv(),C=e.hsv()):"hcg"===c?(s=t.hcg(),C=e.hcg()):"hsi"===c?(s=t.hsi(),C=e.hsi()):"lch"===c||"hcl"===c?(c="hcl",s=t.hcl(),C=e.hcl()):"oklch"===c&&(s=t.oklch().reverse(),C=e.oklch().reverse()),"h"!==c.substr(0,1)&&"oklch"!==c||(a=(n=s)[0],l=n[1],u=n[2],o=(i=C)[0],h=i[1],g=i[2]),isNaN(a)||isNaN(o)?isNaN(a)?isNaN(o)?f=Number.NaN:(f=o,1!=u&&0!=u||"hsv"==c||(d=h)):(f=a,1!=g&&0!=g||"hsv"==c||(d=l)):f=a+r*(o>a&&o-a>180?o-(a+360):o<a&&a-o>180?o+360-a:o-a),void 0===d&&(d=l+r*(h-l)),p=u+r*(g-u),new Rn("oklch"===c?[p,d,f]:[f,d,p],c)},Mn=kn,En=function(t,e,r){return Mn(t,e,r,"lch")};an.lch=En,an.hcl=En;var Tn=O,In=function(t,e,r){var c=t.num(),n=e.num();return new Tn(c+r*(n-c),"num")};an.num=In;var Bn=kn,Ln=function(t,e,r){return Bn(t,e,r,"hcg")};an.hcg=Ln;var Pn=kn,Dn=function(t,e,r){return Pn(t,e,r,"hsi")};an.hsi=Dn;var Hn=kn,zn=function(t,e,r){return Hn(t,e,r,"hsl")};an.hsl=zn;var $n=kn,_n=function(t,e,r){return $n(t,e,r,"hsv")};an.hsv=_n;var Vn=O,Wn=function(t,e,r){var c=t.oklab(),n=e.oklab();return new Vn(c[0]+r*(n[0]-c[0]),c[1]+r*(n[1]-c[1]),c[2]+r*(n[2]-c[2]),"oklab")};an.oklab=Wn;var Xn=kn,Un=function(t,e,r){return Xn(t,e,r,"oklch")};an.oklch=Un;var Yn=O,qn=g.clip_rgb,Gn=Math.pow,jn=Math.sqrt,Kn=Math.PI,Zn=Math.cos,Jn=Math.sin,Qn=Math.atan2,ti=function(t,e,r){void 0===e&&(e="lrgb"),void 0===r&&(r=null);var c=t.length;r||(r=Array.from(new Array(c)).map((function(){return 1})));var n=c/r.reduce((function(t,e){return t+e}));if(r.forEach((function(t,e){r[e]*=n})),t=t.map((function(t){return new Yn(t)})),"lrgb"===e)return ei(t,r);for(var i=t.shift(),s=i.get(e),C=[],a=0,o=0,l=0;l<s.length;l++)if(s[l]=(s[l]||0)*r[0],C.push(isNaN(s[l])?0:r[0]),"h"===e.charAt(l)&&!isNaN(s[l])){var h=s[l]/180*Kn;a+=Zn(h)*r[0],o+=Jn(h)*r[0]}var u=i.alpha()*r[0];t.forEach((function(t,c){var n=t.get(e);u+=t.alpha()*r[c+1];for(var i=0;i<s.length;i++)if(!isNaN(n[i]))if(C[i]+=r[c+1],"h"===e.charAt(i)){var l=n[i]/180*Kn;a+=Zn(l)*r[c+1],o+=Jn(l)*r[c+1]}else s[i]+=n[i]*r[c+1]}));for(var g=0;g<s.length;g++)if("h"===e.charAt(g)){for(var d=Qn(o/C[g],a/C[g])/Kn*180;d<0;)d+=360;for(;d>=360;)d-=360;s[g]=d}else s[g]=s[g]/C[g];return u/=c,new Yn(s,e).alpha(u>.99999?1:u,!0)},ei=function(t,e){for(var r=t.length,c=[0,0,0,0],n=0;n<t.length;n++){var i=t[n],s=e[n]/r,C=i._rgb;c[0]+=Gn(C[0],2)*s,c[1]+=Gn(C[1],2)*s,c[2]+=Gn(C[2],2)*s,c[3]+=C[3]*s}return c[0]=jn(c[0]),c[1]=jn(c[1]),c[2]=jn(c[2]),c[3]>.9999999&&(c[3]=1),new Yn(qn(c))},ri=w,ci=g.type,ni=Math.pow,ii=function(t){var e="rgb",r=ri("#ccc"),c=0,n=[0,1],i=[],s=[0,0],C=!1,a=[],o=!1,l=0,h=1,u=!1,g={},d=!0,f=1,p=function(t){if((t=t||["#fff","#000"])&&"string"===ci(t)&&ri.brewer&&ri.brewer[t.toLowerCase()]&&(t=ri.brewer[t.toLowerCase()]),"array"===ci(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=ri(t[e]);i.length=0;for(var r=0;r<t.length;r++)i.push(r/(t.length-1))}return N(),a=t},m=function(t){if(null!=C){for(var e=C.length-1,r=0;r<e&&t>=C[r];)r++;return r-1}return 0},v=function(t){return t},b=function(t){return t},O=function(t,c){var n,o;if(null==c&&(c=!1),isNaN(t)||null===t)return r;o=c?t:C&&C.length>2?m(t)/(C.length-2):h!==l?(t-l)/(h-l):1,o=b(o),c||(o=v(o)),1!==f&&(o=ni(o,f)),o=s[0]+o*(1-s[0]-s[1]),o=Math.min(1,Math.max(0,o));var u=Math.floor(1e4*o);if(d&&g[u])n=g[u];else{if("array"===ci(a))for(var p=0;p<i.length;p++){var O=i[p];if(o<=O){n=a[p];break}if(o>=O&&p===i.length-1){n=a[p];break}if(o>O&&o<i[p+1]){o=(o-O)/(i[p+1]-O),n=ri.interpolate(a[p],a[p+1],o,e);break}}else"function"===ci(a)&&(n=a(o));d&&(g[u]=n)}return n},N=function(){return g={}};p(t);var w=function(t){var e=ri(O(t));return o&&e[o]?e[o]():e};return w.classes=function(t){if(null!=t){if("array"===ci(t))C=t,n=[t[0],t[t.length-1]];else{var e=ri.analyze(n);C=0===t?[e.min,e.max]:ri.limits(e,"e",t)}return w}return C},w.domain=function(t){if(!arguments.length)return n;l=t[0],h=t[t.length-1],i=[];var e=a.length;if(t.length===e&&l!==h)for(var r=0,c=Array.from(t);r<c.length;r+=1){var s=c[r];i.push((s-l)/(h-l))}else{for(var C=0;C<e;C++)i.push(C/(e-1));if(t.length>2){var o=t.map((function(e,r){return r/(t.length-1)})),u=t.map((function(t){return(t-l)/(h-l)}));u.every((function(t,e){return o[e]===t}))||(b=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=u[e+1];)e++;var r=(t-u[e])/(u[e+1]-u[e]);return o[e]+r*(o[e+1]-o[e])})}}return n=[l,h],w},w.mode=function(t){return arguments.length?(e=t,N(),w):e},w.range=function(t,e){return p(t),w},w.out=function(t){return o=t,w},w.spread=function(t){return arguments.length?(c=t,w):c},w.correctLightness=function(t){return null==t&&(t=!0),u=t,N(),v=u?function(t){for(var e=O(0,!0).lab()[0],r=O(1,!0).lab()[0],c=e>r,n=O(t,!0).lab()[0],i=e+(r-e)*t,s=n-i,C=0,a=1,o=20;Math.abs(s)>.01&&o-- >0;)c&&(s*=-1),s<0?(C=t,t+=.5*(a-t)):(a=t,t+=.5*(C-t)),n=O(t,!0).lab()[0],s=n-i;return t}:function(t){return t},w},w.padding=function(t){return null!=t?("number"===ci(t)&&(t=[t,t]),s=t,w):s},w.colors=function(e,r){arguments.length<2&&(r="hex");var c=[];if(0===arguments.length)c=a.slice(0);else if(1===e)c=[w(.5)];else if(e>1){var i=n[0],s=n[1]-i;c=si(0,e,!1).map((function(t){return w(i+t/(e-1)*s)}))}else{t=[];var o=[];if(C&&C.length>2)for(var l=1,h=C.length,u=1<=h;u?l<h:l>h;u?l++:l--)o.push(.5*(C[l-1]+C[l]));else o=n;c=o.map((function(t){return w(t)}))}return ri[r]&&(c=c.map((function(t){return t[r]()}))),c},w.cache=function(t){return null!=t?(d=t,w):d},w.gamma=function(t){return null!=t?(f=t,w):f},w.nodata=function(t){return null!=t?(r=ri(t),w):r},w};function si(t,e,r){for(var c=[],n=t<e,i=r?n?e+1:e-1:e,s=t;n?s<i:s>i;n?s++:s--)c.push(s);return c}var Ci=O,ai=ii,oi=function(t){for(var e=[1,1],r=1;r<t;r++){for(var c=[1],n=1;n<=e.length;n++)c[n]=(e[n]||0)+e[n-1];e=c}return e},li=function(t){var e,r,c,n,i,s,C;if(2===(t=t.map((function(t){return new Ci(t)}))).length)e=t.map((function(t){return t.lab()})),i=e[0],s=e[1],n=function(t){var e=[0,1,2].map((function(e){return i[e]+t*(s[e]-i[e])}));return new Ci(e,"lab")};else if(3===t.length)r=t.map((function(t){return t.lab()})),i=r[0],s=r[1],C=r[2],n=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*i[e]+2*(1-t)*t*s[e]+t*t*C[e]}));return new Ci(e,"lab")};else if(4===t.length){var a;c=t.map((function(t){return t.lab()})),i=c[0],s=c[1],C=c[2],a=c[3],n=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*i[e]+3*(1-t)*(1-t)*t*s[e]+3*(1-t)*t*t*C[e]+t*t*t*a[e]}));return new Ci(e,"lab")}}else{if(!(t.length>=5))throw new RangeError("No point in running bezier with only one color.");var o,l,h;o=t.map((function(t){return t.lab()})),h=t.length-1,l=oi(h),n=function(t){var e=1-t,r=[0,1,2].map((function(r){return o.reduce((function(c,n,i){return c+l[i]*Math.pow(e,h-i)*Math.pow(t,i)*n[r]}),0)}));return new Ci(r,"lab")}}return n},hi=function(t){var e=li(t);return e.scale=function(){return ai(e)},e},ui=w,gi=function(t,e,r){if(!gi[r])throw new Error("unknown blend mode "+r);return gi[r](t,e)},di=function(t){return function(e,r){var c=ui(r).rgb(),n=ui(e).rgb();return ui.rgb(t(c,n))}},fi=function(t){return function(e,r){var c=[];return c[0]=t(e[0],r[0]),c[1]=t(e[1],r[1]),c[2]=t(e[2],r[2]),c}},pi=function(t){return t},mi=function(t,e){return t*e/255},vi=function(t,e){return t>e?e:t},bi=function(t,e){return t>e?t:e},Oi=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},Ni=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},wi=function(t,e){return 255*(1-(1-e/255)/(t/255))},yi=function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t};gi.normal=di(fi(pi)),gi.multiply=di(fi(mi)),gi.screen=di(fi(Oi)),gi.overlay=di(fi(Ni)),gi.darken=di(fi(vi)),gi.lighten=di(fi(bi)),gi.dodge=di(fi(yi)),gi.burn=di(fi(wi));for(var Si=gi,xi=g.type,Ai=g.clip_rgb,Fi=g.TWOPI,Ri=Math.pow,ki=Math.sin,Mi=Math.cos,Ei=w,Ti=function(t,e,r,c,n){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===r&&(r=1),void 0===c&&(c=1),void 0===n&&(n=[0,1]);var i,s=0;"array"===xi(n)?i=n[1]-n[0]:(i=0,n=[n,n]);var C=function(C){var a=Fi*((t+120)/360+e*C),o=Ri(n[0]+i*C,c),l=(0!==s?r[0]+C*s:r)*o*(1-o)/2,h=Mi(a),u=ki(a);return Ei(Ai([255*(o+l*(-.14861*h+1.78277*u)),255*(o+l*(-.29227*h-.90649*u)),255*(o+l*(1.97294*h)),1]))};return C.start=function(e){return null==e?t:(t=e,C)},C.rotations=function(t){return null==t?e:(e=t,C)},C.gamma=function(t){return null==t?c:(c=t,C)},C.hue=function(t){return null==t?r:("array"===xi(r=t)?0==(s=r[1]-r[0])&&(r=r[1]):s=0,C)},C.lightness=function(t){return null==t?n:("array"===xi(t)?(n=t,i=t[1]-t[0]):(n=[t,t],i=0),C)},C.scale=function(){return Ei.scale(C)},C.hue(r),C},Ii=O,Bi="0123456789abcdef",Li=Math.floor,Pi=Math.random,Di=function(){for(var t="#",e=0;e<6;e++)t+=Bi.charAt(Li(16*Pi()));return new Ii(t,"hex")},Hi=C,zi=Math.log,$i=Math.pow,_i=Math.floor,Vi=Math.abs,Wi=function(t,e){void 0===e&&(e=null);var r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===Hi(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===Hi(t)&&(t=t[e]),null==t||isNaN(t)||(r.values.push(t),r.sum+=t,t<r.min&&(r.min=t),t>r.max&&(r.max=t),r.count+=1)})),r.domain=[r.min,r.max],r.limits=function(t,e){return Xi(r,t,e)},r},Xi=function(t,e,r){void 0===e&&(e="equal"),void 0===r&&(r=7),"array"==Hi(t)&&(t=Wi(t));var c=t.min,n=t.max,i=t.values.sort((function(t,e){return t-e}));if(1===r)return[c,n];var s=[];if("c"===e.substr(0,1)&&(s.push(c),s.push(n)),"e"===e.substr(0,1)){s.push(c);for(var C=1;C<r;C++)s.push(c+C/r*(n-c));s.push(n)}else if("l"===e.substr(0,1)){if(c<=0)throw new Error("Logarithmic scales are only possible for values > 0");var a=Math.LOG10E*zi(c),o=Math.LOG10E*zi(n);s.push(c);for(var l=1;l<r;l++)s.push($i(10,a+l/r*(o-a)));s.push(n)}else if("q"===e.substr(0,1)){s.push(c);for(var h=1;h<r;h++){var u=(i.length-1)*h/r,g=_i(u);if(g===u)s.push(i[g]);else{var d=u-g;s.push(i[g]*(1-d)+i[g+1]*d)}}s.push(n)}else if("k"===e.substr(0,1)){var f,p=i.length,m=new Array(p),v=new Array(r),b=!0,O=0,N=null;(N=[]).push(c);for(var w=1;w<r;w++)N.push(c+w/r*(n-c));for(N.push(n);b;){for(var y=0;y<r;y++)v[y]=0;for(var S=0;S<p;S++)for(var x=i[S],A=Number.MAX_VALUE,F=void 0,R=0;R<r;R++){var k=Vi(N[R]-x);k<A&&(A=k,F=R),v[F]++,m[S]=F}for(var M=new Array(r),E=0;E<r;E++)M[E]=null;for(var T=0;T<p;T++)null===M[f=m[T]]?M[f]=i[T]:M[f]+=i[T];for(var I=0;I<r;I++)M[I]*=1/v[I];b=!1;for(var B=0;B<r;B++)if(M[B]!==N[B]){b=!0;break}N=M,++O>200&&(b=!1)}for(var L={},P=0;P<r;P++)L[P]=[];for(var D=0;D<p;D++)L[f=m[D]].push(i[D]);for(var H=[],z=0;z<r;z++)H.push(L[z][0]),H.push(L[z][L[z].length-1]);H=H.sort((function(t,e){return t-e})),s.push(H[0]);for(var $=1;$<H.length;$+=2){var _=H[$];isNaN(_)||-1!==s.indexOf(_)||s.push(_)}}return s},Ui={analyze:Wi,limits:Xi},Yi=O,qi=function(t,e){t=new Yi(t),e=new Yi(e);var r=t.luminance(),c=e.luminance();return r>c?(r+.05)/(c+.05):(c+.05)/(r+.05)},Gi=O,ji=Math.sqrt,Ki=Math.pow,Zi=Math.min,Ji=Math.max,Qi=Math.atan2,ts=Math.abs,es=Math.cos,rs=Math.sin,cs=Math.exp,ns=Math.PI,is=function(t,e,r,c,n){void 0===r&&(r=1),void 0===c&&(c=1),void 0===n&&(n=1);var i=function(t){return 360*t/(2*ns)},s=function(t){return 2*ns*t/360};t=new Gi(t),e=new Gi(e);var C=Array.from(t.lab()),a=C[0],o=C[1],l=C[2],h=Array.from(e.lab()),u=h[0],g=h[1],d=h[2],f=(a+u)/2,p=(ji(Ki(o,2)+Ki(l,2))+ji(Ki(g,2)+Ki(d,2)))/2,m=.5*(1-ji(Ki(p,7)/(Ki(p,7)+Ki(25,7)))),v=o*(1+m),b=g*(1+m),O=ji(Ki(v,2)+Ki(l,2)),N=ji(Ki(b,2)+Ki(d,2)),w=(O+N)/2,y=i(Qi(l,v)),S=i(Qi(d,b)),x=y>=0?y:y+360,A=S>=0?S:S+360,F=ts(x-A)>180?(x+A+360)/2:(x+A)/2,R=1-.17*es(s(F-30))+.24*es(s(2*F))+.32*es(s(3*F+6))-.2*es(s(4*F-63)),k=A-x;k=ts(k)<=180?k:A<=x?k+360:k-360,k=2*ji(O*N)*rs(s(k)/2);var M=u-a,E=N-O,T=1+.015*Ki(f-50,2)/ji(20+Ki(f-50,2)),I=1+.045*w,B=1+.015*w*R,L=30*cs(-Ki((F-275)/25,2)),P=-2*ji(Ki(w,7)/(Ki(w,7)+Ki(25,7)))*rs(2*s(L)),D=ji(Ki(M/(r*T),2)+Ki(E/(c*I),2)+Ki(k/(n*B),2)+P*(E/(c*I))*(k/(n*B)));return Ji(0,Zi(100,D))},ss=O,Cs=function(t,e,r){void 0===r&&(r="lab"),t=new ss(t),e=new ss(e);var c=t.get(r),n=e.get(r),i=0;for(var s in c){var C=(c[s]||0)-(n[s]||0);i+=C*C}return Math.sqrt(i)},as=O,os=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(as,[null].concat(t))),!0}catch(t){return!1}},ls=w,hs=ii,us={cool:function(){return hs([ls.hsl(180,1,.9),ls.hsl(250,.7,.4)])},hot:function(){return hs(["#000","#f00","#ff0","#fff"]).mode("rgb")}},gs={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ds=0,fs=Object.keys(gs);ds<fs.length;ds+=1){var ps=fs[ds];gs[ps.toLowerCase()]=gs[ps]}var ms=gs,vs=w;vs.average=ti,vs.bezier=hi,vs.blend=Si,vs.cubehelix=Ti,vs.mix=vs.interpolate=un,vs.random=Di,vs.scale=ii,vs.analyze=Ui.analyze,vs.contrast=qi,vs.deltaE=is,vs.distance=Cs,vs.limits=Ui.limits,vs.valid=os,vs.scales=us,vs.colors=Pr,vs.brewer=ms;var bs=vs;return bs}();const Vt=tt,Wt=$t,Xt=_t;var Ut=class{constructor(t,e,r,c,n=.3,i=0,s=null,C=1,a=!1){if(this.points=t,this.weights=e,this.width=r,this.height=c,this.sigma=n,this.interval=i,this.opacity=C,this.normalized=a,null===s){s=["#c51b7d","#de77ae","#f1b6da","#fde0ef","#ffffff","#e6f5d0","#b8e186","#7fbc41","#4d9221"]}this.colormap=s,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height}setFromArray(t,e){this.points=[],t.forEach((t=>{this.points.push(new Vt(t[0],t[1]))})),this.weights=[],e.forEach((t=>{this.weights.push(t)}))}draw(){let t=[];for(let e=0;e<this.width;e++){let e=[];for(let t=0;t<this.height;t++)e.push(0);t.push(e)}let e=1/(2*this.sigma**2);for(let r=0;r<this.points.length;r++){let c=this.points[r],n=this.weights[r];for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++){let s=((r-c.x)**2+(i-c.y)**2)*e,C=n*Math.exp(-s);t[r][i]+=C}}let r=1;if(!this.normalized){let e=-Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER;for(let r=0;r<this.width;r++)for(let n=0;n<this.height;n++)t[r][n]<c&&(c=t[r][n]),t[r][n]>e&&(e=t[r][n]);r=Math.max(Math.abs(c),Math.abs(e))}const c=Xt.scale(this.colormap).domain([-1,1]);for(let e=0;e<this.width;e++)for(let n=0;n<this.height;n++){this.normalized||(t[e][n]=t[e][n]/r),0!==this.interval&&(t[e][n]=Math.round(t[e][n]/this.interval)*this.interval);let[i,s,C]=c(t[e][n]).rgb();this.setPixel(new Vt(e,n),i,s,C)}}getImage(t){let e=new Image;e.onload=()=>{this.context.imageSmoothingEnabled=!1,this.context.drawImage(e,0,0,this.width,this.height),t&&t(e)},e.onerror=function(t){console.log(t)},e.src=this.canvas.toDataURL()}getSVG(){return Wt(this.context.getImageData(0,0,this.width,this.height))}setPixel(t,e,r,c){this.context.fillStyle="rgba("+e+","+r+","+c+","+this.opacity+")",this.context.fillRect(t.x,t.y,1,1)}};const Yt=X,qt=nt(),Gt=Lt,jt=st,Kt=zt,Zt=Ot,Jt=tt,Qt=Ut;var te=class{constructor(t,e=!0){this.preprocessor=new Gt(t),this.opts=this.preprocessor.opts,this.clear=e,this.svgWrapper=null}draw(t,e,r="light",c=null,n=!1,i=[],s=!1){null===e||"svg"===e?((e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttributeNS(null,"width",this.opts.width),e.setAttributeNS(null,"height",this.opts.height)):e instanceof String&&(e=document.getElementById(e));let C={padding:this.opts.padding,compactDrawing:this.opts.compactDrawing};null!==c&&(this.opts.padding+=this.opts.weights.additionalPadding,this.opts.compactDrawing=!1);let a=this.preprocessor;return a.initDraw(t,r,n,i),n||(this.themeManager=new Zt(this.opts.themes,r),(null===this.svgWrapper||this.clear)&&(this.svgWrapper=new Kt(this.themeManager,e,this.opts,this.clear))),a.processGraph(),this.svgWrapper.determineDimensions(a.graph.vertices),this.drawAtomHighlights(a.opts.debug),this.drawEdges(a.opts.debug),this.drawVertices(a.opts.debug),null!==c&&this.drawWeights(c,s),a.opts.debug&&(console.log(a.graph),console.log(a.rings),console.log(a.ringConnections)),this.svgWrapper.constructSvg(),null!==c&&(this.opts.padding=C.padding,this.opts.compactDrawing=C.padding),e}drawCanvas(t,e,r="light",c=!1){let n=null;n="string"==typeof e||e instanceof String?document.getElementById(e):e;let i=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttributeNS(null,"viewBox","0 0 500 500"),i.setAttributeNS(null,"width","500"),i.setAttributeNS(null,"height","500"),i.setAttributeNS(null,"style","visibility: hidden: position: absolute; left: -1000px"),document.body.appendChild(i),this.svgDrawer.draw(t,i,r,c),this.svgDrawer.svgWrapper.toCanvas(n,this.svgDrawer.opts.width,this.svgDrawer.opts.height),document.body.removeChild(i),e}drawAromaticityRing(t){this.svgWrapper.drawRing(t.center.x,t.center.y,t.getSize())}drawEdges(t){let e=this.preprocessor,r=e.graph,c=e.rings,n=Array(this.preprocessor.graph.edges.length);if(n.fill(!1),r.traverseBF(0,(e=>{let c=r.getEdges(e.id);for(var i=0;i<c.length;i++){let e=c[i];n[e]||(n[e]=!0,this.drawEdge(e,t))}})),!this.bridgedRing)for(var i=0;i<c.length;i++){let t=c[i];e.isRingAromatic(t)&&this.drawAromaticityRing(t)}}drawEdge(t,e){let r=this.preprocessor,c=r.opts,n=this.svgWrapper,i=r.graph.edges[t],s=r.graph.vertices[i.sourceId],C=r.graph.vertices[i.targetId],a=s.value.element,o=C.value.element;if(!(s.value.isDrawn&&C.value.isDrawn||"default"!==r.opts.atomVisualization))return;let l=s.position,h=C.position,u=r.getEdgeNormals(i),g=Yt.clone(u);if(g[0].multiplyScalar(10).add(l),g[1].multiplyScalar(10).add(l),"="===i.bondType||"="===r.getRingbondType(s,C)||i.isPartOfAromaticRing&&r.bridgedRing){let t=r.areVerticesInSameRing(s,C),e=r.chooseSide(s,C,g);if(t){let t=r.getLargestOrAromaticCommonRing(s,C).center;u[0].multiplyScalar(c.bondSpacing),u[1].multiplyScalar(c.bondSpacing);let e=null;e=t.sameSideAs(s.position,C.position,Jt.add(l,u[0]))?new jt(Jt.add(l,u[0]),Jt.add(h,u[0]),a,o):new jt(Jt.add(l,u[1]),Jt.add(h,u[1]),a,o),e.shorten(c.bondLength-c.shortBondLength*c.bondLength),i.isPartOfAromaticRing?n.drawLine(e,!0):n.drawLine(e),n.drawLine(new jt(l,h,a,o))}else if(i.center||s.isTerminal()&&C.isTerminal()||0==e.anCount&&e.bnCount>1||0==e.bnCount&&e.anCount>1){this.multiplyNormals(u,c.halfBondSpacing);let t=new jt(Jt.add(l,u[0]),Jt.add(h,u[0]),a,o),e=new jt(Jt.add(l,u[1]),Jt.add(h,u[1]),a,o);n.drawLine(t),n.drawLine(e)}else if(e.sideCount[0]>e.sideCount[1]||e.totalSideCount[0]>e.totalSideCount[1]){this.multiplyNormals(u,c.bondSpacing);let t=new jt(Jt.add(l,u[0]),Jt.add(h,u[0]),a,o);t.shorten(c.bondLength-c.shortBondLength*c.bondLength),n.drawLine(t),n.drawLine(new jt(l,h,a,o))}else if(e.sideCount[0]<e.sideCount[1]||e.totalSideCount[0]<=e.totalSideCount[1]){this.multiplyNormals(u,c.bondSpacing);let t=new jt(Jt.add(l,u[1]),Jt.add(h,u[1]),a,o);t.shorten(c.bondLength-c.shortBondLength*c.bondLength),n.drawLine(t),n.drawLine(new jt(l,h,a,o))}}else if("#"===i.bondType){u[0].multiplyScalar(c.bondSpacing/1.5),u[1].multiplyScalar(c.bondSpacing/1.5);let t=new jt(Jt.add(l,u[0]),Jt.add(h,u[0]),a,o),e=new jt(Jt.add(l,u[1]),Jt.add(h,u[1]),a,o);n.drawLine(t),n.drawLine(e),n.drawLine(new jt(l,h,a,o))}else if("."===i.bondType);else{let t=s.value.isStereoCenter,e=C.value.isStereoCenter;"up"===i.wedge?n.drawWedge(new jt(l,h,a,o,t,e)):"down"===i.wedge?n.drawDashedWedge(new jt(l,h,a,o,t,e)):n.drawLine(new jt(l,h,a,o,t,e))}if(e){let e=Jt.midpoint(l,h);n.drawDebugText(e.x,e.y,"e: "+t)}}drawAtomHighlights(t){let e=this.preprocessor;e.opts;let r=e.graph;e.rings;let c=this.svgWrapper;for(var n=0;n<r.vertices.length;n++){let t=r.vertices[n],s=t.value;for(var i=0;i<e.highlight_atoms.length;i++){let r=e.highlight_atoms[i];s.class===r[0]&&c.drawAtomHighlight(t.position.x,t.position.y,r[1])}}}drawVertices(t){let e=this.preprocessor,r=e.opts,c=e.graph,n=e.rings,i=this.svgWrapper;var s=c.vertices.length;for(s=0;s<c.vertices.length;s++){let e=c.vertices[s],n=e.value,C=0,a=0,o=e.value.bondCount,l=n.element,h=qt.maxBonds[l]-o,u=e.getTextDirection(c.vertices,n.hasAttachedPseudoElements),g=!(!r.terminalCarbons&&"C"===l&&!n.hasAttachedPseudoElements)&&e.isTerminal(),d="C"===n.element;if(c.vertices.length<3&&(d=!1),"N"===n.element&&n.isPartOfAromaticRing&&(h=0),n.bracket&&(h=n.bracket.hcount,C=n.bracket.charge,a=n.bracket.isotope),"allballs"===r.atomVisualization)i.drawBall(e.position.x,e.position.y,l);else if(n.isDrawn&&(!d||n.drawExplicit||g||n.hasAttachedPseudoElements)||1===c.vertices.length)if("default"===r.atomVisualization){let t=n.getAttachedPseudoElements();n.hasAttachedPseudoElements&&c.vertices.length===Object.keys(t).length+1&&(u="right"),i.drawText(e.position.x,e.position.y,l,h,u,g,C,a,c.vertices.length,t)}else"balls"===r.atomVisualization&&i.drawBall(e.position.x,e.position.y,l);else if(2===e.getNeighbourCount()&&1==e.forcePositioned){let t=c.vertices[e.neighbours[0]].position,r=c.vertices[e.neighbours[1]].position,n=Jt.threePointangle(e.position,t,r);Math.abs(Math.PI-n)<.1&&i.drawPoint(e.position.x,e.position.y,l)}if(t){let t="v: "+e.id+" "+Yt.print(n.ringbonds);i.drawDebugText(e.position.x,e.position.y,t)}}if(r.debug)for(s=0;s<n.length;s++){let t=n[s].center;i.drawDebugPoint(t.x,t.y,"r: "+n[s].id)}}drawWeights(t,e){if(t.every((t=>0===t)))return;if(t.length!==this.preprocessor.graph.atomIdxToVertexId.length)throw new Error("The number of weights supplied must be equal to the number of (heavy) atoms in the molecule.");let r=[];for(const t of this.preprocessor.graph.atomIdxToVertexId){let e=this.preprocessor.graph.vertices[t];r.push(new Jt(e.position.x-this.svgWrapper.minX,e.position.y-this.svgWrapper.minY))}let c=new Qt(r,t,this.svgWrapper.drawingWidth,this.svgWrapper.drawingHeight,this.opts.weights.sigma,this.opts.weights.interval,this.opts.weights.colormap,this.opts.weights.opacity,e);c.draw(),this.svgWrapper.addLayer(c.getSVG())}getTotalOverlapScore(){return this.preprocessor.getTotalOverlapScore()}getMolecularFormula(t=null){return this.preprocessor.getMolecularFormula(t)}multiplyNormals(t,e){t[0].multiplyScalar(e),t[1].multiplyScalar(e)}};const ee=te;var re=class{constructor(t){this.svgDrawer=new ee(t)}draw(t,e,r="light",c=!1,n=[]){let i=null;i="string"==typeof e||e instanceof String?document.getElementById(e):e;let s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttributeNS(null,"viewBox","0 0 "+this.svgDrawer.opts.width+" "+this.svgDrawer.opts.height),s.setAttributeNS(null,"width",this.svgDrawer.opts.width+""),s.setAttributeNS(null,"height",this.svgDrawer.opts.height+""),this.svgDrawer.draw(t,s,r,c,n),this.svgDrawer.svgWrapper.toCanvas(i,this.svgDrawer.opts.width,this.svgDrawer.opts.height)}getTotalOverlapScore(){return this.svgDrawer.getTotalOverlapScore()}getMolecularFormula(){this.svgDrawer.getMolecularFormula()}},ce=function(){function t(e,r,c,n){this.message=e,this.expected=r,this.found=c,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),t.buildMessage=function(t,e){var r={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function c(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+c(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+c(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+c(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+c(t)}))}return"Expected "+function(t){var e,c,n,i=new Array(t.length);for(e=0;e<t.length;e++)i[e]=(n=t[e],r[n.type](n));if(i.sort(),i.length>0){for(e=1,c=1;e<i.length;e++)i[e-1]!==i[e]&&(i[c]=i[e],c++);i.length=c}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:function(e,r){if(r=void 0!==r?r:{},e.split("(").length-1!==e.split(")").length-1)throw Ut("The number of opening parentheses does not match the number of closing parentheses.",0);var c,n,i,s,C={},a={chain:Yt},o=Yt,l=function(t){for(var e=[],r=[],c=0;c<t[1].length;c++)e.push(t[1][c]);for(c=0;c<t[2].length;c++){var n=t[2][c][0]?t[2][c][0]:"-";r.push({bond:n,id:t[2][c][1]})}for(c=0;c<t[3].length;c++)e.push(t[3][c]);for(c=0;c<t[6].length;c++)e.push(t[6][c]);return{atom:t[0],isBracket:!!t[0].element,branches:e,branchCount:e.length,ringbonds:r,ringbondCount:r.length,bond:t[4]?t[4]:"-",next:t[5],hasNext:!!t[5]}},h="(",u=$t("(",!1),g=")",d=$t(")",!1),f=function(t){var e=t[1]?t[1]:"-";return t[2].branchBond=e,t[2]},p=function(t){return t},m=/^[\-=#$:\/\\.]/,v=_t(["-","=","#","$",":","/","\\","."],!1,!1),b=function(t){return t},O="[",N=$t("[",!1),w="se",y=$t("se",!1),S="as",x=$t("as",!1),A="]",F=$t("]",!1),R=function(t){return{isotope:t[1],element:t[2],chirality:t[3],hcount:t[4],charge:t[5],class:t[6]}},k="B",M=$t("B",!1),E="r",T=$t("r",!1),I="C",B=$t("C",!1),L="l",P=$t("l",!1),D=/^[NOPSFI]/,H=_t(["N","O","P","S","F","I"],!1,!1),z=function(t){return t.length>1?t.join(""):t},$=/^[bcnops]/,_=_t(["b","c","n","o","p","s"],!1,!1),V="*",W=$t("*",!1),X=function(t){return t},U=/^[A-Z]/,Y=_t([["A","Z"]],!1,!1),q=/^[a-z]/,G=_t([["a","z"]],!1,!1),j=function(t){return t.join("")},K="%",Z=$t("%",!1),J=/^[1-9]/,Q=_t([["1","9"]],!1,!1),tt=/^[0-9]/,et=_t([["0","9"]],!1,!1),rt=function(t){return 1==t.length?Number(t):Number(t.join("").replace("%",""))},ct="@",nt=$t("@",!1),it="TH",st=$t("TH",!1),Ct=/^[12]/,at=_t(["1","2"],!1,!1),ot="AL",lt=$t("AL",!1),ht="SP",ut=$t("SP",!1),gt=/^[1-3]/,dt=_t([["1","3"]],!1,!1),ft="TB",pt=$t("TB",!1),mt="OH",vt=$t("OH",!1),bt=function(t){return t[1]?"@"==t[1]?"@@":t[1].join("").replace(",",""):"@"},Ot=function(t){return t},Nt="+",wt=$t("+",!1),yt=function(t){return t[1]?"+"!=t[1]?Number(t[1].join("")):2:1},St="-",xt=$t("-",!1),At=function(t){return t[1]?"-"!=t[1]?-Number(t[1].join("")):-2:-1},Ft="H",Rt=$t("H",!1),kt=function(t){return t[1]?Number(t[1]):1},Mt=":",Et=$t(":",!1),Tt=/^[0]/,It=_t(["0"],!1,!1),Bt=function(t){return Number(t[1][0]+t[1][1].join(""))},Lt=function(t){return Number(t.join(""))},Pt=0,Dt=[{line:1,column:1}],Ht=0,zt=[];if("startRule"in r){if(!(r.startRule in a))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=a[r.startRule]}function $t(t,e){return{type:"literal",text:t,ignoreCase:e}}function _t(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function Vt(t){var r,c=Dt[t];if(c)return c;for(r=t-1;!Dt[r];)r--;for(c={line:(c=Dt[r]).line,column:c.column};r<t;)10===e.charCodeAt(r)?(c.line++,c.column=1):c.column++,r++;return Dt[t]=c,c}function Wt(t,e){var r=Vt(t),c=Vt(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:c.line,column:c.column}}}function Xt(t){Pt<Ht||(Pt>Ht&&(Ht=Pt,zt=[]),zt.push(t))}function Ut(e,r){return new t(e,null,null,r)}function Yt(){var t,r,c,n,i,s,a,o,h;if(Pt,t=Pt,r=function(){var t,r;t=Pt,r=function(){var t,r,c,n;t=Pt,r=Pt,66===e.charCodeAt(Pt)?(c=k,Pt++):(c=C,Xt(M));c!==C?(114===e.charCodeAt(Pt)?(n=E,Pt++):(n=C,Xt(T)),n===C&&(n=null),n!==C?r=c=[c,n]:(Pt=r,r=C)):(Pt=r,r=C);r===C&&(r=Pt,67===e.charCodeAt(Pt)?(c=I,Pt++):(c=C,Xt(B)),c!==C?(108===e.charCodeAt(Pt)?(n=L,Pt++):(n=C,Xt(P)),n===C&&(n=null),n!==C?r=c=[c,n]:(Pt=r,r=C)):(Pt=r,r=C),r===C&&(D.test(e.charAt(Pt))?(r=e.charAt(Pt),Pt++):(r=C,Xt(H))));r!==C&&(r=z(r));return t=r,t}(),r===C&&(r=jt())===C&&(r=function(){var t,r,c,n,i,s,a,o,l,h;t=Pt,r=Pt,91===e.charCodeAt(Pt)?(c=O,Pt++):(c=C,Xt(N));c!==C?(n=function(){var t,r,c,n,i;t=Pt,r=Pt,J.test(e.charAt(Pt))?(c=e.charAt(Pt),Pt++):(c=C,Xt(Q));c!==C?(tt.test(e.charAt(Pt))?(n=e.charAt(Pt),Pt++):(n=C,Xt(et)),n===C&&(n=null),n!==C?(tt.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=C,Xt(et)),i===C&&(i=null),i!==C?r=c=[c,n,i]:(Pt=r,r=C)):(Pt=r,r=C)):(Pt=r,r=C);r!==C&&(r=Lt(r));return t=r,t}(),n===C&&(n=null),n!==C?(e.substr(Pt,2)===w?(i=w,Pt+=2):(i=C,Xt(y)),i===C&&(e.substr(Pt,2)===S?(i=S,Pt+=2):(i=C,Xt(x)),i===C&&(i=jt())===C&&(i=function(){var t,r,c,n;t=Pt,r=Pt,U.test(e.charAt(Pt))?(c=e.charAt(Pt),Pt++):(c=C,Xt(Y));c!==C?(q.test(e.charAt(Pt))?(n=e.charAt(Pt),Pt++):(n=C,Xt(G)),n===C&&(n=null),n!==C?r=c=[c,n]:(Pt=r,r=C)):(Pt=r,r=C);r!==C&&(r=j(r));return t=r,t}(),i===C&&(i=Kt()))),i!==C?(s=function(){var t,r,c,n,i,s,a;t=Pt,r=Pt,64===e.charCodeAt(Pt)?(c=ct,Pt++):(c=C,Xt(nt));c!==C?(64===e.charCodeAt(Pt)?(n=ct,Pt++):(n=C,Xt(nt)),n===C&&(n=Pt,e.substr(Pt,2)===it?(i=it,Pt+=2):(i=C,Xt(st)),i!==C?(Ct.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=C,Xt(at)),s!==C?n=i=[i,s]:(Pt=n,n=C)):(Pt=n,n=C),n===C&&(n=Pt,e.substr(Pt,2)===ot?(i=ot,Pt+=2):(i=C,Xt(lt)),i!==C?(Ct.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=C,Xt(at)),s!==C?n=i=[i,s]:(Pt=n,n=C)):(Pt=n,n=C),n===C&&(n=Pt,e.substr(Pt,2)===ht?(i=ht,Pt+=2):(i=C,Xt(ut)),i!==C?(gt.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=C,Xt(dt)),s!==C?n=i=[i,s]:(Pt=n,n=C)):(Pt=n,n=C),n===C&&(n=Pt,e.substr(Pt,2)===ft?(i=ft,Pt+=2):(i=C,Xt(pt)),i!==C?(J.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=C,Xt(Q)),s!==C?(tt.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=C,Xt(et)),a===C&&(a=null),a!==C?n=i=[i,s,a]:(Pt=n,n=C)):(Pt=n,n=C)):(Pt=n,n=C),n===C&&(n=Pt,e.substr(Pt,2)===mt?(i=mt,Pt+=2):(i=C,Xt(vt)),i!==C?(J.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=C,Xt(Q)),s!==C?(tt.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=C,Xt(et)),a===C&&(a=null),a!==C?n=i=[i,s,a]:(Pt=n,n=C)):(Pt=n,n=C)):(Pt=n,n=C)))))),n===C&&(n=null),n!==C?r=c=[c,n]:(Pt=r,r=C)):(Pt=r,r=C);r!==C&&(r=bt(r));return t=r,t}(),s===C&&(s=null),s!==C?(a=function(){var t,r,c,n;t=Pt,r=Pt,72===e.charCodeAt(Pt)?(c=Ft,Pt++):(c=C,Xt(Rt));c!==C?(tt.test(e.charAt(Pt))?(n=e.charAt(Pt),Pt++):(n=C,Xt(et)),n===C&&(n=null),n!==C?r=c=[c,n]:(Pt=r,r=C)):(Pt=r,r=C);r!==C&&(r=kt(r));return t=r,t}(),a===C&&(a=null),a!==C?(o=function(){var t,r;t=Pt,r=function(){var t,r,c,n,i,s;t=Pt,r=Pt,43===e.charCodeAt(Pt)?(c=Nt,Pt++):(c=C,Xt(wt));c!==C?(43===e.charCodeAt(Pt)?(n=Nt,Pt++):(n=C,Xt(wt)),n===C&&(n=Pt,J.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=C,Xt(Q)),i!==C?(tt.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=C,Xt(et)),s===C&&(s=null),s!==C?n=i=[i,s]:(Pt=n,n=C)):(Pt=n,n=C)),n===C&&(n=null),n!==C?r=c=[c,n]:(Pt=r,r=C)):(Pt=r,r=C);r!==C&&(r=yt(r));return t=r,t}(),r===C&&(r=function(){var t,r,c,n,i,s;t=Pt,r=Pt,45===e.charCodeAt(Pt)?(c=St,Pt++):(c=C,Xt(xt));c!==C?(45===e.charCodeAt(Pt)?(n=St,Pt++):(n=C,Xt(xt)),n===C&&(n=Pt,J.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=C,Xt(Q)),i!==C?(tt.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=C,Xt(et)),s===C&&(s=null),s!==C?n=i=[i,s]:(Pt=n,n=C)):(Pt=n,n=C)),n===C&&(n=null),n!==C?r=c=[c,n]:(Pt=r,r=C)):(Pt=r,r=C);r!==C&&(r=At(r));return t=r,t}());r!==C&&(r=Ot(r));return t=r,t}(),o===C&&(o=null),o!==C?(l=function(){var t,r,c,n,i,s,a;t=Pt,r=Pt,58===e.charCodeAt(Pt)?(c=Mt,Pt++):(c=C,Xt(Et));if(c!==C){if(n=Pt,J.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=C,Xt(Q)),i!==C){for(s=[],tt.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=C,Xt(et));a!==C;)s.push(a),tt.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=C,Xt(et));s!==C?n=i=[i,s]:(Pt=n,n=C)}else Pt=n,n=C;n===C&&(Tt.test(e.charAt(Pt))?(n=e.charAt(Pt),Pt++):(n=C,Xt(It))),n!==C?r=c=[c,n]:(Pt=r,r=C)}else Pt=r,r=C;r!==C&&(r=Bt(r));return t=r,t}(),l===C&&(l=null),l!==C?(93===e.charCodeAt(Pt)?(h=A,Pt++):(h=C,Xt(F)),h!==C?r=c=[c,n,i,s,a,o,l,h]:(Pt=r,r=C)):(Pt=r,r=C)):(Pt=r,r=C)):(Pt=r,r=C)):(Pt=r,r=C)):(Pt=r,r=C)):(Pt=r,r=C)):(Pt=r,r=C);r!==C&&(r=R(r));return t=r,t}(),r===C&&(r=Kt()));r!==C&&(r=p(r));return t=r,t}(),r!==C){for(c=[],n=qt();n!==C;)c.push(n),n=qt();if(c!==C){for(n=[],i=Pt,(s=Gt())===C&&(s=null),s!==C&&(a=Zt())!==C?i=s=[s,a]:(Pt=i,i=C);i!==C;)n.push(i),i=Pt,(s=Gt())===C&&(s=null),s!==C&&(a=Zt())!==C?i=s=[s,a]:(Pt=i,i=C);if(n!==C){for(i=[],s=qt();s!==C;)i.push(s),s=qt();if(i!==C)if((s=Gt())===C&&(s=null),s!==C)if((a=Yt())===C&&(a=null),a!==C){for(o=[],h=qt();h!==C;)o.push(h),h=qt();o!==C?t=r=[r,c,n,i,s,a,o]:(Pt=t,t=C)}else Pt=t,t=C;else Pt=t,t=C;else Pt=t,t=C}else Pt=t,t=C}else Pt=t,t=C}else Pt=t,t=C;return t!==C&&(t=l(t)),t}function qt(){var t,r,c,n,i;return Pt,t=Pt,40===e.charCodeAt(Pt)?(r=h,Pt++):(r=C,Xt(u)),r!==C?((c=Gt())===C&&(c=null),c!==C&&(n=Yt())!==C?(41===e.charCodeAt(Pt)?(i=g,Pt++):(i=C,Xt(d)),i!==C?t=r=[r,c,n,i]:(Pt=t,t=C)):(Pt=t,t=C)):(Pt=t,t=C),t!==C&&(t=f(t)),t}function Gt(){var t;if(Pt,m.test(e.charAt(Pt))){if((t=e.charAt(Pt))===e.charAt(Pt+1))throw t=C,Ut("The parser encountered a bond repetition.",Pt+1);Pt++}else t=C,Xt(v);return t!==C&&(t=b(t)),t}function jt(){var t;return Pt,$.test(e.charAt(Pt))?(t=e.charAt(Pt),Pt++):(t=C,Xt(_)),t!==C&&(t=p(t)),t}function Kt(){var t;return Pt,42===e.charCodeAt(Pt)?(t=V,Pt++):(t=C,Xt(W)),t!==C&&(t=X(t)),t}function Zt(){var t,r,c,n;return Pt,t=Pt,37===e.charCodeAt(Pt)?(r=K,Pt++):(r=C,Xt(Z)),r!==C?(J.test(e.charAt(Pt))?(c=e.charAt(Pt),Pt++):(c=C,Xt(Q)),c!==C?(tt.test(e.charAt(Pt))?(n=e.charAt(Pt),Pt++):(n=C,Xt(et)),n!==C?t=r=[r,c,n]:(Pt=t,t=C)):(Pt=t,t=C)):(Pt=t,t=C),t===C&&(tt.test(e.charAt(Pt))?(t=e.charAt(Pt),Pt++):(t=C,Xt(et))),t!==C&&(t=rt(t)),t}if((c=o())!==C&&Pt===e.length)return c;throw c!==C&&Pt<e.length&&Xt({type:"end"}),n=zt,i=Ht<e.length?e.charAt(Ht):null,s=Ht<e.length?Wt(Ht,Ht+1):Wt(Ht,Ht),new t(t.buildMessage(n,i),n,i,s)}}}();const ne=ce;const ie=class{constructor(t){this.reactantsSmiles=[],this.reagentsSmiles=[],this.productsSmiles=[],this.reactantsWeights=[],this.reagentsWeights=[],this.productsWeights=[],this.reactants=[],this.reagents=[],this.products=[];let e=t.split(">");if(3!==e.length)throw new Error("Invalid reaction SMILES. Did you add fewer than or more than two '>'?");""!==e[0]&&(this.reactantsSmiles=e[0].split(".")),""!==e[1]&&(this.reagentsSmiles=e[1].split(".")),""!==e[2]&&(this.productsSmiles=e[2].split("."));for(var r=0;r<this.reactantsSmiles.length;r++)this.reactants.push(ne.parse(this.reactantsSmiles[r]));for(r=0;r<this.reagentsSmiles.length;r++)this.reagents.push(ne.parse(this.reagentsSmiles[r]));for(r=0;r<this.productsSmiles.length;r++)this.products.push(ne.parse(this.productsSmiles[r]))}};var se=class{static parse(t){return new ie(t)}};const Ce=te,ae=zt,oe=Nt,le=Ot,he={C2H4O2:"acetic acid",C3H6O:"acetone",C2H3N:"acetonitrile",C6H6:"benzene",CCl4:"carbon tetrachloride",C6H5Cl:"chlorobenzene",CHCl3:"chloroform",C6H12:"cyclohexane",C2H4Cl2:"1,2-dichloroethane",C4H10O3:"diethylene glycol",C6H14O3:"diglyme",C4H10O2:"DME",C3H7NO:"DMF",C2H6OS:"DMSO",C2H6O:"ethanol",C2H6O2:"ethylene glycol",C3H8O3:"glycerin",C7H16:"heptane",C6H18N3OP:"HMPA",C6H18N3P:"HMPT",C6H14:"hexane",CH4O:"methanol",C5H12O:"MTBE",CH2Cl2:"methylene chloride",CH5H9NO:"NMP",CH3NO2:"nitromethane",C5H12:"pentane",C5H5N:"pyridine",C7H8:"toluene",C6H15N:"triethyl amine",H2O:"water"};var ue=class{constructor(t,e){this.defaultOptions={scale:e.scale>0?e.scale:1,fontSize:.8*e.fontSizeLarge,fontFamily:"Arial, Helvetica, sans-serif",spacing:10,plus:{size:9,thickness:1},arrow:{length:4*e.bondLength,headSize:6,thickness:1,margin:3},weights:{normalize:!1}},this.opts=oe.extend(!0,this.defaultOptions,t),this.drawer=new Ce(e),this.molOpts=this.drawer.opts}draw(t,e,r="light",c=null,n="{reagents}",i="",s=!1){if(this.themeManager=new le(this.molOpts.themes,r),this.opts.weights.normalize){let t=-Number.MAX_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER;if(c.hasOwnProperty("reactants"))for(let r=0;r<c.reactants.length;r++)for(let n=0;n<c.reactants[r].length;n++)c.reactants[r][n]<e&&(e=c.reactants[r][n]),c.reactants[r][n]>t&&(t=c.reactants[r][n]);if(c.hasOwnProperty("reagents"))for(let r=0;r<c.reagents.length;r++)for(let n=0;n<c.reagents[r].length;n++)c.reagents[r][n]<e&&(e=c.reagents[r][n]),c.reagents[r][n]>t&&(t=c.reagents[r][n]);if(c.hasOwnProperty("products"))for(let r=0;r<c.products.length;r++)for(let n=0;n<c.products[r].length;n++)c.products[r][n]<e&&(e=c.products[r][n]),c.products[r][n]>t&&(t=c.products[r][n]);let r=Math.max(Math.abs(e),Math.abs(t));if(0===r&&(r=1),c.hasOwnProperty("reactants"))for(let t=0;t<c.reactants.length;t++)for(let e=0;e<c.reactants[t].length;e++)c.reactants[t][e]/=r;if(c.hasOwnProperty("reagents"))for(let t=0;t<c.reagents.length;t++)for(let e=0;e<c.reagents[t].length;e++)c.reagents[t][e]/=r;if(c.hasOwnProperty("products"))for(let t=0;t<c.products.length;t++)for(let e=0;e<c.products[t].length;e++)c.products[t][e]/=r}let C=null;for(null===e||"svg"===e?(C=document.createElementNS("http://www.w3.org/2000/svg","svg"),C.setAttribute("xmlns","http://www.w3.org/2000/svg"),C.setAttributeNS(null,"width","500"),C.setAttributeNS(null,"height","500")):C="string"==typeof e||e instanceof String?document.getElementById(e):e;C.firstChild;)C.removeChild(C.firstChild);let a=[],o=0;for(var l=0;l<t.reactants.length;l++){l>0&&a.push({width:this.opts.plus.size*this.opts.scale,height:this.opts.plus.size*this.opts.scale,svg:this.getPlus()});let e=null;c&&c.hasOwnProperty("reactants")&&c.reactants.length>l&&(e=c.reactants[l]);let n=document.createElementNS("http://www.w3.org/2000/svg","svg");this.drawer.draw(t.reactants[l],n,r,e,s,[],this.opts.weights.normalize);let i={width:n.viewBox.baseVal.width*this.opts.scale,height:n.viewBox.baseVal.height*this.opts.scale,svg:n};a.push(i),i.height>o&&(o=i.height)}a.push({width:this.opts.arrow.length*this.opts.scale,height:2*this.opts.arrow.headSize*this.opts.scale,svg:this.getArrow()});let h="";for(l=0;l<t.reagents.length;l++){l>0&&(h+=", ");let e=this.drawer.getMolecularFormula(t.reagents[l]);e in he&&(e=he[e]),h+=ae.replaceNumbersWithSubscript(e)}n=n.replace("{reagents}",h);const u=ae.writeText(n,this.themeManager,this.opts.fontSize*this.opts.scale,this.opts.fontFamily,this.opts.arrow.length*this.opts.scale);let g=(this.opts.arrow.length*this.opts.scale-u.width)/2;a.push({svg:u.svg,height:u.height,width:this.opts.arrow.length*this.opts.scale,offsetX:-(this.opts.arrow.length*this.opts.scale+this.opts.spacing)+g,offsetY:-u.height/2-this.opts.arrow.margin,position:"relative"});const d=ae.writeText(i,this.themeManager,this.opts.fontSize*this.opts.scale,this.opts.fontFamily,this.opts.arrow.length*this.opts.scale);g=(this.opts.arrow.length*this.opts.scale-d.width)/2,a.push({svg:d.svg,height:d.height,width:this.opts.arrow.length*this.opts.scale,offsetX:-(this.opts.arrow.length*this.opts.scale+this.opts.spacing)+g,offsetY:d.height/2+this.opts.arrow.margin,position:"relative"});for(l=0;l<t.products.length;l++){l>0&&a.push({width:this.opts.plus.size*this.opts.scale,height:this.opts.plus.size*this.opts.scale,svg:this.getPlus()});let e=null;c&&c.hasOwnProperty("products")&&c.products.length>l&&(e=c.products[l]);let n=document.createElementNS("http://www.w3.org/2000/svg","svg");this.drawer.draw(t.products[l],n,r,e,s,[],this.opts.weights.normalize);let i={width:n.viewBox.baseVal.width*this.opts.scale,height:n.viewBox.baseVal.height*this.opts.scale,svg:n};a.push(i),i.height>o&&(o=i.height)}let f=0;return a.forEach((t=>{let e=t.offsetX??0,r=t.offsetY??0;t.svg.setAttributeNS(null,"x",Math.round(f+e)),t.svg.setAttributeNS(null,"y",Math.round((o-t.height)/2+r)),t.svg.setAttributeNS(null,"width",Math.round(t.width)),t.svg.setAttributeNS(null,"height",Math.round(t.height)),C.appendChild(t.svg),"relative"!==t.position&&(f+=Math.round(t.width+this.opts.spacing+e))})),C.setAttributeNS(null,"viewBox",`0 0 ${f} ${o}`),C.style.width=f+"px",C.style.height=o+"px",C}getPlus(){let t=this.opts.plus.size,e=this.opts.plus.thickness,r=document.createElementNS("http://www.w3.org/2000/svg","svg"),c=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=document.createElementNS("http://www.w3.org/2000/svg","rect");return r.setAttributeNS(null,"id","plus"),c.setAttributeNS(null,"x",0),c.setAttributeNS(null,"y",t/2-e/2),c.setAttributeNS(null,"width",t),c.setAttributeNS(null,"height",e),c.setAttributeNS(null,"fill",this.themeManager.getColor("C")),n.setAttributeNS(null,"x",t/2-e/2),n.setAttributeNS(null,"y",0),n.setAttributeNS(null,"width",e),n.setAttributeNS(null,"height",t),n.setAttributeNS(null,"fill",this.themeManager.getColor("C")),r.appendChild(c),r.appendChild(n),r.setAttributeNS(null,"viewBox",`0 0 ${t} ${t}`),r}getArrowhead(){let t=this.opts.arrow.headSize,e=document.createElementNS("http://www.w3.org/2000/svg","marker"),r=document.createElementNS("http://www.w3.org/2000/svg","polygon");return e.setAttributeNS(null,"id","arrowhead"),e.setAttributeNS(null,"viewBox",`0 0 ${t} ${t}`),e.setAttributeNS(null,"markerUnits","userSpaceOnUse"),e.setAttributeNS(null,"markerWidth",t),e.setAttributeNS(null,"markerHeight",t),e.setAttributeNS(null,"refX",0),e.setAttributeNS(null,"refY",t/2),e.setAttributeNS(null,"orient","auto"),e.setAttributeNS(null,"fill",this.themeManager.getColor("C")),r.setAttributeNS(null,"points",`0 0, ${t} ${t/2}, 0 ${t}`),e.appendChild(r),e}getCDArrowhead(){let t=this.opts.arrow.headSize,e=t*(7/4.5),r=document.createElementNS("http://www.w3.org/2000/svg","marker"),c=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttributeNS(null,"id","arrowhead"),r.setAttributeNS(null,"viewBox",`0 0 ${e} ${t}`),r.setAttributeNS(null,"markerUnits","userSpaceOnUse"),r.setAttributeNS(null,"markerWidth",2*e),r.setAttributeNS(null,"markerHeight",2*t),r.setAttributeNS(null,"refX",2.2),r.setAttributeNS(null,"refY",2.2),r.setAttributeNS(null,"orient","auto"),r.setAttributeNS(null,"fill",this.themeManager.getColor("C")),c.setAttributeNS(null,"style","fill-rule:nonzero;"),c.setAttributeNS(null,"d","m 0 0 l 7 2.25 l -7 2.25 c 0 0 0.735 -1.084 0.735 -2.28 c 0 -1.196 -0.735 -2.22 -0.735 -2.22 z"),r.appendChild(c),r}getArrow(){let t=this.opts.arrow.headSize,e=this.opts.arrow.length,r=document.createElementNS("http://www.w3.org/2000/svg","svg"),c=document.createElementNS("http://www.w3.org/2000/svg","defs"),n=document.createElementNS("http://www.w3.org/2000/svg","line");return c.appendChild(this.getCDArrowhead()),r.appendChild(c),r.setAttributeNS(null,"id","arrow"),n.setAttributeNS(null,"x1",0),n.setAttributeNS(null,"y1",-this.opts.arrow.thickness/2),n.setAttributeNS(null,"x2",e),n.setAttributeNS(null,"y2",-this.opts.arrow.thickness/2),n.setAttributeNS(null,"stroke-width",this.opts.arrow.thickness),n.setAttributeNS(null,"stroke",this.themeManager.getColor("C")),n.setAttributeNS(null,"marker-end","url(#arrowhead)"),r.appendChild(n),r.setAttributeNS(null,"viewBox",`0 ${-t/2} ${e+t*(7/4.5)} ${t}`),r}};const ge=ce,de=se,fe=te,pe=ue,me=zt,ve=Nt;var be=class t{constructor(t={},e={}){this.drawer=new fe(t),this.reactionDrawer=new pe(e,JSON.parse(JSON.stringify(this.drawer.opts)))}static apply(e={},r={},c="data-smiles",n="light",i=null,s=null){new t(e,r).apply(c,n,i,s)}apply(e="data-smiles",r="light",c=null,n=null){document.querySelectorAll(`[${e}]`).forEach((i=>{let s=i.getAttribute(e);if(null===s)throw Error("No SMILES provided.");let C=r,a=null;if(i.hasAttribute("data-smiles-theme")&&(C=i.getAttribute("data-smiles-theme")),i.hasAttribute("data-smiles-weights")&&(a=i.getAttribute("data-smiles-weights").split(",").map(parseFloat)),(i.hasAttribute("data-smiles-reactant-weights")||i.hasAttribute("data-smiles-reagent-weights")||i.hasAttribute("data-smiles-product-weights"))&&(a={reactants:[],reagents:[],products:[]},i.hasAttribute("data-smiles-reactant-weights")&&(a.reactants=i.getAttribute("data-smiles-reactant-weights").split(";").map((t=>t.split(",").map(parseFloat)))),i.hasAttribute("data-smiles-reagent-weights")&&(a.reagents=i.getAttribute("data-smiles-reagent-weights").split(";").map((t=>t.split(",").map(parseFloat)))),i.hasAttribute("data-smiles-product-weights")&&(a.products=i.getAttribute("data-smiles-product-weights").split(";").map((t=>t.split(",").map(parseFloat))))),i.hasAttribute("data-smiles-options")||i.hasAttribute("data-smiles-reaction-options")){let e={};i.hasAttribute("data-smiles-options")&&(e=JSON.parse(i.getAttribute("data-smiles-options").replaceAll("'",'"')));let r={};i.hasAttribute("data-smiles-reaction-options")&&(r=JSON.parse(i.getAttribute("data-smiles-reaction-options").replaceAll("'",'"'))),new t(e,r).draw(s,i,C,c,n,a)}else this.draw(s,i,C,c,n,a)}))}draw(t,e,r="light",c=null,n=null,i=null){let s=[];[t,...s]=t.split(" ");let C=s.join(" "),a={};if(C.includes("__")){let t=C.substring(C.indexOf("__")+2,C.lastIndexOf("__"));a=JSON.parse(t.replaceAll("'",'"'))}if(a=ve.extend(!0,{textAboveArrow:"{reagents}",textBelowArrow:""},a),t.includes(">"))try{this.drawReaction(t,e,r,a,i,c)}catch(t){n?n(t):console.error(t)}else try{this.drawMolecule(t,e,r,i,c)}catch(t){n?n(t):console.error(t)}}drawMolecule(t,e,r,c,n){let i=ge.parse(t);if(null===e||"svg"===e){let t=this.drawer.draw(i,null,r,c),e=this.getDimensions(t);t.setAttributeNS(null,"width",""+e.w),t.setAttributeNS(null,"height",""+e.h),n&&n(t)}else if("canvas"===e){let t=this.svgToCanvas(this.drawer.draw(i,null,r,c));n&&n(t)}else if("img"===e){let t=this.svgToImg(this.drawer.draw(i,null,r,c));n&&n(t)}else if(e instanceof HTMLImageElement)this.svgToImg(this.drawer.draw(i,null,r,c),e),n&&n(e);else if(e instanceof SVGElement)this.drawer.draw(i,e,r,c),n&&n(e);else{document.querySelectorAll(e).forEach((t=>{let e=t.nodeName.toLowerCase();"svg"===e?(this.drawer.draw(i,t,r,c),n&&n(t)):"canvas"===e?(this.svgToCanvas(this.drawer.draw(i,null,r,c),t),n&&n(t)):"img"===e&&(this.svgToImg(this.drawer.draw(i,null,r,c),t),n&&n(t))}))}}drawReaction(t,e,r,c,n,i){let s=de.parse(t);if(null===e||"svg"===e){let t=this.reactionDrawer.draw(s,null,r),e=this.getDimensions(t);t.setAttributeNS(null,"width",""+e.w),t.setAttributeNS(null,"height",""+e.h),i&&i(t)}else if("canvas"===e){let t=this.svgToCanvas(this.reactionDrawer.draw(s,null,r,n,c.textAboveArrow,c.textBelowArrow));i&&i(t)}else if("img"===e){let t=this.svgToImg(this.reactionDrawer.draw(s,null,r,n,c.textAboveArrow,c.textBelowArrow));i&&i(t)}else if(e instanceof HTMLImageElement)this.svgToImg(this.reactionDrawer.draw(s,null,r,n,c.textAboveArrow,c.textBelowArrow),e),i&&i(e);else if(e instanceof SVGElement)this.reactionDrawer.draw(s,e,r,n,c.textAboveArrow,c.textBelowArrow),i&&i(e);else{document.querySelectorAll(e).forEach((t=>{let e=t.nodeName.toLowerCase();"svg"===e?(this.reactionDrawer.draw(s,t,r,n,c.textAboveArrow,c.textBelowArrow),this.reactionDrawer.opts.scale<=0&&(t.style.width=null,t.style.height=null),i&&i(t)):"canvas"===e?(this.svgToCanvas(this.reactionDrawer.draw(s,null,r,n,c.textAboveArrow,c.textBelowArrow),t),i&&i(t)):"img"===e&&(this.svgToImg(this.reactionDrawer.draw(s,null,r,n,c.textAboveArrow,c.textBelowArrow),t),i&&i(t))}))}}svgToCanvas(t,e=null){null===e&&(e=document.createElement("canvas"));let r=this.getDimensions(e,t);return me.svgToCanvas(t,e,r.w,r.h),e}svgToImg(t,e=null){null===e&&(e=document.createElement("img"));let r=this.getDimensions(e,t);return me.svgToImg(t,e,r.w,r.h),e}getDimensions(t,e=null){let r=this.drawer.opts.width,c=this.drawer.opts.height;return this.drawer.opts.scale<=0?(null===r&&(r=t.width),null===c&&(c=t.height),""!==t.style.width&&(r=parseInt(t.style.width)),""!==t.style.height&&(c=parseInt(t.style.height))):e&&(r=parseFloat(e.style.width),c=parseFloat(e.style.height)),{w:r,h:c}}};const Oe=re,Ne=ce,we=se,ye=te,Se=ue,xe=be,Ae=Ut;var Fe=!("undefined"==typeof window||!window.document||!window.document.createElement),Re={Version:"1.0.0"};Re.Drawer=Oe,Re.Parser=Ne,Re.SvgDrawer=ye,Re.ReactionDrawer=Se,Re.ReactionParser=we,Re.GaussDrawer=Ae,Re.clean=function(t){return t.replace(/[^A-Za-z0-9@\.\+\-\?!\(\)\[\]\{\}/\\=#\$:\*]/g,"")},Re.apply=function(t,e="canvas[data-smiles]",r="light",c=null){let n=new Oe(t),i=document.querySelectorAll(e);for(var s=0;s<i.length;s++){let t=i[s];Re.parse(t.getAttribute("data-smiles"),(function(e){n.draw(e,t,r,!1)}),(function(t){c&&c(t)}))}},Re.parse=function(t,e,r){try{e&&e(Ne.parse(t))}catch(t){r&&r(t)}},Re.parseReaction=function(t,e,r){try{e&&e(we.parse(t))}catch(t){r&&r(t)}},Fe&&(window.SmilesDrawer=Re,window.SmiDrawer=xe),Re.SmiDrawer=xe,Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),r=e.length>>>0,c=arguments[1]>>0,n=c<0?Math.max(r+c,0):Math.min(c,r),i=arguments[2],s=void 0===i?r:i>>0,C=s<0?Math.max(r+s,0):Math.min(s,r);n<C;)e[n]=t,n++;return e}});var ke=Re;function Me(e){let r,c;return{c(){var t;r=l("div"),t="svg",c=document.createElementNS("http://www.w3.org/2000/svg",t),d(c,"data-smiles",e[0]),d(c,"class","svelte-7bs7sp"),m(c,"small",e[1])},m(t,n){C(t,r,n),s(r,c),e[3](c)},p(t,[e]){1&e&&d(c,"data-smiles",t[0]),2&e&&m(c,"small",t[1])},i:t,o:t,d(t){t&&a(r),e[3](null)}}}function Ee(t,e,r){let{smiles:c="CCCCCCC"}=e,{small:n=!1}=e;const i={width:n?200:400,height:300};let s,C=new ke.SvgDrawer(i);return O((()=>{r(2,s.innerHTML="",s),ke.parse(c,(function(t){C.draw(t,s,"dark")}))})),t.$$set=t=>{"smiles"in t&&r(0,c=t.smiles),"small"in t&&r(1,n=t.small)},[c,n,s,function(t){w[t?"unshift":"push"]((()=>{s=t,r(2,s)}))}]}class Te extends W{constructor(t){super(),V(this,t,Ee,Me,i,{smiles:0,small:1})}}function Ie(t,e,r){const c=t.slice();return c[6]=e[r],c}function Be(t){let e,r,c,n,i,o=t[5][t[3]]+"";return n=new Te({props:{smiles:t[1]}}),{c(){e=l("div"),r=h(o),c=u(),H(n.$$.fragment),d(e,"class","plus svelte-s7kr30")},m(t,a){C(t,e,a),s(e,r),C(t,c,a),z(n,t,a),i=!0},p(t,e){(!i||8&e)&&o!==(o=t[5][t[3]]+"")&&f(r,o);const c={};2&e&&(c.smiles=t[1]),n.$set(c)},i(t){i||(P(n.$$.fragment,t),i=!0)},o(t){D(n.$$.fragment,t),i=!1},d(t){t&&a(e),t&&a(c),$(n,t)}}}function Le(t){let e,r;return e=new Te({props:{smiles:t[2]}}),{c(){H(e.$$.fragment)},m(t,c){z(e,t,c),r=!0},p(t,r){const c={};4&r&&(c.smiles=t[2]),e.$set(c)},i(t){r||(P(e.$$.fragment,t),r=!0)},o(t){D(e.$$.fragment,t),r=!1},d(t){$(e,t)}}}function Pe(t){let e,r,c=t[2],n=[];for(let e=0;e<c.length;e+=1)n[e]=De(Ie(t,c,e));const i=t=>D(n[t],1,1,(()=>{n[t]=null}));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=h("")},m(t,c){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,c);C(t,e,c),r=!0},p(t,r){if(4&r){let s;for(c=t[2],s=0;s<c.length;s+=1){const i=Ie(t,c,s);n[s]?(n[s].p(i,r),P(n[s],1)):(n[s]=De(i),n[s].c(),P(n[s],1),n[s].m(e.parentNode,e))}for(B(),s=c.length;s<n.length;s+=1)i(s);L()}},i(t){if(!r){for(let t=0;t<c.length;t+=1)P(n[t]);r=!0}},o(t){n=n.filter(Boolean);for(let t=0;t<n.length;t+=1)D(n[t]);r=!1},d(t){o(n,t),t&&a(e)}}}function De(t){let e,r;return e=new Te({props:{smiles:t[6],small:!0}}),{c(){H(e.$$.fragment)},m(t,c){z(e,t,c),r=!0},p(t,r){const c={};4&r&&(c.smiles=t[6]),e.$set(c)},i(t){r||(P(e.$$.fragment,t),r=!0)},o(t){D(e.$$.fragment,t),r=!1},d(t){$(e,t)}}}function He(t){let e,r,c,n,i,o,h,g,f;r=new Te({props:{smiles:t[0]}});let p=t[1]&&Be(t);const m=[Pe,Le],v=[];function b(t,e){return t[4]?0:1}return h=b(t),g=v[h]=m[h](t),{c(){e=l("div"),H(r.$$.fragment),c=u(),p&&p.c(),n=u(),i=l("div"),i.innerHTML='<span class="text svelte-s7kr30"></span>',o=u(),g.c(),d(i,"class","arrow svelte-s7kr30"),d(e,"class","equation svelte-s7kr30")},m(t,a){C(t,e,a),z(r,e,null),s(e,c),p&&p.m(e,null),s(e,n),s(e,i),s(e,o),v[h].m(e,null),f=!0},p(t,[c]){const i={};1&c&&(i.smiles=t[0]),r.$set(i),t[1]?p?(p.p(t,c),2&c&&P(p,1)):(p=Be(t),p.c(),P(p,1),p.m(e,n)):p&&(B(),D(p,1,1,(()=>{p=null})),L());let s=h;h=b(t),h===s?v[h].p(t,c):(B(),D(v[s],1,1,(()=>{v[s]=null})),L(),g=v[h],g?g.p(t,c):(g=v[h]=m[h](t),g.c()),P(g,1),g.m(e,null))},i(t){f||(P(r.$$.fragment,t),P(p),P(g),f=!0)},o(t){D(r.$$.fragment,t),D(p),D(g),f=!1},d(t){t&&a(e),$(r),p&&p.d(),v[h].d()}}}function ze(t,e,r){let c,{left:n}=e,{right:i}=e,{result:s}=e,{type:C}=e;return t.$$set=t=>{"left"in t&&r(0,n=t.left),"right"in t&&r(1,i=t.right),"result"in t&&r(2,s=t.result),"type"in t&&r(3,C=t.type)},t.$$.update=()=>{4&t.$$.dirty&&r(4,c=Array.isArray(s))},[n,i,s,C,c,{add:"+",sub:"-"}]}class $e extends W{constructor(t){super(),V(this,t,ze,He,i,{left:0,right:1,result:2,type:3})}}var _e=[{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CC(C)(C)c1ccc(C(=O)Nc2ccccc2O)c(c1)C(C)(C)","CC(C)(C)c1ccc(OCCN(C)C)c(c1)C(C)(C)","CC(C)(C)c1ccc(OCCNC(=O)c2ccccc2F)c(c1)C(C)(C)","CC(C)(C)c1ccc(O)nc1N(C)C(=O)CC2CC2","CC(C)(C)c1ccc(O)c(c1)NC(=O)C(C)(C)C"],model:"gpt-3.5-turbo",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["Cc1ccccc1C=C","Cc1cccc(C#N)c1","Cc1cccc(C=O)c1","Cc1cccc(C=CCN)c1","Cc1ccccc1C(CC)C"],model:"gpt-3.5-turbo",type:"mutate"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:["CCOC(=O)N1CCC(CC1)c2cccnc2","CCNC(=O)c1ccc(cc1)Nc2nccc(n2)c3cccnc3","CC(C)Nc1ccccc1Nc2nccc(n2)c3cccnc3","CC(C)NC(=O)c1ccc(cc1)Nc2nccc(n2)c3cccnc3","CC(C)Nc1ccc(cc1)Nc2nccc(n2)c3cccnc3"],model:"gpt-3.5-turbo",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["O=C(C)Oc1ccccc1C(=O)N","O=C(C)Oc1ccccc1C(=O)N(C)C","O=C(C)Oc1ccccc1C(=O)OC","O=C(C)Oc1ccc(Cl)cc1C(=O)O","O=C(C)Oc1ccccc1C#N"],model:"gpt-3.5-turbo",type:"mutate"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:["C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12","CC1=C(OCCOCCN=C2C3=CC=CC=C3C(OCCOCC)=C2)C=CC(=C1)[N+]([O-])=O","CCCC(C)(C)C(=O)NC1=NN=C(C2=C1C=CC=C2)C(F)(F)F","COP(=O)(CC)OC1C2=CC=CC=C2C(=O)NC2=NC=C(N=C12)N","CC(=O)N[C@@H](CC1=CC=C(O)C=C1)C(=O)NC1=CN=C(N=C1)C1=CC=CC=C1"],model:"gpt-3.5-turbo",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C\\C=C\\c1ccccc1",type:"add",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)C/C=C/c2ccccc2)c1",right:"Cc1cccc(C=C)c1",result:"CCCC1=CC=C(C=C1)C",type:"sub",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C can be combined to form CC(C)(C)c1ccc(O)c(c1)C(C)(C)CNc2cccnc2NC(=O)c3ccc(cc3)CN4CCN(CC4)C",type:"add",model:"gpt-3.5-turbo"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CCC1=CC=C(NC(=O)C2=CC=C(CN3CCN(C)CC3)C=C2)C=C1N1C=CC=C2C(NC3=NC=C(N3)C3=CC=CC=N3)=NC=CN12",type:"sub",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)COC(=O)c1ccccc1C(=O)O",type:"add",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)COC(=O)c2ccccc2C(=O)O)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1C(=O)O - CC(C)(C)c1ccc(O)c(C(C)(C)COC(=O)c2ccccc2C(=O)O)c1  O=C(C)Oc1ccccc1C(=O)OCC(C)(C)c1ccc(O)c(C(C)(C)COC(=O)c2ccccc2C(=O)O)c1",type:"sub",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"  [Si]1(C)(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]1(C)(C))C2N=C(F)C(F)=NC12",type:"add",model:"gpt-3.5-turbo"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"c1ccc(C=C)c(C)c1Nc2nccc(n2)c3cccnc3NC(=O)c4ccc(CN5CCN(CC5)C)c(c4)C",type:"add",model:"gpt-3.5-turbo"},{left:"C=Cc1cccc(Nc2nccc(-c3cccnc3NC(=O)c3ccc(CN4CCN(C)CC4)c(C)c3)n2)c1C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CCc1ccc(C(=O)N2CCN(CC2)c2cccc(NC(=O)c3ccc(cc3)N3CCN(CC3)C)c2)c(C)c1",type:"sub",model:"gpt-3.5-turbo"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"",type:"add",model:"gpt-3.5-turbo"},{left:"",right:"O=C(C)Oc1ccccc1C(=O)O",result:"OC(=O)c1ccccc1C(=O)O",type:"sub",model:"gpt-3.5-turbo"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"gpt-3.5-turbo"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"",type:"sub",model:"gpt-3.5-turbo"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1C(=O)O",type:"add",model:"gpt-3.5-turbo"},{left:"CC(=O)Oc1ccccc1C(=O)O",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(=O)O",type:"sub",model:"gpt-3.5-turbo"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"gpt-3.5-turbo"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"",type:"sub",model:"gpt-3.5-turbo"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"[Si]12(CC(OC(C)=O)cccc1)C(C)(C)C(OCCOC1=CC=CC=C1C(OC(C)=O)=C1C=CC=C(C2=C3OCCOC3=C(F)C(F)=NC13)C1)=O",type:"add",model:"gpt-3.5-turbo"},{left:"C[Si]1C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"",type:"sub",model:"gpt-3.5-turbo"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CC(C)(C)c1ccc(O)c(N)c1C(C)(C)C","CC(C)(c1ccc(O)c(N)c1C(C)(C)C)C1CC1","CCc1ccc(O)cc1C(C)(C)C","C1CC1C(c2ccc(O)cc2C)C(C)(C)C","C1=CCCCC1c2ccc(O)c(c2)C(C)(C)C"],model:"gpt-4",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["CC1=CCCC=C1","Cc1ccc(C)cc1","CC1=CCC=CC1","CCCC1=CC=CC=C1","CC1=CCCCC1"],model:"gpt-4",type:"mutate"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:["Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)CCCCCC","Cc1ccc(cc1Nc2ncc(c(n2)c3ccc(nc3)C#N)N(=O)=O)NC(=O)c4ccc(cc4)CN5CCN(CC5)CC","Cc1ccc(cc1Nc2nccc(n2)c3ccc(nc3)C(=O)O)NC(=O)c4ccc(cc4)CN5CCN(CC5)COC","Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)N6CCOCC6","Cc1ccc(cc1Nc2nccc(n2)c3cc(ccn3)C)NC(=O)c4ccc(cc4)CN5CCN(CC5)CS"],model:"gpt-4",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["C1=CC(=O)C2C(=O)C=C(OC2=C1)O","OC(=O)C1=C(CC=O)C(O)=CC=C1","O=C(O)C1=CC(OC2=CC=CC=C2)=CC=C1O","C1=CC(=O)OC(C(=O)O)C=C1","O=C(C(=O)O)c1ccc(OC2=CC=CC=C2C=O)cc1"],model:"gpt-4",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CCc2cccc(C=C)c2",type:"add",model:"gpt-4"},{left:"C=Cc1cccc(CCC(C)(C)c2cc(C(C)(C)C)ccc2O)c1",right:"Cc1cccc(C=C)c1",result:"Cc1cccc(C)c1",type:"sub",model:"gpt-4"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CCc2ccc(cc2Nc3nccc(n3)c4cccnc4)NC(=O)c5ccc(cc5)CN6CCN(CC6)C",type:"add",model:"gpt-4"},{left:"CN1CCN(Cc2ccc(C(=O)Nc3ccc(CCC(C)(C)c4cc(C(C)(C)C)ccc4O)c(Nc4nccc(-c5cccnc5)n4)c3)cc2)CC1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)C",type:"sub",model:"gpt-4"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)c1ccc(OCC(=O)Oc2ccccc2C(=O)O)c(c1)C(C)(C)C",type:"add",model:"gpt-4"},{left:"CC(C)(C)c1ccc(OCC(=O)Oc2ccccc2C(=O)O)c(C(C)(C)C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)c1ccc(Oc2ccccc2C(=O)O)c(C(C)(C)C)c1",type:"sub",model:"gpt-4"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si](C)(C)c1ccc(-c2ccc3c(c2)[SiH2]C(=C3OCCO1)C1=CC=C(-c3c4OCCOc4cc4N=C(F)C(F)=NC34)C2N=C(F)C(F)=NC12)C(C)(C)C",type:"add",model:"gpt-4"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1cccc(C=CCc2ccc(cc2Nc3nccc(n3)c4cccnc4)NC(=O)c5ccc(cc5)CN6CCN(CC6)C)c1",type:"add",model:"gpt-4"},{left:"Cc1cccc(C=CCc2ccc(NC(=O)c3ccc(CN4CCN(C)CC4)cc3)cc2Nc2nccc(-c3cccnc3)n2)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc1nccc(n1)c1cccnc1)NC(=O)c1ccc(cc1)CN1CCN(CC1)C",type:"sub",model:"gpt-4"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(=O)Oc1ccccc1C(=O)OCCc1cccc(C=C)c1",type:"add",model:"gpt-4"},{left:"C=Cc1cccc(CCOC(=O)c2ccccc2OC(C)=O)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1",type:"sub",model:"gpt-4"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C=CC1=CC=C(C2=C(Si(C)C=C2C)C2=CC=C(C3=C(Si(C)C=C3C)C3N=C(F)C(F)=NC3=N2)C2N=C(F)C(F)=NC12)C=C1",type:"add",model:"gpt-4"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(=O)Nc1ccc(cc1Nc2nccc(n2)c3cccnc3)CN4CCN(CC4)COC(=O)C(=O)c5ccccc5",type:"add",model:"gpt-4"},{left:"CC(=O)Nc1ccc(CN2CCN(COC(=O)C(=O)c3ccccc3)CC2)cc1Nc1nccc(-c2cccnc2)n1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1C(=O)OC(C(=O)Nc1ccc(CN2CCN(COC(=O)C(=O)c3ccccc3)CC2)cc1Nc1nccc(-c2cccnc2)n1)Nc1ccc(-c2cccnc2)nccc1N",type:"sub",model:"gpt-4"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"gpt-4"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C)C2N=C(F)C(F)=NC12",type:"sub",model:"gpt-4"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(C)Oc1ccccc1C(=O)OCC2=C(O[Si]1(C)C=C1C)C1=CC=C(C3=C4OCCOC4=[Si]C3(C)C)C3N=C(F)C(F)=NC123",type:"add",model:"gpt-4"},{left:"CC(=O)Oc1ccccc1C(=O)OCC1=C(O[Si]2(C)C=C2C)C2=CC=C(C3=C4OCCOC4=[Si]C3(C)C)C3N=C(F)C(F)=NC213",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si](C)(C=C(O1CCOC1))C1=Cc2cc(C3NC(F)=NC(F)=C3)ncc2C(Cc2ccc(O1CCOC1)cc2)=[Si]C1CCC1",type:"sub",model:"gpt-4"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["C(=O)c1ccc(O)c(c1)C(C)(C)C"],model:"text-curie-001",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["Cc1ccccc1","C=C","c1ccccc1","Cc1ccccc1","Cc1ccccc1","Cc1ccccc1","C=C","c1ccccc1","Cs1cccs1","Cc1ccccc1"],model:"text-curie-001",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O","O=C(C)Oc1ccccc1C(=O)O"],model:"text-curie-001",type:"mutate"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:["C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12"],model:"text-curie-001",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC=C",type:"add",model:"text-curie-001"},{left:"C=C",right:"Cc1cccc(C=C)c1",result:"",type:"sub",model:"text-curie-001"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"text-curie-001"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C6",type:"sub",model:"text-curie-001"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccccc1C(=O)O",type:"add",model:"text-curie-001"},{left:"CC(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC-C-O-C-C-O-O",type:"sub",model:"text-curie-001"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"",type:"add",model:"text-curie-001"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"c1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"text-curie-001"},{left:"C=Cc1ccccc1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C6",type:"sub",model:"text-curie-001"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"Cc1cccc(C=C)c1C(=O)O",type:"add",model:"text-curie-001"},{left:"C=Cc1cccc(C)c1C(=O)O",right:"O=C(C)Oc1ccccc1C(=O)O",result:"c1ccccc1C(=O)O",type:"sub",model:"text-curie-001"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CCCCCCCCC1=C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"text-curie-001"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"text-curie-001"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O-C1CCCCC1-C=O",type:"sub",model:"text-curie-001"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"text-curie-001"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"sub",model:"text-curie-001"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C=C(C)Oc1ccccc1C(=O)O",type:"add",model:"text-curie-001"},{left:"C=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Subtract C=C(C)Oc1ccccc1C(=O)O from C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"sub",model:"text-curie-001"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CC1(C)C2(C)C3(C)C=C(C3C(C)(C)C2C1C)c4ccc(O)c(c4)C(C)(C)C","CC1(C)C2(C)C3(C)C=C(C3C(C)(C)C2C1C)c4ccc(N)c(c4)C(C)(C)C","CC1(C)C2(C)C3(C)C=C(C3C(C)(C)C2C1C)c4ccc(S)c(c4)C(C)(C)C","CC1(C)C2(C)C3(C)C=C(C3C(C)(C)C2C1C)c4ccc(F)c(c4)C(C)(C)C"],model:"text-davinci-003",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["CC1=C(C(C(C(C1)O)O)O)C","CC1=C(C(C(C(C1)O)O)N)C","CC1=C(C(C(C(C1)N)N)N)C","CC1=C(C(C(C(C1)S)S)S)C","CC1=C(C(C(C(C1)F)F)F)C"],model:"text-davinci-003",type:"mutate"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:["Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CNC(=O)C6CCN(CC6)C","Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CNC(=O)C6CCC(=O)N(CC6)C","Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CNC(=O)C6CC=CC(=O)N(C6)C","Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CNC(=O)C6C=CC(=O)N(CC6)C"],model:"text-davinci-003",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["CC(C)(C)Oc1ccc(O)cc1C(=O)O","CC(=O)Oc1cc(O)ccc1C(C)(C)O","O=C(C)Oc1ccc(C(=O)O)cc1","CC(C)(C)Oc1ccc(C(=O)O)cc1","CC(=O)Oc1ccc(C)cc1C(C)(C)O"],model:"text-davinci-003",type:"mutate"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:["[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12","[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12","[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12","[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12"],model:"text-davinci-003",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CC=Cc1ccccc1",type:"add",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)CC=Cc2ccccc2)c1",right:"Cc1cccc(C=C)c1",result:"CC(=Cc1ccccc1)C(C)(C)CC(C)C",type:"sub",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CNC(=O)c1ccc(cc1Nc2nccc(n2)c3cccnc3)CN5CCN(CC5)C",type:"add",model:"text-davinci-003"},{left:"CN1CCN(Cc2ccc(C(=O)NCC(C)(C)c3cc(C(C)(C)C)ccc3O)c(Nc3nccc(-c4cccnc4)n3)c2)CC1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)Cc2ccc(C(=O)NCC(C)(C)c3cc(C(C)(C)C)ccc3O)c(Nc3nccc(-c4cccnc4)n3)c2",type:"sub",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C(=O)Oc1ccccc1C(=O)O",type:"add",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)C(=O)Oc2ccccc2C(=O)O)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(C)C(=O)Oc1ccccc1",type:"sub",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C1=C(C[Si]2(C)C=C3OCCOC3=C2C2=CC=C(C3=C4OCCOC4=C[Si]3(C)C)C4N=C(F)C(F)=NC24)C=CC=C1",type:"add",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)c2ccccc2C[Si]2(C)C=C3OCCOC3=C2C2=CC=C(C3=C4OCCOC4=C[Si]3(C)C)C3N=C(F)C(F)=NC23)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC(C)(C)c1ccc(O)c(C(C)(C)c2ccccc2C[Si]2(C)C=C3OCCOC3=C2C2=CC=CN2C3=C4OCCOC4=C[Si]3(C)C)c1",type:"sub",model:"text-davinci-003"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc2c(cc1C=C)c3ccc(Nc4nccc(n4)c5cccnc5)ccc23NC(=O)c6ccc(cc6)CN7CCN(CC7)C",type:"add",model:"text-davinci-003"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"Cc1cccc(C=C)c1O=C(C)Oc1ccccc1C(=O)O",type:"add",model:"text-davinci-003"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Cc1ccc(C=C)cc1C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"text-davinci-003"},{left:"C=Cc1ccc(C)c(C[Si]2(C)C=C3OCCOC3=C2C2=CC=C(C3=C4OCCOC4=C[Si]3(C)C)C3N=C(F)C(F)=NC23)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C1[Si]2(C)C=C3OCCOC3=C2C2=CC=C(C3=C4OCCOC4=C[Si]3(C)C2N=C(F)C(F)=NC13)C1",type:"sub",model:"text-davinci-003"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC1=C(C(=O)Nc2ccc(cc2Nc3nccc(n3)c4cccnc4)C1)N(Cc5ccc(cc5)CN6CCN(CC6)C)C(=O)C7CCCCC7",type:"add",model:"text-davinci-003"},{left:"CC1=C(N(Cc2ccc(CN3CCN(C)CC3)cc2)C(=O)C2CCCCC2)C(=O)Nc2ccc(cc2Nc2nccc(-c3cccnc3)n2)C1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC1=CN(Cc2ccc(CN3CCN(C)CC3)cc2)C(=O)C2CCCCC2Nc2ccc(cc2Nc2nccc(-c3cccnc3)n2)C1",type:"sub",model:"text-davinci-003"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"text-davinci-003"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C[Si]4(C)C=C5OCCOC5=C4C4=CC=C(C5=C6OCCOC6=C[Si]5(C)C)C5N=C(F)C(F)=NC45)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C[Si]4(C)C=C5OCCOC5=C4C4=CC=C(C5=C6OCCOC6=C[Si]5(C)C)C5N=C(F)C(F)=NC45)CC3)cc2)cc1N",type:"sub",model:"text-davinci-003"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(C)Oc1ccccc1C(=O)OC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"text-davinci-003"},{left:"CC(=O)Oc1ccccc1C(=O)OC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC(=O)Oc1ccccc1C(=O)OC",type:"sub",model:"text-davinci-003"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CN1C=NC2=C1C(=O)N(C(=O)N2C)C","Cc1cccc(C)c1OCc1ccc(C(C)C)cc1","CC(C)(C)c1cncc(C)c1O","Cc1ccccc1C(C)(C)CO","CC(C)(C)CCC(=O)N1CCN(CC1)C\\C=C/c1ccccc1"],model:"claude-v1",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["C=CCc1ccccc1","C/C(=C\\C)c1ccccc1","C=C\\C=C/c1ccccc1","CC(=C)C(C=C)c1ccccc1","C/C(=C/C)c1ccccc1"],model:"claude-v1",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["Cn1c(=O)c2ccccc12","COc1ccc(C(=O)O)cc1","CN1C(=O)c2ccccc12","CC(C)=C\\C(=O)O/c1ccccc1","O=Cc1ccc(C(=O)O)cc1"],model:"claude-v1",type:"mutate"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:["C1=C=C(CC=C2OCCOC2=NC(=NC(=O)C3CCOC(C(=O)C4=CC=CC=C4)=C3)F)SC1","C1=C=C(CC=C2OCCOC2=NC=NC(=O)C(=O)COC3=CC=CC=C3)SC1"],model:"claude-v1",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"C[C@]12CC[C@H]3[C@H]2C[C@](C)(C)[C@@H](OC4=CC=CC(=C4)C(C)(C)C)[C@@H](C)[C@]4(C)CC[C@@H]5[C@@H]4CC[C@@H]5C3",type:"add",model:"claude-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CC=C",type:"add",model:"claude-v1"},{left:"C=CCC(C)(C)c1cc(C(C)(C)C)ccc1O",right:"Cc1cccc(C=C)c1",result:"CCCCCCCC(C)(C)c1cc(C(C)(C)C)ccc1O - Cc1cccc(C=C)c1\nCc1cccc(C)c1",type:"sub",model:"claude-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)Cc6ccc(cc6Nc7nccc(n7)c8cccnc8)NC(=O)c9ccc(cc9)CN%10CCN(CC10)C",type:"add",model:"claude-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(C)(Oc1ccccc1C(=O)O)c1ccc(O)c(c1)C(C)(C)C",type:"add",model:"claude-v1"},{left:"CC(C)(C)c1cc(C(C)(C)Oc2ccccc2C(=O)O)ccc1O",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccc(C(C)(C)Oc2ccccc2C(=O)O)cc1",type:"sub",model:"claude-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)CNC(=O)C1=C[Si]2(C)CCOC2=C1C1=CC=C(c2oc3ccccc3c2)C2N=C(F)C(F)=NC12",type:"add",model:"claude-v1"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)CNC(=O)C2=C[Si]3(C)CCOC3=C2C2=CC=C(c3cc4ccccc4o3)C3N=C(F)C(F)=NC23)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C1=CC=C(C2=C3OCCOC3=C[Si](C)C2CCC(=O)NC(C)(C)C)C([Si](C)CC(O)(C(C)(C)CNC(=O)C2=C[Si](C)CCOC2=C3C=CC=C3c2cc3ccccc3o2)c1)C2N=C(F)C(F)=NC12",type:"sub",model:"claude-v1"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"CCN1CCN(CC1)C(=O)Nc2ccc(cc2)c3nccc(n3)Nc4ccc(cc4=C)C=C",type:"add",model:"claude-v1"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CC(=O)Oc1cccc(C=CCc2ccccc2)c1C(=O)O",type:"add",model:"claude-v1"},{left:"CC(=O)Oc1cccc(C=CCc2ccccc2)c1C(=O)O",right:"O=C(C)Oc1ccccc1C(=O)O",result:"O=C(C)Oc1ccc(/C=CCc2ccccc2)cc1C(=O)O",type:"sub",model:"claude-v1"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Nc1c(F)c(NC2=C(C=CC=C1C3OCCOC3=CC=C2C)C4OCCOC4=CC=CC(C)=C)C(F)=N",type:"add",model:"claude-v1"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CN1CCN(CC1)c2ccccc2NC(=O)c3cccc(c3)Nc4nccc(n4)c5ccc(NC)cc5",type:"add",model:"claude-v1"},{left:"CNc1ccc(-c2ccnc(Nc3cccc(C(=O)Nc4ccccc4N4CCN(C)CC4)c3)n2)cc1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CNc1ccc(c2ccnc(Nc3cccc(N4CCN(C)CC4)c3)n2)cc1",type:"sub",model:"claude-v1"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC1=C[C+]([C+]([OC]([C+]([OC]([C+]([OC]([C+]1C)C)(CC2=C3NC(=O)C(=C4N=C(F)C(=C4)C)CC(C3CCC2)N(C)C)CC3=C([Si]([C]([C#N]4CC(C4)C)(C)[C]3=C(C)C)C)C)C)C)C",type:"add",model:"claude-v1"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(C)Oc1ccccc1C(=O)OCC1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"claude-v1"},{left:"CC(=O)Oc1ccccc1C(=O)OCC1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CN1C=NC(=C1F)C1=CC=C(C2=C3OCCOC3=CC2)",type:"sub",model:"claude-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CC(C)(C)CCC(C)(C)C","C(CCC)(CCC)C","CCC(=O)CN(C)C(C)(C)C","O=CCC(NC(C)=O)Nc1ccc(Cl)cc1","CCC(F)C","CC(F)C"],model:"claude-instant-v1",type:"mutate"},{left:"Cc1cccc(C=C)c1",result:["Cc1ccc(F)cc1","CCCCC=C","CC(O)=NC1=CNC=N1","CCCN(CCC(C)C)Cl","CCCN(CCC(C)C)CCC"],model:"claude-instant-v1",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["CCCc1ccccc1CCC"],model:"claude-instant-v1",type:"mutate"},{left:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:["C[Si]1(C)C=C2OCCOC2=C1C1=CC=CCC1","OCCC1=CN=C(F)C(F)=NCCC1","C[Si]2(C=CC3OCCOC3=C2C=C)C3N=C(F)C(F)=NCCC3","CCCNC1=NC2=C(OCCO)C(CC3C)C=C3C=CCC=C12","CCC1SCOCSC1N=C(F)C(Cl)F","COC1=CC=C(C=CC=N)CN(C)CC1C1=CNC=C2OCCOC2=C1","OCCOC1=CNC2C3CCOCCOC3C2=C1C1=NC2=C(OCCO)SC2=CNC1"],model:"claude-instant-v1",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"Cc1ccc(cc1)C(C)(C)c1ccc(O)c(c1)C(C)(C)c2c[nH+]c3ccc4c[nH+]c(C)(C)([O-])=NC5=C(N5)c6ccccc6",type:"add",model:"claude-instant-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"c1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C \nCCCc1ccc(O)c(c1)C(C)(C)CCCNC(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"claude-instant-v1"},{left:"CN1CCN(Cc2ccc(C(=O)Nc3cccc(Nc4nccc(-c5cccnc5)n4)c3)cc2)CC1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C \nNC(=O)c1ccc(cc1CN2CCCN(Cc3ccc(C(=O)Nc4cccc(Nc5ccccn5)c4)cc3)CC2)C",type:"sub",model:"claude-instant-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"C1CCC2C(CCC1C)(CCC[O])OC(O)C \nCC3CC4C5C7C8O7C7CCC5C4CCC3C1CCC2C(CCC1C)(CCC[O])OC(O)C",type:"add",model:"claude-instant-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C \nCCC(C)(C)c1ccc(O)c(c1)C(C)(C)CC1=NSiC2=NC3=CC=C(C=O)O3C=C2NC1=O \nC1=CCC=C2C(O)=C3OCCOC3=C[Si](C)(C)C2=C1",type:"add",model:"claude-instant-v1"},{left:"CC(C)(C)c1ccc(O)c(C(C)(C)C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(CO)Cc1ccccc1c2ccccc2 \nC1CCCCC1SCC1(OC)CCCC1",type:"sub",model:"claude-instant-v1"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1cccc(C=C)c1Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",type:"add",model:"claude-instant-v1"},{left:"C=Cc1cccc(C)c1Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(C)CC5 \nCc1ccc(cc1NC(=O)c2ccc(cnc3CCCO)cc2)Nc1nccc(-c2cccnc2)n1",type:"sub",model:"claude-instant-v1"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"CN(CCC)CCC1CCC(O)OC(=O)c1COC(=O)O",type:"add",model:"claude-instant-v1"},{left:"CCCN(C)CCC1CCC(O)OC(=O)C1COC(=O)O",right:"O=C(C)Oc1ccccc1C(=O)O",result:"  CC=CNC1N(C2CCC(O)OC(=O)C3COC(=O)O)CCC2CCC3",type:"sub",model:"claude-instant-v1"},{left:"Cc1cccc(C=C)c1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C1cccc(C=C)c1 \nC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12 \n\nCCC1COCCC1C([Si](C)(C)CC)C2NC(=O)C(F)FCN2",type:"add",model:"claude-instant-v1"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)CO1CCOC(=O)c2ccccc12",type:"add",model:"claude-instant-v1"},{left:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C \nCNC(=O)c1ccc(cc1Nc2nccc(n2)c3cccnc3)C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12 \nCNC1=NC(=O)C2=C1C=CC=C3CCN(CCC3)CCOC2c4ccc(cc4)Cl1ccc2c(c(c12)NC(F)=NF)NC23CNc4c5cc(OC)cc5c4CN23",type:"add",model:"claude-instant-v1"},{left:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12 \nCc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1 \n\nC[Si]1(OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)]=NC12 Fc1nccc2nc(CN3CCN(C)CC3)=cc(-c2cccnc2)c1",type:"sub",model:"claude-instant-v1"},{left:"O=C(C)Oc1ccccc1C(=O)O",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"O=C(C)Oc1ccccc1C(=O)OC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",type:"add",model:"claude-instant-v1"},{left:"CC(=O)Oc1ccccc1C(=O)OC[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"CCOC(=O)CCC1c2ccccc2ccc1(CN)NC",type:"sub",model:"claude-instant-v1"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",result:["CC(C)(O)O"],model:"cohere-command-xlarge",type:"mutate"},{left:"O=C(C)Oc1ccccc1C(=O)O",result:["O=C(C)Oc1ccccc1C(=O)Oc2ccccc2"],model:"cohere-command-xlarge",type:"mutate"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1cccc(C=C)c1",result:"",type:"add",model:"cohere-command-xlarge"},{left:"",right:"Cc1cccc(C=C)c1",result:"",type:"sub",model:"cohere-command-xlarge"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"",type:"add",model:"cohere-command-xlarge"},{left:"",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"\nThe result is\nCCC(NCNC(C(=O))C3=O)O",type:"sub",model:"cohere-command-xlarge"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"O=C(C)Oc1ccccc1C(=O)O",result:"",type:"add",model:"cohere-command-xlarge"},{left:"",right:"O=C(C)Oc1ccccc1C(=O)O",result:"c2ccccc2C(=O)Oc3ccccc3C(=O)Oc4ccccc4C(=O)Oc5ccccc5C(=O)Oc6ccccc6C(=O)Oc7ccccc7C(=O)O",type:"sub",model:"cohere-command-xlarge"},{left:"CC(C)(C)c1ccc(O)c(c1)C(C)(C)C",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"",type:"add",model:"cohere-command-xlarge"},{left:"",right:"C[Si]1(C)C=C2OCCOC2=C1C1=CC=C(C2=C3OCCOC3=C[Si]2(C)C)C2N=C(F)C(F)=NC12",result:"from H3C-N(C(F)(C(F)(C(F)(C(F)(F)C(F)(F)(C(F)O)C2F)O)F)C-N(C2=C3C=C3O)O)(O)CH2CH2 from",type:"sub",model:"cohere-command-xlarge"},{left:"Cc1cccc(C=C)c1",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"",type:"add",model:"cohere-command-xlarge"},{left:"",right:"Cc1ccc(cc1Nc2nccc(n2)c3cccnc3)NC(=O)c4ccc(cc4)CN5CCN(CC5)C",result:"",type:"sub",model:"cohere-command-xlarge"},{left:"Cc1cccc(C=C)c1",right:"O=C(C)Oc1ccccc1C(=O)O",result:"",type:"add",model:"cohere-command-xlarge"}];function Ve(t,e,r){const c=t.slice();return c[10]=e[r].left,c[11]=e[r].right,c[12]=e[r].result,c[13]=e[r].type,c}function We(t,e,r){const c=t.slice();return c[16]=e[r],c}function Xe(t){let e,r,c,n=t[16]+"";return{c(){e=l("option"),r=h(n),e.__value=c=t[16],e.value=e.__value},m(t,c){C(t,e,c),s(e,r)},p(t,i){4&i&&n!==(n=t[16]+"")&&f(r,n),4&i&&c!==(c=t[16])&&(e.__value=c,e.value=e.__value)},d(t){t&&a(e)}}}function Ue(t){let e,r,c,n=t[4][t[1]]+"";return{c(){e=l("div"),r=h("Prompt: [omitted prefix] "),c=h(n),d(e,"class","prompt svelte-444h2t")},m(t,n){C(t,e,n),s(e,r),s(e,c)},p(t,e){2&e&&n!==(n=t[4][t[1]]+"")&&f(c,n)},d(t){t&&a(e)}}}function Ye(t){let e,r;return e=new $e({props:{left:t[10],right:t[11],result:t[12],type:t[13]}}),{c(){H(e.$$.fragment)},m(t,c){z(e,t,c),r=!0},p(t,r){const c={};3&r&&(c.left=t[10]),3&r&&(c.right=t[11]),3&r&&(c.result=t[12]),3&r&&(c.type=t[13]),e.$set(c)},i(t){r||(P(e.$$.fragment,t),r=!0)},o(t){D(e.$$.fragment,t),r=!1},d(t){$(e,t)}}}function qe(t){let e,r,n,i,h,f,m,v,b,O,N,w,y,S,x,A,R,k,M=[...t[2]],E=[];for(let e=0;e<M.length;e+=1)E[e]=Xe(We(t,M,e));let T=t[0]&&t[1]&&Ue(t),I=t[3].filter(t[9]),H=[];for(let e=0;e<I.length;e+=1)H[e]=Ye(Ve(t,I,e));const z=t=>D(H[t],1,1,(()=>{H[t]=null}));return{c(){e=l("main"),r=l("h1"),r.textContent="mol_algebra",n=u(),i=l("select");for(let t=0;t<E.length;t+=1)E[t].c();h=u(),f=l("div"),m=l("button"),m.textContent="mutate",v=u(),b=l("button"),b.textContent="add",O=u(),N=l("button"),N.textContent="sub",w=u(),T&&T.c(),y=u(),S=l("div"),S.textContent="author: andrew",x=u();for(let t=0;t<H.length;t+=1)H[t].c();d(r,"class","hero svelte-444h2t"),void 0===t[0]&&F((()=>t[5].call(i))),d(e,"class","svelte-444h2t")},m(c,a){C(c,e,a),s(e,r),s(e,n),s(e,i);for(let t=0;t<E.length;t+=1)E[t]&&E[t].m(i,null);p(i,t[0],!0),s(e,h),s(e,f),s(f,m),s(f,v),s(f,b),s(f,O),s(f,N),s(e,w),T&&T.m(e,null),s(e,y),s(e,S),s(e,x);for(let t=0;t<H.length;t+=1)H[t]&&H[t].m(e,null);A=!0,R||(k=[g(i,"change",t[5]),g(m,"click",t[6]),g(b,"click",t[7]),g(N,"click",t[8])],R=!0)},p(t,[r]){if(4&r){let e;for(M=[...t[2]],e=0;e<M.length;e+=1){const c=We(t,M,e);E[e]?E[e].p(c,r):(E[e]=Xe(c),E[e].c(),E[e].m(i,null))}for(;e<E.length;e+=1)E[e].d(1);E.length=M.length}if(5&r&&p(i,t[0]),t[0]&&t[1]?T?T.p(t,r):(T=Ue(t),T.c(),T.m(e,y)):T&&(T.d(1),T=null),11&r){let c;for(I=t[3].filter(t[9]),c=0;c<I.length;c+=1){const n=Ve(t,I,c);H[c]?(H[c].p(n,r),P(H[c],1)):(H[c]=Ye(n),H[c].c(),P(H[c],1),H[c].m(e,null))}for(B(),c=I.length;c<H.length;c+=1)z(c);L()}},i(t){if(!A){for(let t=0;t<I.length;t+=1)P(H[t]);A=!0}},o(t){H=H.filter(Boolean);for(let t=0;t<H.length;t+=1)D(H[t]);A=!1},d(t){t&&a(e),o(E,t),T&&T.d(),o(H,t),R=!1,c(k)}}}function Ge(t,e,r){let c=_e,n="gpt-4",i="mutate",s=new Set(c.map((t=>t.model)));s=[...s].sort(((t,e)=>t.length-e.length));return[n,i,s,c,{mutate:"Generate 5 diverse molecules that are similar to {mol}",add:"Add {left} and {right} into a single molecule",sub:"Subtract {left} from {right}"},function(){n=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),r(0,n),r(2,s)},()=>r(1,i="mutate"),()=>r(1,i="add"),()=>r(1,i="sub"),t=>t.type===i&&(!n||t.model===n)]}return new class extends W{constructor(t){super(),V(this,t,Ge,qe,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
